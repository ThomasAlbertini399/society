<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Society - Investimenti in Oggetti di Lusso</title>
    <style>
        :root {
            --primary-color: #1a1a1a;
            --secondary-color: #f8f8f8;
            --accent-color: #d4af37;
            --text-color: #333;
            --light-gray: #e9e9e9;
            --medium-gray: #c0c0c0;
            --dark-gray: #666;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Helvetica Neue', Arial, sans-serif;
        }
        
        body {
            background-color: var(--secondary-color);
            color: var(--text-color);
            padding-bottom: 70px;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
        }
        
        header {
            background-color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
            text-align: center;
            flex-grow: 1;
            cursor: pointer;
        }
        
        .header-icons {
            display: flex;
            gap: 15px;
        }
        
        .header-icon {
            background: none;
            border: none;
            font-size: 20px;
            color: var(--dark-gray);
            cursor: pointer;
            position: relative;
        }
        
        .main-content {
            margin-top: 60px;
            padding: 15px;
        }
        
        .categories-menu {
            display: flex;
            overflow-x: auto;
            padding: 10px 5px;
            gap: 15px;
            background-color: white;
            margin-bottom: 15px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .menu-item {
            white-space: nowrap;
            padding: 8px 15px;
            border-radius: 20px;
            background-color: var(--light-gray);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .menu-item.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        .menu-item:hover {
            background-color: var(--medium-gray);
        }
        
        .submenu {
            display: flex;
            overflow-x: auto;
            padding: 10px 5px;
            gap: 15px;
            background-color: white;
            margin-bottom: 15px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .submenu-item {
            white-space: nowrap;
            padding: 6px 12px;
            border-radius: 15px;
            background-color: var(--light-gray);
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .submenu-item.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        .submenu-item:hover {
            background-color: var(--medium-gray);
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .product-card {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            cursor: pointer;
        }
        
        .product-image {
            height: 180px;
            width: 100%;
            background-size: cover;
            background-position: center;
            position: relative;
        }
        
        .favorite-btn {
            position: absolute;
            right: 10px;
            top: 10px;
            background: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            z-index: 10;
        }
        
        .countdown-badge {
            position: absolute;
            left: 10px;
            top: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .product-info {
            padding: 12px;
        }
        
        .product-category {
            font-size: 12px;
            color: var(--dark-gray);
            margin-bottom: 5px;
        }
        
        .product-name {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--primary-color);
        }
        
        .product-dealer {
            font-size: 12px;
            font-weight: 500;
            margin-bottom: 5px;
            background-color: var(--light-gray);
            padding: 3px 6px;
            border-radius: 4px;
            display: inline-block;
        }
        
        .dealer-premium {
            background-color: #FFF9C4;
            color: #FFA000;
        }
        
        .dealer-luxury {
            background-color: #E1F5FE;
            color: #0288D1;
        }
        
        .product-price {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }
        
        .price-label {
            font-size: 11px;
            color: var(--dark-gray);
        }
        
        .price-value {
            font-size: 13px;
            font-weight: bold;
        }
        
        .product-status {
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            color: var(--dark-gray);
        }
        
        .status-collected {
            color: #43A047;
        }
        
        .status-time {
            display: flex;
            align-items: center;
            gap: 3px;
        }
        
        .bottom-navigation {
            background-color: white;
            position: fixed;
            bottom: 0;
            width: 100%;
            display: flex;
            justify-content: space-around;
            padding: 12px 0;
            box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
            z-index: 1000;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 10px;
            color: var(--dark-gray);
            text-decoration: none;
        }
        
        .nav-icon {
            font-size: 20px;
            margin-bottom: 3px;
        }
        
        .nav-item.active {
            color: var(--accent-color);
        }
        
        .add-opportunity {
            background-color: var(--accent-color);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            margin-top: -20px;
            box-shadow: 0 3px 5px rgba(0,0,0,0.2);
        }
        
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background-color: white;
            width: 90%;
            max-width: 400px;
            border-radius: 10px;
            padding: 20px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .modal-title {
            font-size: 18px;
            font-weight: bold;
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 5px;
            font-size: 14px;
            font-weight: 500;
        }
        
        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--medium-gray);
            border-radius: 5px;
            font-size: 14px;
        }
        
        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        .btn-primary {
            background-color: var(--accent-color);
            color: white;
            width: 100%;
        }
        
        .btn-primary:hover {
            background-color: #c1a033;
        }
        
        /* Chat modal specifics */
        .chat-list {
            list-style: none;
            border-bottom: 1px solid var(--light-gray);
            margin-bottom: 15px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .chat-user {
            padding: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid var(--light-gray);
            cursor: pointer;
        }
        
        .chat-user:hover {
            background-color: var(--light-gray);
        }
        
        .chat-user.active {
            background-color: #E8F5E9;
        }
        
        .chat-user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }
        
        .chat-user-info {
            flex-grow: 1;
        }
        
        .chat-user-name {
            font-weight: 500;
            margin-bottom: 3px;
        }
        
        .chat-user-last-msg {
            font-size: 12px;
            color: var(--dark-gray);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 200px;
        }
        
        .chat-user-time {
            font-size: 11px;
            color: var(--dark-gray);
        }
        
        .chat-container {
            height: 300px;
            overflow-y: auto;
            border: 1px solid var(--light-gray);
            border-radius: 5px;
            padding: 10px;
            margin-bottom: 10px;
            background-color: #f9f9f9;
            display: flex;
            flex-direction: column;
        }
        
        .chat-header {
            padding: 10px;
            border-bottom: 1px solid var(--light-gray);
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .chat-title {
            font-weight: 500;
        }
        
        .chat-message {
            margin-bottom: 10px;
            padding: 8px 12px;
            border-radius: 15px;
            max-width: 80%;
            position: relative;
        }
        
        .message-received {
            background-color: white;
            border: 1px solid var(--light-gray);
            align-self: flex-start;
        }
        
        .message-sent {
            background-color: #DCF8C6;
            align-self: flex-end;
            margin-left: auto;
        }
        
        .chat-input-container {
            display: flex;
            gap: 10px;
        }
        
        .chat-input {
            flex-grow: 1;
        }
        
        .send-btn {
            width: 50px;
            background-color: var(--accent-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Community modal specifics */
        .community-list {
            list-style: none;
        }
        
        .community-item {
            padding: 12px;
            border-bottom: 1px solid var(--light-gray);
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }
        
        .community-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }
        
        .community-info {
            flex-grow: 1;
        }
        
        .community-name {
            font-weight: 500;
            margin-bottom: 3px;
        }
        
        .community-description {
            font-size: 12px;
            color: var(--dark-gray);
        }
        
        .join-btn {
            background-color: var(--light-gray);
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            z-index: 100;
        }
        
        .joined {
            background-color: var(--accent-color);
            color: white;
        }
        
        .community-detail {
            display: none;
        }
        
        .community-header {
            text-align: center;
            padding: 20px 0;
            border-bottom: 1px solid var(--light-gray);
            margin-bottom: 15px;
        }
        
        .community-cover {
            height: 120px;
            background-size: cover;
            background-position: center;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        
        .community-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            margin: -40px auto 10px;
            border: 4px solid white;
            position: relative;
        }
        
        .community-title {
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 5px;
        }
        
        .community-members {
            font-size: 14px;
            color: var(--dark-gray);
            margin-bottom: 10px;
        }
        
        .community-action {
            display: inline-block;
            padding: 8px 20px;
            background-color: var(--accent-color);
            color: white;
            border-radius: 20px;
            font-weight: 500;
            margin-bottom: 10px;
            cursor: pointer;
        }
        
        .community-tabs {
            display: flex;
            border-bottom: 1px solid var(--light-gray);
            margin-bottom: 15px;
        }
        
        .community-tab {
            flex: 1;
            text-align: center;
            padding: 10px;
            cursor: pointer;
        }
        
        .community-tab.active {
            color: var(--accent-color);
            border-bottom: 2px solid var(--accent-color);
        }
        
        .community-posts {
            list-style: none;
        }
        
        .community-post {
            padding: 15px 0;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .post-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .post-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }
        
        .post-user {
            font-weight: 500;
        }
        
        .post-time {
            font-size: 12px;
            color: var(--dark-gray);
        }
        
        .post-content {
            margin-bottom: 10px;
        }
        
        .post-image {
            height: 200px;
            background-size: cover;
            background-position: center;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        
        .post-actions {
            display: flex;
            gap: 15px;
            color: var(--dark-gray);
            font-size: 14px;
        }
        
        .post-action {
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
        }
        
        .community-members-list {
            list-style: none;
            display: none;
        }
        
        .community-events-list {
            list-style: none;
            display: none;
        }
        
        .event-item {
            padding: 15px;
            border-bottom: 1px solid var(--light-gray);
            cursor: pointer;
        }
        
        .event-date {
            font-size: 12px;
            color: var(--accent-color);
            margin-bottom: 5px;
        }
        
        .event-title {
            font-weight: 500;
            margin-bottom: 5px;
        }
        
        .event-description {
            font-size: 12px;
            color: var(--dark-gray);
            margin-bottom: 10px;
        }
        
        .event-participants {
            font-size: 12px;
            color: var(--dark-gray);
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .member-item {
            padding: 10px 0;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .member-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }
        
        .member-name {
            font-weight: 500;
        }
        
        .member-role {
            font-size: 12px;
            color: var(--dark-gray);
        }
        
        /* Wallet modal specifics */
        .wallet-balance {
            text-align: center;
            padding: 20px 0;
            border-bottom: 1px solid var(--light-gray);
            margin-bottom: 15px;
        }
        
        .balance-label {
            font-size: 14px;
            color: var(--dark-gray);
            margin-bottom: 5px;
        }
        
        .balance-amount {
            font-size: 28px;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .wallet-actions {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
        }
        
        .wallet-action {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--primary-color);
            cursor: pointer;
        }
        
        .action-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            margin-bottom: 5px;
        }
        
        .action-label {
            font-size: 12px;
        }
        
        .wallet-tabs {
            display: flex;
            border-bottom: 1px solid var(--light-gray);
            margin-bottom: 15px;
        }
        
        .wallet-tab {
            flex: 1;
            text-align: center;
            padding: 10px;
            cursor: pointer;
        }
        
        .wallet-tab.active {
            color: var(--accent-color);
            border-bottom: 2px solid var(--accent-color);
        }
        
        .wallet-content {
            display: none;
        }
        
        .wallet-content.active {
            display: block;
        }
        
        .transactions-title {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 10px;
        }
        
        .transaction-list {
            list-style: none;
        }
        
        .transaction-item {
            padding: 10px 0;
            border-bottom: 1px solid var(--light-gray);
            display: flex;
            justify-content: space-between;
            cursor: pointer;
        }
        
        .transaction-info {
            flex-grow: 1;
        }
        
        .transaction-name {
            font-size: 14px;
            margin-bottom: 3px;
        }
        
        .transaction-date {
            font-size: 12px;
            color: var(--dark-gray);
        }
        
        .transaction-amount {
            font-weight: 500;
        }
        
        .positive {
            color: #43A047;
        }
        
        .negative {
            color: #E53935;
        }
        
        .investment-card {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 15px;
            cursor: pointer;
        }
        
        .investment-header {
            padding: 15px;
            border-bottom: 1px solid var(--light-gray);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .investment-title {
            font-weight: 500;
        }
        
        .investment-status {
            font-size: 12px;
            padding: 3px 8px;
            border-radius: 12px;
            background-color: #E8F5E9;
            color: #43A047;
        }
        
        .investment-body {
            padding: 15px;
        }
        
        .investment-details {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .investment-detail {
            text-align: center;
        }
        
        .detail-label {
            font-size: 12px;
            color: var(--dark-gray);
            margin-bottom: 5px;
        }
        
        .detail-value {
            font-weight: 500;
        }
        
        .investment-progress {
            height: 8px;
            background-color: var(--light-gray);
            border-radius: 4px;
            margin-bottom: 10px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background-color: var(--accent-color);
        }
        
        /* Profile modal specifics */
        .profile-header {
            text-align: center;
            padding: 20px 0;
            border-bottom: 1px solid var(--light-gray);
            margin-bottom: 15px;
        }
        
        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            margin: 0 auto 10px;
        }
        
        .profile-name {
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 5px;
        }
        
        .profile-email {
            font-size: 14px;
            color: var(--dark-gray);
        }
        
        .profile-stats {
            display: flex;
            justify-content: space-around;
            padding: 15px 0;
            border-bottom: 1px solid var(--light-gray);
            margin-bottom: 15px;
        }
        
        .stat-item {
            text-align: center;
            cursor: pointer;
        }
        
        .stat-value {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 12px;
            color: var(--dark-gray);
        }
        
        .profile-menu {
            list-style: none;
        }
        
        .menu-item-profile {
            padding: 15px 0;
            border-bottom: 1px solid var(--light-gray);
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }
        
        .menu-icon {
            width: 20px;
            text-align: center;
            color: var(--dark-gray);
        }
        
        /* Profile sections */
        .profile-section {
            display: none;
        }
        
        .profile-section.active {
            display: block;
        }
        
        .profile-section-header {
            display: flex;
            align-items: center;
            gap: 10px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--light-gray);
            margin-bottom: 15px;
        }
        
        .back-to-profile {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
        }
        
        .profile-section-title {
            font-size: 18px;
            font-weight: 500;
        }
        
        /* Search modal specifics */
        .search-container {
            margin-bottom: 15px;
            position: relative;
        }
        
        .search-input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--medium-gray);
            border-radius: 25px;
            font-size: 14px;
            padding-left: 40px;
            padding-right: 40px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="%23666" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>');
            background-repeat: no-repeat;
            background-position: 15px center;
        }
        
        .clear-search {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 16px;
            color: var(--dark-gray);
            background: none;
            border: none;
            cursor: pointer;
        }
        
        .filter-pills {
            display: flex;
            overflow-x: auto;
            gap: 10px;
            margin-bottom: 15px;
            padding: 5px 0;
        }
        
        .filter-pill {
            white-space: nowrap;
            padding: 5px 12px;
            border-radius: 15px;
            background-color: var(--light-gray);
            font-size: 12px;
            cursor: pointer;
        }
        
        .filter-pill.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        .recent-searches {
            margin-bottom: 15px;
        }
        
        .section-title {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 10px;
            color: var(--dark-gray);
        }
        
        .search-history {
            list-style: none;
        }
        
        .search-item {
            padding: 10px 0;
            border-bottom: 1px solid var(--light-gray);
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }
        
        .search-icon {
            color: var(--dark-gray);
        }
        
        .search-text {
            flex-grow: 1;
            font-size: 14px;
        }
        
        .remove-search {
            color: var(--dark-gray);
            background: none;
            border: none;
            cursor: pointer;
        }
        
        #search-results {
            margin-top: 20px;
        }
        
        .search-result-item {
            padding: 15px;
            background-color: white;
            border-radius: 8px;
            margin-bottom: 10px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            display: flex;
            cursor: pointer;
        }
        
        .result-image {
            width: 80px;
            height: 80px;
            border-radius: 5px;
            background-size: cover;
            background-position: center;
            margin-right: 15px;
        }
        
        .result-info {
            flex-grow: 1;
        }
        
        .result-category {
            font-size: 12px;
            color: var(--accent-color);
            margin-bottom: 5px;
        }
        
        .result-title {
            font-weight: 500;
            margin-bottom: 5px;
        }
        
        .result-snippet {
            font-size: 12px;
            color: var(--dark-gray);
            margin-bottom: 5px;
        }
        
        .result-meta {
            font-size: 11px;
            color: var(--dark-gray);
            display: flex;
            justify-content: space-between;
        }
        
        /* Notifications modal specifics */
        .notification-list {
            list-style: none;
        }
        
        .notification-item {
            padding: 15px 0;
            border-bottom: 1px solid var(--light-gray);
            display: flex;
            gap: 15px;
            cursor: pointer;
        }
        
        .notification-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }
        
        .notification-content {
            flex-grow: 1;
        }
        
        .notification-text {
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .notification-time {
            font-size: 12px;
            color: var(--dark-gray);
        }
        
        .unread {
            background-color: #F5F5F5;
        }
        
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #E53935;
            color: white;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Favorites modal specifics */
        .favorites-empty {
            text-align: center;
            padding: 30px 0;
            color: var(--dark-gray);
        }
        
        .empty-icon {
            font-size: 50px;
            margin-bottom: 15px;
            color: var(--medium-gray);
        }
        
        .empty-text {
            font-size: 16px;
            margin-bottom: 20px;
        }
        
        .browse-btn {
            display: inline-block;
            background-color: var(--accent-color);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: 500;
            cursor: pointer;
        }
        
        /* Add Opportunity modal specifics */
        .photo-upload {
            border: 2px dashed var(--medium-gray);
            border-radius: 5px;
            padding: 20px;
            text-align: center;
            margin-bottom: 15px;
            cursor: pointer;
            position: relative;
        }
        
        .upload-icon {
            font-size: 30px;
            color: var(--dark-gray);
            margin-bottom: 10px;
        }
        
        .upload-text {
            font-size: 14px;
            color: var(--dark-gray);
        }
        
        .upload-preview {
            width: 100%;
            height: 180px;
            background-size: cover;
            background-position: center;
            border-radius: 5px;
            margin-top: 15px;
            display: none;
        }
        
        .photo-upload input[type="file"] {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }

        /* Product Detail Modal */
        .product-detail-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: white;
            z-index: 3000;
            overflow-y: auto;
        }
        
        .product-detail-header {
            position: relative;
            height: 250px;
            background-size: cover;
            background-position: center;
        }
        
        .back-btn {
            position: absolute;
            top: 15px;
            left: 15px;
            background-color: rgba(255, 255, 255, 0.8);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            font-size: 18px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            cursor: pointer;
            z-index: 100;
        }
        
        .detail-favorite-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: rgba(255, 255, 255, 0.8);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            font-size: 18px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            cursor: pointer;
            z-index: 100;
        }
        
        .product-detail-content {
            padding: 20px;
            position: relative;
            margin-top: -40px;
            border-radius: 20px 20px 0 0;
            background-color: white;
        }
        
        .product-detail-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .product-detail-category {
            display: inline-block;
            font-size: 12px;
            background-color: var(--light-gray);
            padding: 4px 8px;
            border-radius: 4px;
            margin-bottom: 15px;
        }
        
        .time-remaining {
            display: inline-block;
            font-size: 12px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            margin-left: 10px;
        }
        
        .product-detail-dealer {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .dealer-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }
        
        .dealer-info {
            flex-grow: 1;
        }
        
        .dealer-name {
            font-weight: 500;
            margin-bottom: 3px;
        }
        
        .dealer-rating {
            display: flex;
            align-items: center;
            gap: 5px;
            color: #FFC107;
            font-size: 14px;
        }
        
        .view-dealer {
            color: var(--accent-color);
            font-weight: 500;
            font-size: 14px;
            cursor: pointer;
        }
        
        .product-detail-section {
            margin-bottom: 20px;
        }
        
        .section-title {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 10px;
        }
        
        .product-description {
            font-size: 14px;
            line-height: 1.5;
            color: var(--dark-gray);
            margin-bottom: 15px;
        }
        
        .detail-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .detail-item {
            background-color: var(--light-gray);
            padding: 10px;
            border-radius: 8px;
        }
        
        .detail-label {
            font-size: 12px;
            color: var(--dark-gray);
            margin-bottom: 5px;
        }
        
        .detail-value {
            font-weight: 500;
            font-size: 14px;
        }
        
        .progress-container {
            margin-bottom: 15px;
        }
        
        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        .progress-label {
            font-size: 14px;
        }
        
        .progress-percentage {
            font-weight: 500;
            font-size: 14px;
        }
        
        .progress-bar-container {
            height: 8px;
            background-color: var(--light-gray);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-bar-fill {
            height: 100%;
            background-color: var(--accent-color);
        }
        
        .investment-form {
            background-color: var(--light-gray);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .investment-input-container {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .currency-symbol {
            font-size: 16px;
            margin-right: 10px;
            font-weight: 500;
        }
        
        .investment-input {
            flex-grow: 1;
            padding: 10px;
            border: 1px solid var(--medium-gray);
            border-radius: 5px;
            font-size: 16px;
            font-weight: 500;
        }
        
        .investment-slider {
            width: 100%;
            margin-bottom: 10px;
        }
        
        .slider-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: var(--dark-gray);
        }
        
        .investment-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn-secondary {
            background-color: var(--medium-gray);
            color: var(--primary-color);
        }
        
        .investment-info {
            font-size: 12px;
            color: var(--dark-gray);
            margin-top: 10px;
        }
        
        .product-detail-tabs {
            display: flex;
            border-bottom: 1px solid var(--light-gray);
            margin-bottom: 15px;
        }
        
        .product-detail-tab {
            flex: 1;
            text-align: center;
            padding: 10px;
            cursor: pointer;
        }
        
        .product-detail-tab.active {
            color: var(--accent-color);
            border-bottom: 2px solid var(--accent-color);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .statistics-list {
            list-style: none;
        }
        
        .statistic-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .statistic-label {
            color: var(--dark-gray);
        }
        
        .statistic-value {
            font-weight: 500;
        }
        
        .comments-list {
            list-style: none;
        }
        
        .comment-item {
            padding: 15px 0;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .comment-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .comment-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }
        
        .comment-user {
            font-weight: 500;
        }
        
        .comment-time {
            font-size: 12px;
            color: var(--dark-gray);
        }
        
        .comment-text {
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .comment-actions {
            display: flex;
            gap: 15px;
            color: var(--dark-gray);
            font-size: 14px;
        }
        
        .comment-action {
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
        }
        
        .comment-form {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            margin-bottom: 10px;
        }
        
        .comment-input {
            flex-grow: 1;
            padding: 8px 12px;
            border: 1px solid var(--medium-gray);
            border-radius: 20px;
            font-size: 14px;
        }
        
        .comment-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 20px;
            padding: 0 15px;
            font-weight: 500;
            cursor: pointer;
        }
        
        .comment-replies {
            margin-left: 50px;
            border-left: 2px solid var(--light-gray);
            padding-left: 15px;
            margin-top: 10px;
        }
        
        .comment-reply {
            margin-bottom: 10px;
        }
        
        .related-opportunities {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }
        
        .related-card {
            background-color: var(--light-gray);
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
        }
        
        .related-image {
            height: 100px;
            background-size: cover;
            background-position: center;
        }
        
        .related-info {
            padding: 10px;
        }
        
        .related-name {
            font-size: 12px;
            font-weight: 500;
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .related-price {
            font-size: 12px;
            color: var(--dark-gray);
        }
        
        /* Category Detail Styles */
        .category-page {
            display: none;
        }
        
        .category-header {
            height: 150px;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            position: relative;
        }
        
        .category-back {
            position: absolute;
            top: 15px;
            left: 15px;
            background-color: rgba(255, 255, 255, 0.8);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            font-size: 18px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            cursor: pointer;
        }
        
        .category-filters {
            padding: 15px;
            border-bottom: 1px solid var(--light-gray);
            display: flex;
            justify-content: space-between;
            background-color: white;
        }
        
        .filter-btn {
            display: flex;
            align-items: center;
            gap: 5px;
            background: none;
            border: none;
            font-size: 14px;
            cursor: pointer;
        }
        
        .category-grid {
            padding: 15px;
        }
        
        /* Best Dealers Page */
        .dealers-page {
            display: none;
            padding: 15px;
        }
        
        .dealer-card {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 15px;
            display: flex;
            cursor: pointer;
        }
        
        .dealer-rank {
            width: 40px;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .dealer-content {
            padding: 12px;
            flex-grow: 1;
        }
        
        .dealer-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .dealer-image {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-size: cover;
            background-position: center;
        }
        
        .dealer-details {
            flex-grow: 1;
        }
        
        .dealer-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .dealer-company {
            font-size: 12px;
            color: var(--dark-gray);
        }
        
        .dealer-stars {
            color: #FFC107;
            font-size: 14px;
        }
        
        .dealer-stats {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
        }
        
        .dealer-stat {
            text-align: center;
        }
        
        .stat-number {
            font-weight: bold;
            margin-bottom: 3px;
        }
        
        .stat-text {
            color: var(--dark-gray);
        }
        
        /* Best Opportunities Page */
        .opportunities-page {
            display: none;
            padding: 15px;
        }
        
        .opportunity-card {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 15px;
            cursor: pointer;
        }
        
        .opportunity-image {
            height: 150px;
            background-size: cover;
            background-position: center;
            position: relative;
        }
        
        .opportunity-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--accent-color);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .opportunity-content {
            padding: 15px;
        }
        
        .opportunity-name {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .opportunity-dealer {
            font-size: 12px;
            color: var(--dark-gray);
            margin-bottom: 10px;
        }
        
        .opportunity-stats {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            margin-bottom: 10px;
        }
        
        .opportunity-stat {
            text-align: center;
        }
        
        .opp-stat-value {
            font-weight: bold;
            margin-bottom: 3px;
        }
        
        .opp-stat-label {
            color: var(--dark-gray);
        }

/* News Page */
        .news-page {
            display: none;
            padding: 15px;
        }
        
        .news-card {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 15px;
            cursor: pointer;
        }
        
        .news-image {
            height: 180px;
            background-size: cover;
            background-position: center;
        }
        
        .news-content {
            padding: 15px;
        }
        
        .news-category {
            font-size: 12px;
            color: var(--accent-color);
            margin-bottom: 5px;
        }
        
        .news-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .news-excerpt {
            font-size: 14px;
            color: var(--dark-gray);
            margin-bottom: 10px;
        }
        
        .news-meta {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: var(--dark-gray);
        }
        
        .news-author {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .author-image {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: var(--light-gray);
        }
        
        /* Marketplace Page */
        .marketplace-page {
            display: none;
            padding: 15px;
        }
        
        .marketplace-filters {
            display: flex;
            overflow-x: auto;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .marketplace-filter {
            white-space: nowrap;
            padding: 8px 15px;
            border-radius: 20px;
            background-color: var(--light-gray);
            font-size: 14px;
            cursor: pointer;
        }
        
        .marketplace-filter.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        .marketplace-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .marketplace-card {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            cursor: pointer;
        }
        
        .marketplace-image {
            height: 150px;
            background-size: cover;
            background-position: center;
            position: relative;
        }
        
        .marketplace-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: var(--primary-color);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 500;
        }
        
        .marketplace-info {
            padding: 12px;
        }
        
        .marketplace-name {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .marketplace-price {
            font-size: 16px;
            font-weight: 500;
            color: var(--accent-color);
            margin-bottom: 5px;
        }
        
        .marketplace-details {
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            color: var(--dark-gray);
        }
        
        /* Investment Success Modal */
        .success-modal {
            text-align: center;
            padding: 20px;
        }
        
        .success-icon {
            font-size: 50px;
            color: #43A047;
            margin-bottom: 20px;
        }
        
        .success-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .success-message {
            font-size: 14px;
            color: var(--dark-gray);
            margin-bottom: 20px;
        }
        
        .success-details {
            background-color: var(--light-gray);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: left;
        }
        
        .success-detail {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .detail-name {
            color: var(--dark-gray);
        }
        
        .detail-info {
            font-weight: 500;
        }
        
        .success-actions {
            display: flex;
            gap: 10px;
        }
        
        .action-btn {
            flex: 1;
            padding: 12px;
            border-radius: 5px;
            font-weight: 500;
            text-align: center;
            cursor: pointer;
        }
        
        .btn-dark {
            background-color: var(--primary-color);
            color: white;
        }
        
        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
        }
        
        /* Page Transitions */
        .page-transition {
            transition: all 0.3s ease;
        }
        
        .slide-in {
            transform: translateX(0);
        }
        
        .slide-out {
            transform: translateX(100%);
        }
        
        .hidden {
            display: none;
        }
        
        /* Error states */
        .error {
            border-color: #E53935 !important;
        }
        
        .error-message {
            color: #E53935;
            font-size: 12px;
            margin-top: 5px;
        }
        
        /* Dealer Profile Styles */
        .dealer-tabs {
            display: flex;
            border-bottom: 1px solid var(--light-gray);
            margin-bottom: 15px;
        }
        
        .dealer-content {
            display: none;
        }
        
        .dealer-content.active {
            display: block;
        }
        
        .dealer-description {
            font-size: 14px;
            line-height: 1.5;
            color: var(--dark-gray);
            margin-bottom: 15px;
        }
        
        .dealer-info-section {
            margin-bottom: 20px;
        }
        
        .dealer-contacts {
            margin-top: 10px;
        }
        
        .dealer-contact {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            font-size: 14px;
        }
        
        /* Transaction Detail Styles */
        .transaction-detail {
            padding: 15px 0;
        }
        
        .transaction-detail-header {
            display: flex;
            align-items: center;
            gap: 15px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--light-gray);
            margin-bottom: 20px;
        }
        
        .transaction-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        
        .transaction-detail-title {
            font-size: 18px;
            font-weight: 500;
            flex-grow: 1;
        }
        
        .transaction-detail-amount {
            font-size: 20px;
            font-weight: bold;
        }
        
        .transaction-detail-info {
            margin-bottom: 20px;
        }
        
        .transaction-detail-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .transaction-detail-description {
            margin-bottom: 20px;
        }
        
        .transaction-detail-actions {
            text-align: center;
        }
        
        /* Marketplace Item Detail Styles */
        .marketplace-item-detail {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .marketplace-item-images {
            margin-bottom: 15px;
        }
        
        .marketplace-main-image {
            height: 300px;
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat;
            margin-bottom: 10px;
        }
        
        .marketplace-thumbnails {
            display: flex;
            gap: 10px;
            overflow-x: auto;
        }
        
        .marketplace-thumbnail {
            width: 60px;
            height: 60px;
            background-size: cover;
            background-position: center;
            border-radius: 5px;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .marketplace-thumbnail.active {
            border-color: var(--accent-color);
        }
        
        .marketplace-item-category {
            font-size: 12px;
            color: var(--dark-gray);
            margin-bottom: 5px;
        }
        
        .marketplace-item-name {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .marketplace-item-price {
            font-size: 24px;
            font-weight: 500;
            color: var(--accent-color);
            margin-bottom: 15px;
        }
        
        .marketplace-item-seller {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px 0;
            border-top: 1px solid var(--light-gray);
            border-bottom: 1px solid var(--light-gray);
            margin-bottom: 15px;
        }
        
        .seller-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }
        
        .seller-info {
            flex-grow: 1;
        }
        
        .seller-name {
            font-weight: 500;
            margin-bottom: 3px;
        }
        
        .seller-rating {
            font-size: 14px;
            color: #FFC107;
        }
        
        .marketplace-item-description {
            margin-bottom: 15px;
        }
        
        .marketplace-item-details {
            margin-bottom: 20px;
        }
        
        .marketplace-item-actions {
            display: flex;
            gap: 10px;
        }
        
        .marketplace-item-actions .btn {
            flex: 1;
        }
        
        /* Deposit/Withdraw Modal */
        .wallet-action-modal {
            display: none;
        }
        
        .wallet-action-modal.active {
            display: block;
        }
        
        .wallet-action-header {
            margin-bottom: 15px;
            text-align: center;
            font-weight: 500;
            font-size: 18px;
        }
        
        .wallet-action-form {
            margin-bottom: 20px;
        }
        
        .wallet-method-selector {
            display: flex;
            margin-bottom: 15px;
            background-color: var(--light-gray);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .wallet-method {
            flex: 1;
            text-align: center;
            padding: 10px;
            cursor: pointer;
            font-weight: 500;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        .wallet-method.active {
            background-color: var(--accent-color);
            color: white;
        }

        /* ROI and PT range inputs */
        .range-inputs {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .range-input {
            flex: 1;
        }
        
        /* Filter styles */
        .filter-group {
            margin-bottom: 15px;
        }
        
        .filter-header {
            font-weight: 500;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .filter-toggle {
            font-size: 12px;
            color: var(--accent-color);
            cursor: pointer;
        }
        
        .filter-options {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .filter-option {
            padding: 4px 10px;
            border-radius: 15px;
            background-color: var(--light-gray);
            font-size: 12px;
            cursor: pointer;
        }
        
        .filter-option.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        /* Reply input styles */
        .reply-form {
            display: none;
            margin-top: 10px;
            margin-bottom: 10px;
        }
        
        .reply-form.active {
            display: flex;
        }
        
        .reply-input {
            flex-grow: 1;
            padding: 6px 10px;
            border: 1px solid var(--medium-gray);
            border-radius: 15px;
            font-size: 12px;
        }
        
        .reply-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 15px;
            padding: 0 12px;
            font-size: 12px;
            font-weight: 500;
            margin-left: 8px;
            cursor: pointer;
        }
        
        /* Dealer filter styles */
        .dealer-filter-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: white;
            padding: 20px;
            border-radius: 20px 20px 0 0;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            z-index: 2000;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }
        
        .dealer-filter-panel.active {
            transform: translateY(0);
        }
        
        .dealer-filter-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .dealer-filter-title {
            font-weight: 500;
            font-size: 16px;
        }
        
        .dealer-filter-close {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
        }
        
        .dealer-filter-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .filter-clear {
            flex: 1;
            padding: 10px;
            background-color: var(--light-gray);
            border: none;
            border-radius: 5px;
            font-weight: 500;
            cursor: pointer;
        }
        
        .filter-apply {
            flex: 2;
            padding: 10px;
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 5px;
            font-weight: 500;
            cursor: pointer;
        }
    </style>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <button class="header-icon" onclick="openModal('profile-modal')">
                <i class="fas fa-user-circle"></i>
            </button>
            <div class="logo" onclick="goToHome()">Society</div>
            <div class="header-icons">
                <button class="header-icon" onclick="openModal('search-modal')"><i class="fas fa-search"></i></button>
                <button class="header-icon" onclick="openModal('notifications-modal')">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge">3</span>
                </button>
                <button class="header-icon" onclick="openModal('favorites-modal')">
                    <i class="far fa-heart"></i>
                </button>
            </div>
        </header>
        
        <div class="main-content" id="home-page">
            <div class="categories-menu">
                <div class="menu-item active" onclick="showPage('news-page')">NEWS</div>
                <div class="menu-item" onclick="showPage('categories-page')">CATEGORIES</div>
                <div class="menu-item" onclick="showPage('dealers-page')">BEST DEALERS</div>
                <div class="menu-item" onclick="showPage('opportunities-page')">BEST OPP</div>
                <div class="menu-item" onclick="showPage('marketplace-page')">MARKETPLACE</div>
            </div>
            
            <div class="products-grid" id="home-products">
                <div class="product-card" onclick="openProductDetail('omega-speedmaster')">
                    <div class="product-image" style="background-image: url('/api/placeholder/300/300')">
                        <button class="favorite-btn" onclick="toggleFavorite(this, event, 'omega-speedmaster')">
                            <i class="far fa-heart"></i>
                        </button>
                        <div class="countdown-badge">
                            <i class="far fa-clock"></i>
                            <span>5 giorni</span>
                        </div>
                    </div>
                    <div class="product-info">
                        <div class="product-category">OROLOGI</div>
                        <div class="product-name">OMEGA SPEEDMASTER MOONWATCH 3861 SAPPHIRE SANDWICH</div>
                        <div class="product-dealer">DEALER: PREMIUM RESELLER</div>
                        <div class="product-price">
                            <div>
                                <div class="price-label">QUOTA RICHIESTA</div>
                                <div class="price-value">8.000€</div>
                            </div>
                            <div>
                                <div class="price-label">QUOTA MINIMA</div>
                                <div class="price-value">50€</div>
                            </div>
                        </div>
                        <div class="product-status">
                            <div class="status-collected">STATO RACCOLTA: 4700/8000€</div>
                            <div class="status-time">
                                <i class="far fa-clock"></i>
                                <span>PT: 7-10 GIORNI</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="product-card" onclick="openProductDetail('rolex-daytona')">
                    <div class="product-image" style="background-image: url('/api/placeholder/300/300')">
                        <button class="favorite-btn" onclick="toggleFavorite(this, event, 'rolex-daytona')">
                            <i class="far fa-heart"></i>
                        </button>
                        <div class="countdown-badge">
                            <i class="far fa-clock"></i>
                            <span>3 giorni</span>
                        </div>
                    </div>
                    <div class="product-info">
                        <div class="product-category">OROLOGI</div>
                        <div class="product-name">ROLEX DAYTONA REF.116528 C</div>
                        <div class="product-dealer dealer-luxury">DEALER: LUXURY BRAND</div>
                        <div class="product-price">
                            <div>
                                <div class="price-label">QUOTA RICHIESTA</div>
                                <div class="price-value">10.000€</div>
                            </div>
                            <div>
                                <div class="price-label">QUOTA MINIMA</div>
                                <div class="price-value">100€</div>
                            </div>
                        </div>
                        <div class="product-status">
                            <div class="status-collected">STATO RACCOLTA: 8500/10000€</div>
                            <div class="status-time">
                                <i class="far fa-clock"></i>
                                <span>PT: 3-5 GIORNI</span>
                            </div>
                        </div>
                    </div>
                </div>
<div class="product-card" onclick="openProductDetail('hermes-kelly')">
                    <div class="product-image" style="background-image: url('/api/placeholder/300/300')">
                        <button class="favorite-btn" onclick="toggleFavorite(this, event, 'hermes-kelly')">
                            <i class="far fa-heart"></i>
                        </button>
                        <div class="countdown-badge">
                            <i class="far fa-clock"></i>
                            <span>20 giorni</span>
                        </div>
                    </div>
                    <div class="product-info">
                        <div class="product-category">BORSE</div>
                        <div class="product-name">BORSA KELLY 25 IN PELLE TOGO HERMÈS COLORE BORDEAUX</div>
                        <div class="product-dealer dealer-premium">DEALER: FASHION BAGS RESELLER</div>
                        <div class="product-price">
                            <div>
                                <div class="price-label">QUOTA RICHIESTA</div>
                                <div class="price-value">6.000€</div>
                            </div>
                            <div>
                                <div class="price-label">QUOTA MINIMA</div>
                                <div class="price-value">100€</div>
                            </div>
                        </div>
                        <div class="product-status">
                            <div class="status-collected">STATO RACCOLTA: 4750/6000€</div>
                            <div class="status-time">
                                <i class="far fa-clock"></i>
                                <span>PT: 20-25 GIORNI</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="product-card" onclick="openProductDetail('chanel-bag')">
                    <div class="product-image" style="background-image: url('/api/placeholder/300/300')">
                        <button class="favorite-btn" onclick="toggleFavorite(this, event, 'chanel-bag')">
                            <i class="far fa-heart"></i>
                        </button>
                        <div class="countdown-badge">
                            <i class="far fa-clock"></i>
                            <span>25 giorni</span>
                        </div>
                    </div>
                    <div class="product-info">
                        <div class="product-category">BORSE</div>
                        <div class="product-name">BORSA CHANEL IN PELLE NERA A TRACOLLA TIMELESS</div>
                        <div class="product-dealer dealer-luxury">DEALER: LUXURY BRAND</div>
                        <div class="product-price">
                            <div>
                                <div class="price-label">QUOTA RICHIESTA</div>
                                <div class="price-value">3.500€</div>
                            </div>
                            <div>
                                <div class="price-label">QUOTA MINIMA</div>
                                <div class="price-value">50€</div>
                            </div>
                        </div>
                        <div class="product-status">
                            <div class="status-collected">STATO RACCOLTA: 3000/3500€</div>
                            <div class="status-time">
                                <i class="far fa-clock"></i>
                                <span>PT: 25-30 GIORNI</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- News Page -->
        <div class="main-content news-page" id="news-page">
            <div class="submenu">
                <div class="submenu-item active">ULTIME NEWS</div>
                <div class="submenu-item">TOP STORIES</div>
                <div class="submenu-item">OROLOGI</div>
                <div class="submenu-item">BORSE</div>
                <div class="submenu-item">ARTE</div>
                <div class="submenu-item">MERCATO</div>
            </div>
            
            <div class="news-card">
                <div class="news-image" style="background-image: url('/api/placeholder/600/400')"></div>
                <div class="news-content">
                    <div class="news-category">MERCATO | OROLOGI</div>
                    <div class="news-title">Il mercato degli orologi di lusso continua a crescere: +12% nel primo trimestre 2025</div>
                    <div class="news-excerpt">Gli analisti prevedono un'ulteriore crescita nei prossimi mesi, con particolare interesse per marchi come Rolex, Patek Philippe e Audemars Piguet.</div>
                    <div class="news-meta">
                        <div class="news-author">
                            <div class="author-image"></div>
                            <span>Marco Bianchi</span>
                        </div>
                        <div class="news-date">2 giorni fa</div>
                    </div>
                </div>
            </div>
            
            <div class="news-card">
                <div class="news-image" style="background-image: url('/api/placeholder/600/400')"></div>
                <div class="news-content">
                    <div class="news-category">INVESTIMENTI | BORSE</div>
                    <div class="news-title">Le borse Hermès confermano il loro valore: rendimenti medi del 20% annuo</div>
                    <div class="news-excerpt">Modelli come Birkin e Kelly continuano a rappresentare un ottimo investimento alternativo con rendimenti che superano molti asset tradizionali.</div>
                    <div class="news-meta">
                        <div class="news-author">
                            <div class="author-image"></div>
                            <span>Laura Verdi</span>
                        </div>
                        <div class="news-date">5 giorni fa</div>
                    </div>
                </div>
            </div>
            
            <div class="news-card">
                <div class="news-image" style="background-image: url('/api/placeholder/600/400')"></div>
                <div class="news-content">
                    <div class="news-category">OPPORTUNITÀ | VINI</div>
                    <div class="news-title">I vini d'investimento italiani battono i francesi nel primo semestre 2025</div>
                    <div class="news-excerpt">Barolo, Brunello e Super Tuscan hanno registrato performance superiori rispetto ai tradizionali Bordeaux e Borgogna.</div>
                    <div class="news-meta">
                        <div class="news-author">
                            <div class="author-image"></div>
                            <span>Paolo Rossi</span>
                        </div>
                        <div class="news-date">1 settimana fa</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Categories Page -->
        <div class="main-content" id="categories-page" style="display: none;">
            <div class="submenu">
                <div class="submenu-item active">TUTTE</div>
                <div class="submenu-item">POPOLARI</div>
                <div class="submenu-item">RECENTI</div>
                <div class="submenu-item">TRENDING</div>
            </div>
            
            <div class="products-grid">
                <div class="product-card" onclick="showCategoryDetail('orologi')">
                    <div class="product-image" style="background-image: url('/api/placeholder/300/300')"></div>
                    <div class="product-info">
                        <div class="product-name">OROLOGI</div>
                    </div>
                </div>
                <div class="product-card" onclick="showCategoryDetail('arte')">
                    <div class="product-image" style="background-image: url('/api/placeholder/300/300')"></div>
                    <div class="product-info">
                        <div class="product-name">ARTE</div>
                    </div>
                </div>
                <div class="product-card" onclick="showCategoryDetail('borse')">
                    <div class="product-image" style="background-image: url('/api/placeholder/300/300')"></div>
                    <div class="product-info">
                        <div class="product-name">BORSE</div>
                    </div>
                </div>
                <div class="product-card" onclick="showCategoryDetail('gioielli')">
                    <div class="product-image" style="background-image: url('/api/placeholder/300/300')"></div>
                    <div class="product-info">
                        <div class="product-name">GIOIELLI</div>
                    </div>
                </div>
                <div class="product-card" onclick="showCategoryDetail('vino')">
                    <div class="product-image" style="background-image: url('/api/placeholder/300/300')"></div>
                    <div class="product-info">
                        <div class="product-name">VINO</div>
                    </div>
                </div>
                <div class="product-card" onclick="showCategoryDetail('whiskey')">
                    <div class="product-image" style="background-image: url('/api/placeholder/300/300')"></div>
                    <div class="product-info">
                        <div class="product-name">WHISKEY</div>
                    </div>
                </div>
                <div class="product-card" onclick="showCategoryDetail('automobili')">
                    <div class="product-image" style="background-image: url('/api/placeholder/300/300')"></div>
                    <div class="product-info">
                        <div class="product-name">AUTOMOBILI</div>
                    </div>
                </div>
                <div class="product-card" onclick="showCategoryDetail('realestate')">
                    <div class="product-image" style="background-image: url('/api/placeholder/300/300')"></div>
                    <div class="product-info">
                        <div class="product-name">REAL ESTATE</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Category Detail Page -->
        <div class="category-page" id="category-orologi">
            <div class="category-header" style="background-image: url('/api/placeholder/600/400')">
                <button class="category-back" onclick="goBackToCategories()"><i class="fas fa-arrow-left"></i></button>
                <h1>OROLOGI</h1>
            </div>
            <div class="submenu">
                <div class="submenu-item active">TUTTI</div>
                <div class="submenu-item">ROLEX</div>
                <div class="submenu-item">OMEGA</div>
                <div class="submenu-item">PATEK PHILIPPE</div>
                <div class="submenu-item">AUDEMARS PIGUET</div>
            </div>
            <div class="category-filters">
                <button class="filter-btn" onclick="showCategoryFilters()">
                    <i class="fas fa-filter"></i>
                    <span>Filtri</span>
                </button>
                <button class="filter-btn" onclick="showCategorySorting()">
                    <i class="fas fa-sort"></i>
                    <span>Ordinamento</span>
                </button>
            </div>
            <div class="category-grid">
                <div class="products-grid">
                    <div class="product-card" onclick="openProductDetail('patek-philippe')">
                        <div class="product-image" style="background-image: url('/api/placeholder/300/300')">
                            <button class="favorite-btn" onclick="toggleFavorite(this, event, 'patek-philippe')">
                                <i class="far fa-heart"></i>
                            </button>
                            <div class="countdown-badge">
                                <i class="far fa-clock"></i>
                                <span>15 giorni</span>
                            </div>
                        </div>
                        <div class="product-info">
                            <div class="product-category">PATEK PHILIPPE</div>
                            <div class="product-name">PATEK PHILIPPE NAUTILUS 5711/1A</div>
                            <div class="product-dealer dealer-luxury">DEALER: ELON MUSK | TESLA WATCHES</div>
                            <div class="product-price">
                                <div>
                                    <div class="price-label">QUOTA RICHIESTA</div>
                                    <div class="price-value">15.000€</div>
                                </div>
                                <div>
                                    <div class="price-label">QUOTA MINIMA</div>
                                    <div class="price-value">100€</div>
                                </div>
                            </div>
                            <div class="product-status">
                                <div class="status-collected">ROI: 21%</div>
                                <div class="status-time">
                                    <i class="far fa-clock"></i>
                                    <span>PT: 64 DYS</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="product-card" onclick="openProductDetail('audemars-piguet')">
                        <div class="product-image" style="background-image: url('/api/placeholder/300/300')">
                            <button class="favorite-btn" onclick="toggleFavorite(this, event, 'audemars-piguet')">
                                <i class="far fa-heart"></i>
                            </button>
                            <div class="countdown-badge">
                                <i class="far fa-clock"></i>
                                <span>12 giorni</span>
                            </div>
                        </div>
                        <div class="product-info">
                            <div class="product-category">AUDEMARS PIGUET</div>
                            <div class="product-name">AUDEMARS PIGUET ROYAL OAK 15500ST</div>
                            <div class="product-dealer dealer-premium">DEALER: JEFF BEZOS | AMAZON CLOCK</div>
                            <div class="product-price">
                                <div>
                                    <div class="price-label">QUOTA RICHIESTA</div>
                                    <div class="price-value">12.000€</div>
                                </div>
                                <div>
                                    <div class="price-label">QUOTA MINIMA</div>
                                    <div class="price-value">100€</div>
                                </div>
                            </div>
                            <div class="product-status">
                                <div class="status-collected">ROI: 19%</div>
                                <div class="status-time">
                                    <i class="far fa-clock"></i>
                                    <span>PT: 84 DYS</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Best Dealers Page -->
        <div class="main-content dealers-page" id="dealers-page">
            <div class="submenu">
                <div class="submenu-item active" onclick="filterDealers('all')">ALL</div>
                <div class="submenu-item" onclick="filterDealers('roi')">ROI AVERAGE</div>
                <div class="submenu-item" onclick="filterDealers('pt')">PT AVERAGE</div>
                <div class="submenu-item" onclick="filterDealers('deal')">DEAL NUMBER</div>
            </div>
            
            <div id="dealers-container">
                <div class="dealer-card" onclick="openDealerProfile('elon-musk')">
                    <div class="dealer-rank">1</div>
                    <div class="dealer-content">
                        <div class="dealer-header">
                            <div class="dealer-image" style="background-image: url('/api/placeholder/100/100')"></div>
                            <div class="dealer-details">
                                <div class="dealer-title">ELON MUSK | TESLA WATCHES</div>
                                <div class="dealer-company">Premium Dealer</div>
                                <div class="dealer-stars">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <span>(230+)</span>
                                </div>
                            </div>
                        </div>
                        <div class="dealer-stats">
                            <div class="dealer-stat">
                                <div class="stat-number">21%</div>
                                <div class="stat-text">ROI AVERAGE</div>
                            </div>
                            <div class="dealer-stat">
                                <div class="stat-number">64 DYS</div>
                                <div class="stat-text">PT AVERAGE</div>
                            </div>
                            <div class="dealer-stat">
                                <div class="stat-number">134</div>
                                <div class="stat-text">DEAL NUMBER</div>
                            </div>
                            <div class="dealer-stat">
                                <div class="stat-number">2.32</div>
                                <div class="stat-text">FREQUENCY</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="dealer-card" onclick="openDealerProfile('jeff-bezos')">
                    <div class="dealer-rank">2</div>
                    <div class="dealer-content">
                        <div class="dealer-header">
                            <div class="dealer-image" style="background-image: url('/api/placeholder/100/100')"></div>
                            <div class="dealer-details">
                                <div class="dealer-title">JEFF BEZOS | AMAZON CLOCK</div>
                                <div class="dealer-company">Luxury Dealer</div>
                                <div class="dealer-stars">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star-half-alt"></i>
                                    <span>(199)</span>
                                </div>
                            </div>
                        </div>
                        <div class="dealer-stats">
                            <div class="dealer-stat">
                                <div class="stat-number">19%</div>
                                <div class="stat-text">ROI AVERAGE</div>
                            </div>
                            <div class="dealer-stat">
                                <div class="stat-number">84 DYS</div>
                                <div class="stat-text">PT AVERAGE</div>
                            </div>
                            <div class="dealer-stat">
                                <div class="stat-number">113</div>
                                <div class="stat-text">DEAL NUMBER</div>
                            </div>
                            <div class="dealer-stat">
                                <div class="stat-number">2.21</div>
                                <div class="stat-text">FREQUENCY</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="dealer-card" onclick="openDealerProfile('mark-zuckerberg')">
                    <div class="dealer-rank">3</div>
                    <div class="dealer-content">
                        <div class="dealer-header">
                            <div class="dealer-image" style="background-image: url('/api/placeholder/100/100')"></div>
                            <div class="dealer-details">
                                <div class="dealer-title">M.ZUCKERBERG | META JILE</div>
                                <div class="dealer-company">Premium Dealer</div>
                                <div class="dealer-stars">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star-half-alt"></i>
                                    <span>(187)</span>
                                </div>
                            </div>
                        </div>
                        <div class="dealer-stats">
                            <div class="dealer-stat">
                                <div class="stat-number">17%</div>
                                <div class="stat-text">ROI AVERAGE</div>
                            </div>
                            <div class="dealer-stat">
                                <div class="stat-number">91 DYS</div>
                                <div class="stat-text">PT AVERAGE</div>
                            </div>
                            <div class="dealer-stat">
                                <div class="stat-number">95</div>
                                <div class="stat-text">DEAL NUMBER</div>
                            </div>
                            <div class="dealer-stat">
                                <div class="stat-number">1.98</div>
                                <div class="stat-text">FREQUENCY</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Best Opportunities Page -->
        <div class="main-content opportunities-page" id="opportunities-page">
            <div class="submenu" id="opportunity-categories">
                <div class="submenu-item active" onclick="filterOpportunities('all')">TUTTE</div>
                <div class="submenu-item" onclick="filterOpportunities('orologi')">OROLOGI</div>
                <div class="submenu-item" onclick="filterOpportunities('borse')">BORSE</div>
                <div class="submenu-item" onclick="filterOpportunities('gioielli')">GIOIELLI</div>
                <div class="submenu-item" onclick="filterOpportunities('arte')">ARTE</div>
                <div class="submenu-item" onclick="filterOpportunities('vini')">VINI</div>
                <div class="submenu-item" onclick="filterOpportunities('automobili')">AUTOMOBILI</div>
                <div class="submenu-item" onclick="filterOpportunities('realestate')">REAL ESTATE</div>
            </div>
            
            <div class="submenu" id="opportunity-status">
                <div class="submenu-item active" onclick="filterOpportunitiesByStatus('disponibili')">DISPONIBILI</div>
                <div class="submenu-item" onclick="filterOpportunitiesByStatus('concluse')">CONCLUSE</div>
            </div>
            
            <div class="submenu" id="opportunity-filters">
                <div class="submenu-item active" onclick="sortOpportunities('default')">CONSIGLIATI</div>
                <div class="submenu-item" onclick="sortOpportunities('roi')">ROI</div>
                <div class="submenu-item" onclick="sortOpportunities('pt')">PT</div>
                <div class="submenu-item" onclick="sortOpportunities('price')">PREZZO</div>
                <div class="submenu-item" onclick="sortOpportunities('time')">TEMPO</div>
            </div>
            
            <div id="opportunities-container">
                <div class="opportunity-card" onclick="openProductDetail('patek-philippe-available')">
                    <div class="opportunity-image" style="background-image: url('/api/placeholder/600/400')">
                        <div class="opportunity-badge">DISPONIBILE</div>
                        <div class="countdown-badge">
                            <i class="far fa-clock"></i>
                            <span>15 giorni</span>
                        </div>
                    </div>
                    <div class="opportunity-content">
                        <div class="opportunity-name">PATEK PHILIPPE NAUTILUS 5711/1A-010</div>
                        <div class="opportunity-dealer">DEALER: ELON MUSK | TESLA WATCHES</div>
                        <div class="opportunity-stats">
                            <div class="opportunity-stat">
                                <div class="opp-stat-value">21%</div>
                                <div class="opp-stat-label">ROI</div>
                            </div>
                            <div class="opportunity-stat">
                                <div class="opp-stat-value">64 DYS</div>
                                <div class="opp-stat-label">PT</div>
                            </div>
                            <div class="opportunity-stat">
                                <div class="opp-stat-value">€15.000</div>
                                <div class="opp-stat-label">PREZZO</div>
                            </div>
                            <div class="opportunity-stat">
                                <div class="opp-stat-value">742</div>
                                <div class="opp-stat-label">INVESTITORI</div>
                            </div>
                        </div>
                        <div class="opportunity-progress">
                            <div class="progress-container">
                                <div class="progress-info">
                                    <div class="progress-label">Stato raccolta</div>
                                    <div class="progress-percentage">65%</div>
                                </div>
                                <div class="progress-bar-container">
                                    <div class="progress-bar-fill" style="width: 65%;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="opportunity-card" onclick="openProductDetail('audemars-piguet-available')">
                    <div class="opportunity-image" style="background-image: url('/api/placeholder/600/400')">
                        <div class="opportunity-badge">DISPONIBILE</div>
                        <div class="countdown-badge">
                            <i class="far fa-clock"></i>
                            <span>12 giorni</span>
                        </div>
                    </div>
                    <div class="opportunity-content">
                        <div class="opportunity-name">AUDEMARS PIGUET ROYAL OAK 15400ST</div>
                        <div class="opportunity-dealer">DEALER: JEFF BEZOS | AMAZON CLOCK</div>
                        <div class="opportunity-stats">
                            <div class="opportunity-stat">
                                <div class="opp-stat-value">19%</div>
                                <div class="opp-stat-label">ROI</div>
                            </div>
                            <div class="opportunity-stat">
                                <div class="opp-stat-value">84 DYS</div>
                                <div class="opp-stat-label">PT</div>
                            </div>
                            <div class="opportunity-stat">
                                <div class="opp-stat-value">€12.000</div>
                                <div class="opp-stat-label">PREZZO</div>
                            </div>
                            <div class="opportunity-stat">
                                <div class="opp-stat-value">620</div>
                                <div class="opp-stat-label">INVESTITORI</div>
                            </div>
                        </div>
                        <div class="opportunity-progress">
                            <div class="progress-container">
                                <div class="progress-info">
                                    <div class="progress-label">Stato raccolta</div>
                                    <div class="progress-percentage">82%</div>
                                </div>
                                <div class="progress-bar-container">
                                    <div class="progress-bar-fill" style="width: 82%;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="opportunity-card" onclick="openProductDetail('ferrari-f40')" data-category="automobili">
                    <div class="opportunity-image" style="background-image: url('/api/placeholder/600/400')">
                        <div class="opportunity-badge">DISPONIBILE</div>
                        <div class="countdown-badge">
                            <i class="far fa-clock"></i>
                            <span>25 giorni</span>
                        </div>
                    </div>
                    <div class="opportunity-content">
                        <div class="opportunity-name">FERRARI F40 - 1992 - SOLO 10.000 KM</div>
                        <div class="opportunity-dealer">DEALER: CLASSIC MOTORS</div>
                        <div class="opportunity-stats">
                            <div class="opportunity-stat">
                                <div class="opp-stat-value">16%</div>
                                <div class="opp-stat-label">ROI</div>
                            </div>
                            <div class="opportunity-stat">
                                <div class="opp-stat-value">120 DYS</div>
                                <div class="opp-stat-label">PT</div>
                            </div>
                            <div class="opportunity-stat">
                                <div class="opp-stat-value">€1.2M</div>
                                <div class="opp-stat-label">PREZZO</div>
                            </div>
                            <div class="opportunity-stat">
                                <div class="opp-stat-value">324</div>
                                <div class="opp-stat-label">INVESTITORI</div>
                            </div>
                        </div>
                        <div class="opportunity-progress">
                            <div class="progress-container">
                                <div class="progress-info">
                                    <div class="progress-label">Stato raccolta</div>
                                    <div class="progress-percentage">45%</div>
                                </div>
                                <div class="progress-bar-container">
                                    <div class="progress-bar-fill" style="width: 45%;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="opportunity-card" onclick="openProductDetail('real-estate-milan')" data-category="realestate">
                    <div class="opportunity-image" style="background-image: url('/api/placeholder/600/400')">
                        <div class="opportunity-badge">DISPONIBILE</div>
                        <div class="countdown-badge">
                            <i class="far fa-clock"></i>
                            <span>60 giorni</span>
                        </div>
                    </div>
                    <div class="opportunity-content">
                        <div class="opportunity-name">ATTICO DI LUSSO - MILANO CENTRO - 300 MQ</div>
                        <div class="opportunity-dealer">DEALER: LUXURY ESTATES</div>
                        <div class="opportunity-stats">
                            <div class="opportunity-stat">
                                <div class="opp-stat-value">14%</div>
                                <div class="opp-stat-label">ROI</div>
                            </div>
                            <div class="opportunity-stat">
                                <div class="opp-stat-value">270 DYS</div>
                                <div class="opp-stat-label">PT</div>
                            </div>
                            <div class="opportunity-stat">
                                <div class="opp-stat-value">€2.8M</div>
                                <div class="opp-stat-label">PREZZO</div>
                            </div>
                            <div class="opportunity-stat">
                                <div class="opp-stat-value">186</div>
                                <div class="opp-stat-label">INVESTITORI</div>
                            </div>
                        </div>
                        <div class="opportunity-progress">
                            <div class="progress-container">
                                <div class="progress-info">
                                    <div class="progress-label">Stato raccolta</div>
                                    <div class="progress-percentage">35%</div>
                                </div>
                                <div class="progress-bar-container">
                                    <div class="progress-bar-fill" style="width: 35%;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="opportunity-card" onclick="openProductDetail('rolex-daytona-concluded')" data-status="concluse">
                    <div class="opportunity-image" style="background-image: url('/api/placeholder/600/400')">
                        <div class="opportunity-badge" style="background-color: #43A047;">CONCLUSA</div>
                    </div>
                    <div class="opportunity-content">
                        <div class="opportunity-name">ROLEX COSMOGRAPH DAYTONA 116500LN</div>
                        <div class="opportunity-dealer">DEALER: DANIEL NEI | CLOCKWISE</div>
                        <div class="opportunity-stats">
                            <div class="opportunity-stat">
                                <div class="opp-stat-value">21.4%</div>
                                <div class="opp-stat-label">ROI</div>
                            </div>
                            <div class="opportunity-stat">
                                <div class="opp-stat-value">58 DYS</div>
                                <div class="opp-stat-label">PT</div>
                            </div>
                            <div class="opportunity-stat">
                                <div class="opp-stat-value">€18.000</div>
                                <div class="opp-stat-label">PREZZO</div>
                            </div>
                            <div class="opportunity-stat">
                                <div class="opp-stat-value">420</div>
                                <div class="opp-stat-label">INVESTITORI</div>
                            </div>
                        </div>
                        <div class="opportunity-progress">
                            <div class="progress-container">
                                <div class="progress-info">
                                    <div class="progress-label">Stato raccolta</div>
                                    <div class="progress-percentage">100%</div>
                                </div>
                                <div class="progress-bar-container">
                                    <div class="progress-bar-fill" style="width: 100%;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
<!-- Marketplace Page -->
        <div class="main-content marketplace-page" id="marketplace-page">
            <div class="submenu" id="marketplace-categories">
                <div class="submenu-item active" onclick="filterMarketplace('tutti')">TUTTI</div>
                <div class="submenu-item" onclick="filterMarketplace('orologi')">OROLOGI</div>
                <div class="submenu-item" onclick="filterMarketplace('borse')">BORSE</div>
                <div class="submenu-item" onclick="filterMarketplace('gioielli')">GIOIELLI</div>
                <div class="submenu-item" onclick="filterMarketplace('arte')">ARTE</div>
                <div class="submenu-item" onclick="filterMarketplace('vini')">VINI</div>
                <div class="submenu-item" onclick="filterMarketplace('automobili')">AUTOMOBILI</div>
                <div class="submenu-item" onclick="filterMarketplace('realestate')">REAL ESTATE</div>
            </div>
            
            <div class="marketplace-filters">
                <div class="marketplace-filter active" onclick="filterMarketplaceByType('tutti', this)">Tutti</div>
                <div class="marketplace-filter" onclick="filterMarketplaceByType('beni', this)">Beni</div>
                <div class="marketplace-filter" onclick="filterMarketplaceByType('quote', this)">Quote</div>
                <div class="marketplace-filter" onclick="filterMarketplaceByType('nuovi', this)">Nuovi</div>
                <div class="marketplace-filter" onclick="filterMarketplaceByType('usati', this)">Usati</div>
                <div class="marketplace-filter" onclick="filterMarketplaceByType('prezzo-basso', this)">Prezzo: basso-alto</div>
                <div class="marketplace-filter" onclick="filterMarketplaceByType('prezzo-alto', this)">Prezzo: alto-basso</div>
            </div>
            
            <div class="marketplace-grid" id="marketplace-items">
                <div class="marketplace-card" onclick="openMarketplaceItem('rolex-submariner')" data-type="beni" data-category="orologi" data-condition="nuovo">
                    <div class="marketplace-image" style="background-image: url('/api/placeholder/300/300')">
                        <div class="marketplace-badge">NUOVO</div>
                    </div>
                    <div class="marketplace-info">
                        <div class="marketplace-name">Rolex Submariner Date 41mm</div>
                        <div class="marketplace-price">€14,500</div>
                        <div class="marketplace-details">
                            <span>Venduto da: Luxury Watch Store</span>
                            <span>4.9 <i class="fas fa-star"></i></span>
                        </div>
                    </div>
                </div>
                
                <div class="marketplace-card" onclick="openMarketplaceItem('hermes-birkin')" data-type="beni" data-category="borse" data-condition="usato">
                    <div class="marketplace-image" style="background-image: url('/api/placeholder/300/300')">
                        <div class="marketplace-badge">USATO</div>
                    </div>
                    <div class="marketplace-info">
                        <div class="marketplace-name">Hermès Birkin 35 Togo Nero</div>
                        <div class="marketplace-price">€22,900</div>
                        <div class="marketplace-details">
                            <span>Venduto da: Luxury Bags</span>
                            <span>4.8 <i class="fas fa-star"></i></span>
                        </div>
                    </div>
                </div>
                
                <div class="marketplace-card" onclick="openMarketplaceItem('patek-nautilus')" data-type="beni" data-category="orologi" data-condition="nuovo">
                    <div class="marketplace-image" style="background-image: url('/api/placeholder/300/300')">
                        <div class="marketplace-badge">NUOVO</div>
                    </div>
                    <div class="marketplace-info">
                        <div class="marketplace-name">Patek Philippe Nautilus 5711/1A-010</div>
                        <div class="marketplace-price">€130,000</div>
                        <div class="marketplace-details">
                            <span>Venduto da: Watches of Switzerland</span>
                            <span>5.0 <i class="fas fa-star"></i></span>
                        </div>
                    </div>
                </div>
                
                <div class="marketplace-card" onclick="openMarketplaceItem('cartier-tank')" data-type="beni" data-category="orologi" data-condition="usato">
                    <div class="marketplace-image" style="background-image: url('/api/placeholder/300/300')">
                        <div class="marketplace-badge">USATO</div>
                    </div>
                    <div class="marketplace-info">
                        <div class="marketplace-name">Cartier Tank Must de Cartier</div>
                        <div class="marketplace-price">€3,900</div>
                        <div class="marketplace-details">
                            <span>Venduto da: VintageWatches</span>
                            <span>4.7 <i class="fas fa-star"></i></span>
                        </div>
                    </div>
                </div>
                
                <div class="marketplace-card" onclick="openMarketplaceItem('ferrari-quota')" data-type="quote" data-category="automobili" data-condition="usato">
                    <div class="marketplace-image" style="background-image: url('/api/placeholder/300/300')">
                        <div class="marketplace-badge">QUOTA 30%</div>
                    </div>
                    <div class="marketplace-info">
                        <div class="marketplace-name">Ferrari 458 Italia - 2013</div>
                        <div class="marketplace-price">€90,000 (30% di €300,000)</div>
                        <div class="marketplace-details">
                            <span>Venduto da: ClassicCar Investor</span>
                            <span>4.6 <i class="fas fa-star"></i></span>
                        </div>
                    </div>
                </div>
                
                <div class="marketplace-card" onclick="openMarketplaceItem('appartamento-milano')" data-type="quote" data-category="realestate" data-condition="usato">
                    <div class="marketplace-image" style="background-image: url('/api/placeholder/300/300')">
                        <div class="marketplace-badge">QUOTA 25%</div>
                    </div>
                    <div class="marketplace-info">
                        <div class="marketplace-name">Appartamento Milano Centro - 150mq</div>
                        <div class="marketplace-price">€250,000 (25% di €1,000,000)</div>
                        <div class="marketplace-details">
                            <span>Venduto da: Real Estate Partners</span>
                            <span>4.9 <i class="fas fa-star"></i></span>
                        </div>
                    </div>
                </div>
                
                <div class="marketplace-card" onclick="openMarketplaceItem('opera-arte')" data-type="quote" data-category="arte" data-condition="usato">
                    <div class="marketplace-image" style="background-image: url('/api/placeholder/300/300')">
                        <div class="marketplace-badge">QUOTA 15%</div>
                    </div>
                    <div class="marketplace-info">
                        <div class="marketplace-name">Banksy - 'Girl with Balloon'</div>
                        <div class="marketplace-price">€120,000 (15% di €800,000)</div>
                        <div class="marketplace-details">
                            <span>Venduto da: ArtInvest Gallery</span>
                            <span>4.8 <i class="fas fa-star"></i></span>
                        </div>
                    </div>
                </div>
                
                <div class="marketplace-card" onclick="openMarketplaceItem('rolex-daytona-quote')" data-type="quote" data-category="orologi" data-condition="nuovo">
                    <div class="marketplace-image" style="background-image: url('/api/placeholder/300/300')">
                        <div class="marketplace-badge">QUOTA 50%</div>
                    </div>
                    <div class="marketplace-info">
                        <div class="marketplace-name">Rolex Daytona in Oro Giallo 18k</div>
                        <div class="marketplace-price">€20,000 (50% di €40,000)</div>
                        <div class="marketplace-details">
                            <span>Venduto da: Watch Partners</span>
                            <span>4.8 <i class="fas fa-star"></i></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="bottom-navigation">
            <a href="#" class="nav-item active" onclick="goToHome()">
                <i class="fas fa-home nav-icon"></i>
                <span>Home</span>
            </a>
            <a href="#" class="nav-item" onclick="openModal('community-modal'); return false;">
                <i class="fas fa-users nav-icon"></i>
                <span>Community</span>
            </a>
            <a href="#" class="nav-item" onclick="openModal('add-opportunity-modal'); return false;">
                <div class="add-opportunity">
                    <i class="fas fa-plus"></i>
                </div>
            </a>
            <a href="#" class="nav-item" onclick="openModal('chat-modal'); return false;">
                <i class="fas fa-comments nav-icon"></i>
                <span>Chat</span>
            </a>
            <a href="#" class="nav-item" onclick="openModal('wallet-modal'); return false;">
                <i class="fas fa-wallet nav-icon"></i>
                <span>Wallet</span>
            </a>
        </div>
    </div>
    
    <!-- Product Detail Modal -->
    <div class="product-detail-modal" id="product-detail">
        <div class="product-detail-header" style="background-image: url('/api/placeholder/600/400')">
            <button class="back-btn" onclick="closeProductDetail()"><i class="fas fa-arrow-left"></i></button>
            <button class="detail-favorite-btn" onclick="toggleDetailFavorite(this, event)"><i class="far fa-heart"></i></button>
        </div>
        <div class="product-detail-content">
            <div class="product-detail-title" id="product-title">OMEGA SPEEDMASTER MOONWATCH 3861 SAPPHIRE SANDWICH</div>
            <div class="product-detail-category" id="product-category">OROLOGI</div>
            <div class="time-remaining" id="time-remaining">5 giorni rimanenti</div>
            
            <div class="product-detail-dealer">
                <div class="dealer-avatar" id="dealer-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="dealer-info">
                    <div class="dealer-name" id="dealer-name">PREMIUM RESELLER</div>
                    <div class="dealer-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star-half-alt"></i>
                        <span>4.8 (120 recensioni)</span>
                    </div>
                </div>
                <div class="view-dealer" onclick="viewDealerProfile(event)">Visualizza</div>
            </div>
            
            <div class="product-detail-section">
                <h3 class="section-title">Descrizione</h3>
                <p class="product-description" id="product-description">
                    L'Omega Speedmaster Moonwatch Professional è un orologio iconico con una ricca eredità. Questo modello in particolare presenta il movimento calibre 3861 con certificazione Master Chronometer, cassa in acciaio inossidabile da 42mm e quadrante nero protetto da cristallo zaffiro. Il valore di questo modello continua a crescere nel tempo, rendendolo un ottimo investimento con potenziale di rivalutazione.
                </p>
            </div>
            
            <div class="product-detail-section">
                <h3 class="section-title">Dettagli Investimento</h3>
                <div class="detail-grid">
                    <div class="detail-item">
                        <div class="detail-label">PREZZO DI ACQUISTO</div>
                        <div class="detail-value" id="purchase-price">€7,200.00</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">ROI STIMATO</div>
                        <div class="detail-value" id="estimated-roi">16.67%</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">TEMPO PREVISTO (PT)</div>
                        <div class="detail-value" id="estimated-time">7-10 giorni</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">PT MEDIO DEL DEALER</div>
                        <div class="detail-value" id="dealer-pt">9.2 giorni</div>
                    </div>
                </div>
            </div>
            
            <div class="product-detail-section">
                <h3 class="section-title">Stato Raccolta</h3>
                <div class="progress-container">
                    <div class="progress-info">
                        <div class="progress-label" id="collection-status">€4,700 / €8,000</div>
                        <div class="progress-percentage" id="collection-percentage">58.75%</div>
                    </div>
                    <div class="progress-bar-container">
                        <div class="progress-bar-fill" id="progress-bar" style="width: 58.75%;"></div>
                    </div>
                </div>
                <div class="investment-form">
                    <div class="investment-input-container">
                        <span class="currency-symbol">€</span>
                        <input type="number" class="investment-input" id="investment-amount" placeholder="Importo investimento" min="50" max="3300" value="100" onclick="event.stopPropagation()">
                    </div>
                    <input type="range" class="investment-slider" id="investment-slider" min="50" max="3300" value="100" step="50" onclick="event.stopPropagation()">
                    <div class="slider-labels">
                        <span>€50</span>
                        <span>€3,300</span>
                    </div>
                    <div class="investment-actions">
                        <button class="btn btn-secondary" onclick="cancelInvestment(event)">Annulla</button>
                        <button class="btn btn-primary" onclick="confirmInvestment(event)">Investi Ora</button>
                    </div>
                    <div class="investment-info" id="investment-info">
                        Quota minima: €50 | Quota disponibile: €3,300
                    </div>
                </div>
            </div>
            
            <div class="product-detail-tabs">
                <div class="product-detail-tab active" onclick="showTab('statistics', this, event)">Statistiche</div>
                <div class="product-detail-tab" onclick="showTab('comments', this, event)">Commenti</div>
                <div class="product-detail-tab" onclick="showTab('related', this, event)">Correlati</div>
            </div>
            
            <div class="tab-content active" id="statistics-tab">
                <ul class="statistics-list">
                    <li class="statistic-item">
                        <div class="statistic-label">Numero Investitori</div>
                        <div class="statistic-value">83</div>
                    </li>
                    <li class="statistic-item">
                        <div class="statistic-label">Investimento Medio</div>
                        <div class="statistic-value">€56.63</div>
                    </li>
                    <li class="statistic-item">
                        <div class="statistic-label">Investimento Massimo</div>
                        <div class="statistic-value">€500.00</div>
                    </li>
                    <li class="statistic-item">
                        <div class="statistic-label">Tempo Medio di Completamento</div>
                        <div class="statistic-value">8.3 giorni</div>
                    </li>
                    <li class="statistic-item">
                        <div class="statistic-label">ROI Medio del Dealer</div>
                        <div class="statistic-value">17.21%</div>
                    </li>
                    <li class="statistic-item">
                        <div class="statistic-label">Recensioni del Dealer</div>
                        <div class="statistic-value"><a href="#" onclick="viewDealerReviews(event)">Visualizza (120)</a></div>
                    </li>
                </ul>
            </div>
            
            <div class="tab-content" id="comments-tab">
                <ul class="comments-list" id="product-comments">
                    <li class="comment-item">
                        <div class="comment-header">
                            <div class="comment-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div>
                                <div class="comment-user">Marco Bianchi</div>
                                <div class="comment-time">2 giorni fa</div>
                            </div>
                        </div>
                        <div class="comment-text">
                            Ho investito in un'opportunità simile il mese scorso. Ottimo rendimento e tempi rispettati.
                        </div>
                        <div class="comment-actions">
                            <div class="comment-action" onclick="likeComment(this, event)">
                                <i class="far fa-thumbs-up"></i>
                                <span>12</span>
                            </div>
                            <div class="comment-action" onclick="toggleReplyForm(this, event)">
                                <i class="far fa-comment"></i>
                                <span>Rispondi</span>
                            </div>
                        </div>
                        <div class="reply-form">
                            <input type="text" class="reply-input" placeholder="Scrivi una risposta...">
                            <button class="reply-btn" onclick="submitReply(this, event)">Invia</button>
                        </div>
                        <div class="comment-replies">
                            <div class="comment-reply">
                                <div class="comment-header">
                                    <div class="comment-avatar">
                                        <i class="fas fa-user"></i>
                                    </div>
                                    <div>
                                        <div class="comment-user">Laura Verdi</div>
                                        <div class="comment-time">1 giorno fa</div>
                                    </div>
                                </div>
                                <div class="comment-text">
                                    Anche io ho avuto un'esperienza simile. ROI del 18% in soli 12 giorni.
                                </div>
                                <div class="comment-actions">
                                    <div class="comment-action" onclick="likeComment(this, event)">
                                        <i class="far fa-thumbs-up"></i>
                                        <span>5</span>
                                    </div>
                                    <div class="comment-action" onclick="toggleReplyForm(this, event)">
                                        <i class="far fa-comment"></i>
                                        <span>Rispondi</span>
                                    </div>
                                </div>
                                <div class="reply-form">
                                    <input type="text" class="reply-input" placeholder="Scrivi una risposta...">
                                    <button class="reply-btn" onclick="submitReply(this, event)">Invia</button>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="comment-item">
                        <div class="comment-header">
                            <div class="comment-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div>
                                <div class="comment-user">Laura Verdi</div>
                                <div class="comment-time">5 giorni fa</div>
                            </div>
                        </div>
                        <div class="comment-text">
                            Il dealer è molto affidabile, ho già concluso diverse operazioni con lui e tutte con esito positivo.
                        </div>
                        <div class="comment-actions">
                            <div class="comment-action" onclick="likeComment(this, event)">
                                <i class="far fa-thumbs-up"></i>
                                <span>8</span>
                            </div>
                            <div class="comment-action" onclick="toggleReplyForm(this, event)">
                                <i class="far fa-comment"></i>
                                <span>Rispondi</span>
                            </div>
                        </div>
                        <div class="reply-form">
                            <input type="text" class="reply-input" placeholder="Scrivi una risposta...">
                            <button class="reply-btn" onclick="submitReply(this, event)">Invia</button>
                        </div>
                    </li>
                    <li class="comment-item">
                        <div class="comment-header">
                            <div class="comment-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div>
                                <div class="comment-user">Giuseppe Rossi</div>
                                <div class="comment-time">1 settimana fa</div>
                            </div>
                        </div>
                        <div class="comment-text">
                            Ho qualche dubbio sul tempo previsto. È un po' ottimistico secondo me.
                        </div>
                        <div class="comment-actions">
                            <div class="comment-action" onclick="likeComment(this, event)">
                                <i class="far fa-thumbs-up"></i>
                                <span>3</span>
                            </div>
                            <div class="comment-action" onclick="toggleReplyForm(this, event)">
                                <i class="far fa-comment"></i>
                                <span>Rispondi</span>
                            </div>
                        </div>
                        <div class="reply-form">
                            <input type="text" class="reply-input" placeholder="Scrivi una risposta...">
                            <button class="reply-btn" onclick="submitReply(this, event)">Invia</button>
                        </div>
                    </li>
                </ul>
                <div class="comment-form">
                    <input type="text" class="comment-input" id="new-comment-input" placeholder="Scrivi un commento...">
                    <button class="comment-btn" onclick="addComment(event)">Invia</button>
                </div>
            </div>
            
            <div class="tab-content" id="related-tab">
                <div class="related-opportunities">
                    <div class="related-card" onclick="openProductDetail('omega-seamaster', event)">
                        <div class="related-image" style="background-image: url('/api/placeholder/200/200')"></div>
                        <div class="related-info">
                            <div class="related-name">OMEGA SEAMASTER DIVER 300M</div>
                            <div class="related-price">€4,500.00 | ROI: 15%</div>
                        </div>
                    </div>
                    <div class="related-card" onclick="openProductDetail('omega-constellation', event)">
                        <div class="related-image" style="background-image: url('/api/placeholder/200/200')"></div>
                        <div class="related-info">
                            <div class="related-name">OMEGA CONSTELLATION GLOBEMASTER</div>
                            <div class="related-price">€6,200.00 | ROI: 14%</div>
                        </div>
                    </div>
                    <div class="related-card" onclick="openProductDetail('rolex-datejust', event)">
                        <div class="related-image" style="background-image: url('/api/placeholder/200/200')"></div>
                        <div class="related-info">
                            <div class="related-name">ROLEX DATEJUST 41</div>
                            <div class="related-price">€9,800.00 | ROI: 18%</div>
                        </div>
                    </div>
                    <div class="related-card" onclick="openProductDetail('rolex-submariner', event)">
                        <div class="related-image" style="background-image: url('/api/placeholder/200/200')"></div>
                        <div class="related-info">
                            <div class="related-name">ROLEX SUBMARINER DATE</div>
                            <div class="related-price">€12,500.00 | ROI: 20%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
<!-- Chat Modal -->
    <div class="modal" id="chat-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Chat</h2>
                <button class="close-modal" onclick="closeModal('chat-modal')">&times;</button>
            </div>
            <ul class="chat-list">
                <li class="chat-user active" onclick="openChat('dealer-premium', event)">
                    <div class="chat-user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="chat-user-info">
                        <div class="chat-user-name">Premium Reseller</div>
                        <div class="chat-user-last-msg">Il rendimento previsto è del 12% in 10 giorni...</div>
                    </div>
                    <div class="chat-user-time">10:23</div>
                </li>
                <li class="chat-user" onclick="openChat('dealer-luxury', event)">
                    <div class="chat-user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="chat-user-info">
                        <div class="chat-user-name">Luxury Brand</div>
                        <div class="chat-user-last-msg">Buongiorno! Abbiamo appena inserito una nuova...</div>
                    </div>
                    <div class="chat-user-time">Ieri</div>
                </li>
                <li class="chat-user" onclick="openChat('gruppo-orologi', event)">
                    <div class="chat-user-avatar">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="chat-user-info">
                        <div class="chat-user-name">Gruppo Orologi</div>
                        <div class="chat-user-last-msg">Marco: Qualcuno ha esperienza con gli investimenti in Rolex?</div>
                    </div>
                    <div class="chat-user-time">Ieri</div>
                </li>
                <li class="chat-user" onclick="openChat('gruppo-borse', event)">
                    <div class="chat-user-avatar">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="chat-user-info">
                        <div class="chat-user-name">Gruppo Borse</div>
                        <div class="chat-user-last-msg">Laura: Conviene investire in Hermès o Chanel?</div>
                    </div>
                    <div class="chat-user-time">2 giorni</div>
                </li>
            </ul>
            
            <div class="chat-header">
                <div class="chat-user-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="chat-title">Premium Reseller</div>
            </div>
            
            <div class="chat-container" id="chat-messages">
                <div class="chat-message message-received">
                    Ciao! Sono interessato all'opportunità dell'Omega Speedmaster. Potresti darmi più informazioni?
                </div>
                <div class="chat-message message-sent">
                    Ciao! Certo, è un'ottima opportunità. L'orologio ha un valore di mercato di circa 9.500€ ma abbiamo un'offerta speciale. Prevediamo un ROI del 16.67% in circa 7-10 giorni.
                </div>
                <div class="chat-message message-received">
                    Qual è il rendimento previsto per gli investitori?
                </div>
                <div class="chat-message message-sent">
                    Il rendimento previsto è del 16.67% in 7-10 giorni, con un payback time medio di 9.2 giorni per i nostri investimenti. La quota minima è di soli 50€.
                </div>
            </div>
            <div class="chat-input-container">
                <input type="text" class="form-input chat-input" id="chat-input" placeholder="Scrivi un messaggio...">
                <button class="btn send-btn" onclick="sendMessage(event)"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
    </div>
    
    <!-- Community Modal -->
    <div class="modal" id="community-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Community</h2>
                <button class="close-modal" onclick="closeModal('community-modal')">&times;</button>
            </div>
            <div id="community-list-container">
                <ul class="community-list">
                    <li class="community-item" onclick="openCommunityDetail('orologi', event)">
                        <div class="community-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="community-info">
                            <div class="community-name">Appassionati di Orologi</div>
                            <div class="community-description">Discussioni su orologi di lusso, investimenti e mercato</div>
                        </div>
                        <button class="join-btn" onclick="toggleJoin(this, event)">Unisciti</button>
                    </li>
                    <li class="community-item" onclick="openCommunityDetail('borse', event)">
                        <div class="community-icon">
                            <i class="fas fa-shopping-bag"></i>
                        </div>
                        <div class="community-info">
                            <div class="community-name">Luxury Bags</div>
                            <div class="community-description">Community di esperti in borse di lusso e collezioni</div>
                        </div>
                        <button class="join-btn joined" onclick="toggleJoin(this, event)">Iscritto</button>
                    </li>
                    <li class="community-item" onclick="openCommunityDetail('gioielli', event)">
                        <div class="community-icon">
                            <i class="fas fa-gem"></i>
                        </div>
                        <div class="community-info">
                            <div class="community-name">Investitori in Gioielli</div>
                            <div class="community-description">Consigli su investimenti in pietre preziose e gioielli</div>
                        </div>
                        <button class="join-btn" onclick="toggleJoin(this, event)">Unisciti</button>
                    </li>
                    <li class="community-item" onclick="openCommunityDetail('vini', event)">
                        <div class="community-icon">
                            <i class="fas fa-wine-bottle"></i>
                        </div>
                        <div class="community-info">
                            <div class="community-name">Wine Investors</div>
                            <div class="community-description">Investimenti in vini pregiati e da collezione</div>
                        </div>
                        <button class="join-btn" onclick="toggleJoin(this, event)">Unisciti</button>
                    </li>
                    <li class="community-item" onclick="openCommunityDetail('auto', event)">
                        <div class="community-icon">
                            <i class="fas fa-car"></i>
                        </div>
                        <div class="community-info">
                            <div class="community-name">Auto d'Epoca</div>
                            <div class="community-description">Passione per le auto d'epoca e opportunità di investimento</div>
                        </div>
                        <button class="join-btn" onclick="toggleJoin(this, event)">Unisciti</button>
                    </li>
                </ul>
            </div>
            
            <!-- Orologi Community Detail -->
            <div class="community-detail" id="community-detail-orologi">
                <div class="community-cover" style="background-image: url('/api/placeholder/600/400')"></div>
                <div class="community-avatar">
                    <i class="fas fa-clock"></i>
                </div>
                <div class="community-title">Appassionati di Orologi</div>
                <div class="community-members">1.234 membri</div>
                <button class="community-action" id="community-join-btn-orologi" onclick="toggleCommunityJoin('orologi', event)">Unisciti</button>
                
                <div class="community-tabs">
                    <div class="community-tab active" onclick="showCommunityTab('posts', this, event)">Post</div>
                    <div class="community-tab" onclick="showCommunityTab('members', this, event)">Membri</div>
                    <div class="community-tab" onclick="showCommunityTab('events', this, event)">Eventi</div>
                </div>
                
                <div class="community-posts" id="community-posts">
                    <div class="community-post">
                        <div class="post-header">
                            <div class="post-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div>
                                <div class="post-user">Marco Bianchi</div>
                                <div class="post-time">2 ore fa</div>
                            </div>
                        </div>
                        <div class="post-content">
                            Secondo voi, quali sono i modelli Rolex che rappresentano un investimento più sicuro nel lungo periodo?
                        </div>
                        <div class="post-actions">
                            <div class="post-action" onclick="likePost(this, event)">
                                <i class="far fa-thumbs-up"></i>
                                <span>24</span>
                            </div>
                            <div class="post-action">
                                <i class="far fa-comment"></i>
                                <span>18</span>
                            </div>
                            <div class="post-action">
                                <i class="far fa-share-square"></i>
                                <span>3</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="community-post">
                        <div class="post-header">
                            <div class="post-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div>
                                <div class="post-user">Laura Verdi</div>
                                <div class="post-time">5 ore fa</div>
                            </div>
                        </div>
                        <div class="post-content">
                            Ecco la mia ultima acquisizione: un Omega Speedmaster Moonwatch. Ho investito attraverso Society e sono molto soddisfatta del risultato!
                        </div>
                        <div class="post-image" style="background-image: url('/api/placeholder/500/300')"></div>
                        <div class="post-actions">
                            <div class="post-action" onclick="likePost(this, event)">
                                <i class="far fa-thumbs-up"></i>
                                <span>42</span>
                            </div>
                            <div class="post-action">
                                <i class="far fa-comment"></i>
                                <span>7</span>
                            </div>
                            <div class="post-action">
                                <i class="far fa-share-square"></i>
                                <span>5</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="community-members-list" id="community-members">
                    <div class="member-item">
                        <div class="member-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div>
                            <div class="member-name">Marco Bianchi</div>
                            <div class="member-role">Amministratore</div>
                        </div>
                    </div>
                    <div class="member-item">
                        <div class="member-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div>
                            <div class="member-name">Laura Verdi</div>
                            <div class="member-role">Moderatore</div>
                        </div>
                    </div>
                    <div class="member-item">
                        <div class="member-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div>
                            <div class="member-name">Giuseppe Rossi</div>
                            <div class="member-role">Membro</div>
                        </div>
                    </div>
                </div>
                
                <div class="community-events-list" id="community-events">
                    <div class="event-item">
                        <div class="event-date">15 Maggio 2025 • Roma</div>
                        <div class="event-title">Incontro Collezionisti Rolex & Patek Philippe</div>
                        <div class="event-description">Un'occasione unica per incontrare altri appassionati e vedere dal vivo pezzi rari e da collezione.</div>
                        <div class="event-participants">
                            <i class="fas fa-users"></i>
                            <span>47 partecipanti</span>
                        </div>
                    </div>
                    <div class="event-item">
                        <div class="event-date">21 Maggio 2025 • Online</div>
                        <div class="event-title">Webinar: Investire in orologi vintage</div>
                        <div class="event-description">Esperti del settore illustreranno le migliori strategie per investire in orologi vintage di valore.</div>
                        <div class="event-participants">
                            <i class="fas fa-users"></i>
                            <span>125 partecipanti</span>
                        </div>
                    </div>
                </div>
                
                <button class="back-btn" onclick="closeCommunitytDetail()" style="position: fixed; top: 75px; left: 15px;"><i class="fas fa-arrow-left"></i></button>
            </div>
            
            <!-- Borse Community Detail -->
            <div class="community-detail" id="community-detail-borse">
                <div class="community-cover" style="background-image: url('/api/placeholder/600/400')"></div>
                <div class="community-avatar">
                    <i class="fas fa-shopping-bag"></i>
                </div>
                <div class="community-title">Luxury Bags</div>
                <div class="community-members">982 membri</div>
                <button class="community-action joined" id="community-join-btn-borse" onclick="toggleCommunityJoin('borse', event)">Iscritto</button>
                
                <div class="community-tabs">
                    <div class="community-tab active" onclick="showCommunityTab('posts-borse', this, event)">Post</div>
                    <div class="community-tab" onclick="showCommunityTab('members-borse', this, event)">Membri</div>
                    <div class="community-tab" onclick="showCommunityTab('events-borse', this, event)">Eventi</div>
                </div>
                
                <div class="community-posts" id="community-posts-borse">
                    <div class="community-post">
                        <div class="post-header">
                            <div class="post-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div>
                                <div class="post-user">Francesca Blu</div>
                                <div class="post-time">3 ore fa</div>
                            </div>
                        </div>
                        <div class="post-content">
                            Qualcuno ha esperienza con l'acquisto di borse Hermès? Vale davvero la pena come investimento a lungo termine?
                        </div>
                        <div class="post-actions">
                            <div class="post-action" onclick="likePost(this, event)">
                                <i class="far fa-thumbs-up"></i>
                                <span>18</span>
                            </div>
                            <div class="post-action">
                                <i class="far fa-comment"></i>
                                <span>23</span>
                            </div>
                            <div class="post-action">
                                <i class="far fa-share-square"></i>
                                <span>2</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="community-post">
                        <div class="post-header">
                            <div class="post-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div>
                                <div class="post-user">Giulia Neri</div>
                                <div class="post-time">1 giorno fa</div>
                            </div>
                        </div>
                        <div class="post-content">
                            Ho appena finalizzato l'acquisto di una Chanel Classic Flap tramite Society. Il ROI previsto è del 15% in 20 giorni!
                        </div>
                        <div class="post-image" style="background-image: url('/api/placeholder/500/300')"></div>
                        <div class="post-actions">
                            <div class="post-action" onclick="likePost(this, event)">
                                <i class="far fa-thumbs-up"></i>
                                <span>35</span>
                            </div>
                            <div class="post-action">
                                <i class="far fa-comment"></i>
                                <span>12</span>
                            </div>
                            <div class="post-action">
                                <i class="far fa-share-square"></i>
                                <span>4</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="community-members-list" id="community-members-borse" style="display: none;">
                    <div class="member-item">
                        <div class="member-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div>
                            <div class="member-name">Francesca Blu</div>
                            <div class="member-role">Amministratore</div>
                        </div>
                    </div>
                    <div class="member-item">
                        <div class="member-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div>
                            <div class="member-name">Giulia Neri</div>
                            <div class="member-role">Moderatore</div>
                        </div>
                    </div>
                    <div class="member-item">
                        <div class="member-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div>
                            <div class="member-name">Sofia Ricci</div>
                            <div class="member-role">Membro</div>
                        </div>
                    </div>
                </div>
                
                <div class="community-events-list" id="community-events-borse" style="display: none;">
                    <div class="event-item">
                        <div class="event-date">22 Maggio 2025 • Milano</div>
                        <div class="event-title">Luxury Bags Exhibition</div>
                        <div class="event-description">Esposizione delle borse più iconiche e rare di Hermès, Chanel e Louis Vuitton.</div>
                        <div class="event-participants">
                            <i class="fas fa-users"></i>
                            <span>65 partecipanti</span>
                        </div>
                    </div>
                </div>
                
                <button class="back-btn" onclick="closeCommunitytDetail()" style="position: fixed; top: 75px; left: 15px;"><i class="fas fa-arrow-left"></i></button>
            </div>
            
            <!-- Vini Community Detail -->
            <div class="community-detail" id="community-detail-vini">
                <div class="community-cover" style="background-image: url('/api/placeholder/600/400')"></div>
                <div class="community-avatar">
                    <i class="fas fa-wine-bottle"></i>
                </div>
                <div class="community-title">Wine Investors</div>
                <div class="community-members">786 membri</div>
                <button class="community-action" id="community-join-btn-vini" onclick="toggleCommunityJoin('vini', event)">Unisciti</button>
                
                <div class="community-tabs">
                    <div class="community-tab active" onclick="showCommunityTab('posts-vini', this, event)">Post</div>
                    <div class="community-tab" onclick="showCommunityTab('members-vini', this, event)">Membri</div>
                    <div class="community-tab" onclick="showCommunityTab('events-vini', this, event)">Eventi</div>
                </div>
                
                <div class="community-posts" id="community-posts-vini">
                    <div class="community-post">
                        <div class="post-header">
                            <div class="post-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div>
                                <div class="post-user">Roberto Vino</div>
                                <div class="post-time">6 ore fa</div>
                            </div>
                        </div>
                        <div class="post-content">
                            Qualcuno sa consigliarmi quale annata di Barolo scegliere per un investimento a medio termine?
                        </div>
                        <div class="post-actions">
                            <div class="post-action" onclick="likePost(this, event)">
                                <i class="far fa-thumbs-up"></i>
                                <span>14</span>
                            </div>
                            <div class="post-action">
                                <i class="far fa-comment"></i>
                                <span>10</span>
                            </div>
                            <div class="post-action">
                                <i class="far fa-share-square"></i>
                                <span>1</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="community-members-list" id="community-members-vini" style="display: none;">
                    <div class="member-item">
                        <div class="member-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div>
                            <div class="member-name">Roberto Vino</div>
                            <div class="member-role">Amministratore</div>
                        </div>
                    </div>
                </div>
                
                <div class="community-events-list" id="community-events-vini" style="display: none;">
                    <div class="event-item">
                        <div class="event-date">30 Maggio 2025 • Firenze</div>
                        <div class="event-title">Degustazione Super Tuscan</div>
                        <div class="event-description">Evento dedicato alla degustazione e valutazione dei migliori Super Tuscan.</div>
                        <div class="event-participants">
                            <i class="fas fa-users"></i>
                            <span>38 partecipanti</span>
                        </div>
                    </div>
                </div>
                
                <button class="back-btn" onclick="closeCommunitytDetail()" style="position: fixed; top: 75px; left: 15px;"><i class="fas fa-arrow-left"></i></button>
            </div>
            
            <!-- Auto Community Detail -->
            <div class="community-detail" id="community-detail-auto">
                <div class="community-cover" style="background-image: url('/api/placeholder/600/400')"></div>
                <div class="community-avatar">
                    <i class="fas fa-car"></i>
                </div>
                <div class="community-title">Auto d'Epoca</div>
                <div class="community-members">542 membri</div>
                <button class="community-action" id="community-join-btn-auto" onclick="toggleCommunityJoin('auto', event)">Unisciti</button>
                
                <div class="community-tabs">
                    <div class="community-tab active" onclick="showCommunityTab('posts-auto', this, event)">Post</div>
                    <div class="community-tab" onclick="showCommunityTab('members-auto', this, event)">Membri</div>
                    <div class="community-tab" onclick="showCommunityTab('events-auto', this, event)">Eventi</div>
                </div>
                
                <div class="community-posts" id="community-posts-auto">
                    <div class="community-post">
                        <div class="post-header">
                            <div class="post-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div>
                                <div class="post-user">Massimo Ferrari</div>
                                <div class="post-time">12 ore fa</div>
                            </div>
                        </div>
                        <div class="post-content">
                            Ho appena investito in una quota del 25% di una Ferrari F40 tramite Society. Qualcuno ha esperienza con questo tipo di investimento?
                        </div>
                        <div class="post-image" style="background-image: url('/api/placeholder/500/300')"></div>
                        <div class="post-actions">
                            <div class="post-action" onclick="likePost(this, event)">
                                <i class="far fa-thumbs-up"></i>
                                <span>32</span>
                            </div>
                            <div class="post-action">
                                <i class="far fa-comment"></i>
                                <span>15</span>
                            </div>
                            <div class="post-action">
                                <i class="far fa-share-square"></i>
                                <span>7</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="community-members-list" id="community-members-auto" style="display: none;">
                    <div class="member-item">
                        <div class="member-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div>
                            <div class="member-name">Massimo Ferrari</div>
                            <div class="member-role">Amministratore</div>
                        </div>
                    </div>
                </div>
                
                <div class="community-events-list" id="community-events-auto" style="display: none;">
                    <div class="event-item">
                        <div class="event-date">18 Giugno 2025 • Modena</div>
                        <div class="event-title">Visita Museo Ferrari</div>
                        <div class="event-description">Visita esclusiva al museo Ferrari con focus sugli investimenti in auto d'epoca.</div>
                        <div class="event-participants">
                            <i class="fas fa-users"></i>
                            <span>27 partecipanti</span>
                        </div>
                    </div>
                </div>
                
                <button class="back-btn" onclick="closeCommunitytDetail()" style="position: fixed; top: 75px; left: 15px;"><i class="fas fa-arrow-left"></i></button>
            </div>
            
            <!-- Gioielli Community Detail -->
            <div class="community-detail" id="community-detail-gioielli">
                <div class="community-cover" style="background-image: url('/api/placeholder/600/400')"></div>
                <div class="community-avatar">
                    <i class="fas fa-gem"></i>
                </div>
                <div class="community-title">Investitori in Gioielli</div>
                <div class="community-members">624 membri</div>
                <button class="community-action" id="community-join-btn-gioielli" onclick="toggleCommunityJoin('gioielli', event)">Unisciti</button>
                
                <div class="community-tabs">
                    <div class="community-tab active" onclick="showCommunityTab('posts-gioielli', this, event)">Post</div>
                    <div class="community-tab" onclick="showCommunityTab('members-gioielli', this, event)">Membri</div>
                    <div class="community-tab" onclick="showCommunityTab('events-gioielli', this, event)">Eventi</div>
                </div>
                
                <div class="community-posts" id="community-posts-gioielli">
                    <div class="community-post">
                        <div class="post-header">
                            <div class="post-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div>
                                <div class="post-user">Elena Diamante</div>
                                <div class="post-time">1 giorno fa</div>
                            </div>
                        </div>
                        <div class="post-content">
                            I diamanti sono ancora un buon investimento nel 2025? Quale taglio e caratura consigliate?
                        </div>
                        <div class="post-actions">
                            <div class="post-action" onclick="likePost(this, event)">
                                <i class="far fa-thumbs-up"></i>
                                <span>19</span>
                            </div>
                            <div class="post-action">
                                <i class="far fa-comment"></i>
                                <span>26</span>
                            </div>
                            <div class="post-action">
                                <i class="far fa-share-square"></i>
                                <span>3</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="community-members-list" id="community-members-gioielli" style="display: none;">
                    <div class="member-item">
                        <div class="member-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div>
                            <div class="member-name">Elena Diamante</div>
                            <div class="member-role">Amministratore</div>
                        </div>
                    </div>
                </div>
                
                <div class="community-events-list" id="community-events-gioielli" style="display: none;">
                    <div class="event-item">
                        <div class="event-date">10 Giugno 2025 • Valenza</div>
                        <div class="event-title">Workshop: Valutazione diamanti</div>
                        <div class="event-description">Workshop pratico sulla valutazione e l'investimento in diamanti.</div>
                        <div class="event-participants">
                            <i class="fas fa-users"></i>
                            <span>42 partecipanti</span>
                        </div>
                    </div>
                </div>
                
                <button class="back-btn" onclick="closeCommunitytDetail()" style="position: fixed; top: 75px; left: 15px;"><i class="fas fa-arrow-left"></i></button>
            </div>
        </div>
    </div>
    
    <!-- Dealer Profile Modal -->
    <div class="modal" id="dealer-profile-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Profilo Dealer</h2>
                <button class="close-modal" onclick="closeModal('dealer-profile-modal')">&times;</button>
            </div>
            <div class="profile-header">
                <div class="profile-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="profile-name" id="dealer-profile-name">Premium Reseller</div>
                <div class="dealer-stars">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star-half-alt"></i>
                    <span>4.8 (120 recensioni)</span>
                </div>
            </div>
            <div class="profile-stats">
                <div class="stat-item">
                    <div class="stat-value">86</div>
                    <div class="stat-label">Opportunità</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">17.3%</div>
                    <div class="stat-label">ROI Medio</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">9.2</div>
                    <div class="stat-label">PT Medio</div>
                </div>
            </div>
<div class="dealer-tabs">
                <div class="wallet-tab active" onclick="showDealerTab('opportunities', this)">Opportunità</div>
                <div class="wallet-tab" onclick="showDealerTab('reviews', this)">Recensioni</div>
                <div class="wallet-tab" onclick="showDealerTab('info', this)">Informazioni</div>
            </div>
            
            <div class="dealer-content active" id="dealer-opportunities-tab">
                <div class="product-card" onclick="openProductDetail('omega-speedmaster')">
                    <div class="product-image" style="background-image: url('/api/placeholder/300/300')">
                        <button class="favorite-btn" onclick="toggleFavorite(this, event, 'omega-speedmaster')">
                            <i class="far fa-heart"></i>
                        </button>
                        <div class="countdown-badge">
                            <i class="far fa-clock"></i>
                            <span>5 giorni</span>
                        </div>
                    </div>
                    <div class="product-info">
                        <div class="product-category">OROLOGI</div>
                        <div class="product-name">OMEGA SPEEDMASTER MOONWATCH 3861 SAPPHIRE SANDWICH</div>
                        <div class="product-price">
                            <div>
                                <div class="price-label">QUOTA RICHIESTA</div>
                                <div class="price-value">8.000€</div>
                            </div>
                            <div>
                                <div class="price-label">QUOTA MINIMA</div>
                                <div class="price-value">50€</div>
                            </div>
                        </div>
                        <div class="product-status">
                            <div class="status-collected">STATO RACCOLTA: 4700/8000€</div>
                            <div class="status-time">
                                <i class="far fa-clock"></i>
                                <span>PT: 7-10 GIORNI</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="product-card" onclick="openProductDetail('omega-seamaster')">
                    <div class="product-image" style="background-image: url('/api/placeholder/300/300')">
                        <button class="favorite-btn" onclick="toggleFavorite(this, event, 'omega-seamaster')">
                            <i class="far fa-heart"></i>
                        </button>
                        <div class="countdown-badge">
                            <i class="far fa-clock"></i>
                            <span>8 giorni</span>
                        </div>
                    </div>
                    <div class="product-info">
                        <div class="product-category">OROLOGI</div>
                        <div class="product-name">OMEGA SEAMASTER DIVER 300M</div>
                        <div class="product-price">
                            <div>
                                <div class="price-label">QUOTA RICHIESTA</div>
                                <div class="price-value">6.500€</div>
                            </div>
                            <div>
                                <div class="price-label">QUOTA MINIMA</div>
                                <div class="price-value">50€</div>
                            </div>
                        </div>
                        <div class="product-status">
                            <div class="status-collected">STATO RACCOLTA: 3200/6500€</div>
                            <div class="status-time">
                                <i class="far fa-clock"></i>
                                <span>PT: 12-15 GIORNI</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="dealer-content" id="dealer-reviews-tab">
                <ul class="comments-list" id="dealer-reviews-list">
                    <li class="comment-item">
                        <div class="comment-header">
                            <div class="comment-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div>
                                <div class="comment-user">Marco Bianchi</div>
                                <div class="comment-time">2 giorni fa</div>
                            </div>
                            <div class="dealer-stars" style="margin-left: auto;">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                        </div>
                        <div class="comment-text">
                            Ho investito in diverse opportunità con Premium Reseller e sono sempre rimasto soddisfatto. Tempi rispettati e rendimenti in linea con le aspettative. Consigliato!
                        </div>
                    </li>
                    <li class="comment-item">
                        <div class="comment-header">
                            <div class="comment-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div>
                                <div class="comment-user">Laura Verdi</div>
                                <div class="comment-time">1 settimana fa</div>
                            </div>
                            <div class="dealer-stars" style="margin-left: auto;">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i>
                            </div>
                        </div>
                        <div class="comment-text">
                            Ottima esperienza con l'investimento sull'Omega Speedmaster. Comunicazione perfetta e professionalità elevata. L'unico piccolo inconveniente è stato un leggero ritardo nella vendita, ma compensato da un rendimento superiore alle aspettative.
                        </div>
                    </li>
                    <li class="comment-item">
                        <div class="comment-header">
                            <div class="comment-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div>
                                <div class="comment-user">Giuseppe Rossi</div>
                                <div class="comment-time">3 settimane fa</div>
                            </div>
                            <div class="dealer-stars" style="margin-left: auto;">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                        </div>
                        <div class="comment-text">
                            Premium Reseller è sempre una garanzia. Ho fatto tre investimenti con loro e tutti si sono conclusi positivamente. Prezzi di rivendita realistici e tempi rispettati. Continuerò a investire con loro.
                        </div>
                    </li>
                </ul>
                <div class="comment-form">
                    <input type="text" class="comment-input" id="dealer-review-input" placeholder="Scrivi una recensione...">
                    <button class="comment-btn" onclick="addDealerReview(event)">Invia</button>
                </div>
            </div>
            
            <div class="dealer-content" id="dealer-info-tab">
                <div class="dealer-info-section">
                    <h3 class="section-title">Chi Siamo</h3>
                    <p class="dealer-description">
                        Premium Reseller è un'azienda specializzata nella compravendita di orologi di lusso con oltre 15 anni di esperienza nel settore. La nostra profonda conoscenza del mercato e la rete di contatti ci permettono di offrire opportunità di investimento uniche con rendimenti superiori alla media.
                    </p>
                </div>
                <div class="dealer-info-section">
                    <h3 class="section-title">Metodo di Lavoro</h3>
                    <p class="dealer-description">
                        Ogni opportunità è attentamente valutata dal nostro team di esperti che analizza il mercato, la domanda e i potenziali acquirenti prima di proporre un investimento. Collaboriamo solo con fornitori e acquirenti verificati, garantendo la massima sicurezza e trasparenza in ogni operazione.
                    </p>
                </div>
                <div class="dealer-info-section">
                    <h3 class="section-title">Contatti</h3>
                    <div class="dealer-contacts">
                        <div class="dealer-contact">
                            <i class="fas fa-envelope"></i>
                            <span>info@premium-reseller.com</span>
                        </div>
                        <div class="dealer-contact">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>Via Montenapoleone 8, Milano</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Transaction Detail Modal -->
    <div class="modal" id="transaction-detail-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Dettaglio Transazione</h2>
                <button class="close-modal" onclick="closeModal('transaction-detail-modal')">&times;</button>
            </div>
            <div class="transaction-detail">
                <div class="transaction-detail-header">
                    <div class="transaction-icon">
                        <i class="fas fa-exchange-alt"></i>
                    </div>
                    <div class="transaction-detail-title" id="transaction-detail-title">Investimento Omega Speedmaster</div>
                    <div class="transaction-detail-amount negative" id="transaction-detail-amount">-€200.00</div>
                </div>
                <div class="transaction-detail-info">
                    <div class="transaction-detail-item">
                        <div class="detail-label">Data</div>
                        <div class="detail-value" id="transaction-detail-date">2 Maggio 2025</div>
                    </div>
                    <div class="transaction-detail-item">
                        <div class="detail-label">Stato</div>
                        <div class="detail-value" id="transaction-detail-status">Completata</div>
                    </div>
                    <div class="transaction-detail-item">
                        <div class="detail-label">ID Transazione</div>
                        <div class="detail-value" id="transaction-detail-id">TRX-12345678</div>
                    </div>
                    <div class="transaction-detail-item">
                        <div class="detail-label">Tipo</div>
                        <div class="detail-value" id="transaction-detail-type">Investimento</div>
                    </div>
                </div>
                <div class="transaction-detail-description">
                    <div class="detail-label">Descrizione</div>
                    <div class="detail-value" id="transaction-detail-description">
                        Investimento nell'opportunità Omega Speedmaster. L'importo è stato detratto dal tuo saldo wallet e aggiunto all'opportunità di investimento.
                    </div>
                </div>
                <div class="transaction-detail-actions">
                    <button class="btn btn-primary" onclick="openProductDetail('omega-speedmaster')">Visualizza Opportunità</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Marketplace Item Detail Modal -->
    <div class="modal" id="marketplace-item-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Dettaglio Prodotto</h2>
                <button class="close-modal" onclick="closeModal('marketplace-item-modal')">&times;</button>
            </div>
            <div class="marketplace-item-detail">
                <div class="marketplace-item-images">
                    <div class="marketplace-main-image" style="background-image: url('/api/placeholder/400/400')"></div>
                    <div class="marketplace-thumbnails">
                        <div class="marketplace-thumbnail active" style="background-image: url('/api/placeholder/100/100')" onclick="changeMarketplaceImage(this)"></div>
                        <div class="marketplace-thumbnail" style="background-image: url('/api/placeholder/100/100')" onclick="changeMarketplaceImage(this)"></div>
                        <div class="marketplace-thumbnail" style="background-image: url('/api/placeholder/100/100')" onclick="changeMarketplaceImage(this)"></div>
                        <div class="marketplace-thumbnail" style="background-image: url('/api/placeholder/100/100')" onclick="changeMarketplaceImage(this)"></div>
                    </div>
                </div>
                <div class="marketplace-item-info">
                    <div class="marketplace-item-category" id="marketplace-item-category">OROLOGI | NUOVO</div>
                    <div class="marketplace-item-name" id="marketplace-item-name">Rolex Submariner Date 41mm</div>
                    <div class="marketplace-item-price" id="marketplace-item-price">€14,500</div>
                    <div class="marketplace-item-seller">
                        <div class="seller-avatar">
                            <i class="fas fa-store"></i>
                        </div>
                        <div class="seller-info">
                            <div class="seller-name" id="marketplace-seller-name">Luxury Watch Store</div>
                            <div class="seller-rating">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i>
                                <span id="marketplace-seller-rating">4.9 (86 recensioni)</span>
                            </div>
                        </div>
                    </div>
                    <div class="marketplace-item-description">
                        <h3 class="section-title">Descrizione</h3>
                        <p id="marketplace-item-description">
                            Rolex Submariner Date 41mm, referenza 126610LN. Orologio nuovo con scatola e garanzia, completo di tutti gli accessori. Movimento automatico, cassa in acciaio inossidabile, lunetta girevole in ceramica nera, quadrante nero con indici luminescenti, datario a ore 3 con lente di ingrandimento Cyclops.
                        </p>
                    </div>
                    <div class="marketplace-item-details">
                        <h3 class="section-title">Dettagli</h3>
                        <div class="detail-grid" id="marketplace-item-details-grid">
                            <div class="detail-item">
                                <div class="detail-label">MARCA</div>
                                <div class="detail-value">Rolex</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">MODELLO</div>
                                <div class="detail-value">Submariner Date</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">REFERENZA</div>
                                <div class="detail-value">126610LN</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">ANNO</div>
                                <div class="detail-value">2025</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">CONDIZIONI</div>
                                <div class="detail-value">Nuovo</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">GARANZIA</div>
                                <div class="detail-value">5 anni</div>
                            </div>
                        </div>
                    </div>
                    <div class="marketplace-item-actions">
                        <button class="btn btn-primary" onclick="buyMarketplaceItem()">Acquista Ora</button>
                        <button class="btn btn-secondary" onclick="contactSeller()">Contatta Venditore</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Wallet Modal -->
    <div class="modal" id="wallet-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Wallet</h2>
                <button class="close-modal" onclick="closeModal('wallet-modal')">&times;</button>
            </div>
            <div class="wallet-balance">
                <div class="balance-label">Il tuo saldo disponibile:</div>
                <div class="balance-amount" id="wallet-balance">€2,345.00</div>
            </div>
            <div class="wallet-actions">
                <a href="#" class="wallet-action" onclick="showWalletAction('deposit', event)">
                    <div class="action-icon">
                        <i class="fas fa-arrow-down"></i>
                    </div>
                    <div class="action-label">Deposita</div>
                </a>
                <a href="#" class="wallet-action" onclick="showWalletAction('withdraw', event)">
                    <div class="action-icon">
                        <i class="fas fa-arrow-up"></i>
                    </div>
                    <div class="action-label">Preleva</div>
                </a>
            </div>
            
            <!-- Deposit/Withdraw Forms -->
            <div class="wallet-action-modal" id="deposit-form">
                <div class="wallet-action-header">Deposita Fondi</div>
                <div class="wallet-action-form">
                    <div class="wallet-method-selector">
                        <div class="wallet-method active" onclick="selectPaymentMethod('card', this)">Carta</div>
                        <div class="wallet-method" onclick="selectPaymentMethod('bank', this)">Bonifico</div>
                        <div class="wallet-method" onclick="selectPaymentMethod('paypal', this)">PayPal</div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Importo (€)</label>
                        <input type="number" class="form-input" id="deposit-amount" placeholder="Es. 1000" min="10">
                    </div>
                    <div id="card-method-fields">
                        <div class="form-group">
                            <label class="form-label">Numero Carta</label>
                            <input type="text" class="form-input" placeholder="1234 5678 9012 3456">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Titolare</label>
                            <input type="text" class="form-input" placeholder="Nome Cognome">
                        </div>
                        <div class="form-group" style="display: flex; gap: 10px;">
                            <div style="flex: 1;">
                                <label class="form-label">Scadenza</label>
                                <input type="text" class="form-input" placeholder="MM/AA">
                            </div>
                            <div style="flex: 1;">
                                <label class="form-label">CVV</label>
                                <input type="text" class="form-input" placeholder="123">
                            </div>
                        </div>
                    </div>
                    <div id="bank-method-fields" style="display: none;">
                        <div class="form-group">
                            <label class="form-label">Le nostre coordinate bancarie</label>
                            <div class="detail-item" style="margin-bottom: 10px;">
                                <div class="detail-label">IBAN</div>
                                <div class="detail-value">IT60X0542811101000000123456</div>
                            </div>
                            <div class="detail-item" style="margin-bottom: 10px;">
                                <div class="detail-label">Beneficiario</div>
                                <div class="detail-value">Society S.p.A.</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Causale</div>
                                <div class="detail-value">Deposito Wallet [TUO NOME]</div>
                            </div>
                        </div>
                    </div>
                    <div id="paypal-method-fields" style="display: none;">
                        <div class="form-group">
                            <label class="form-label">Email PayPal</label>
                            <input type="email" class="form-input" placeholder="email@esempio.com">
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="processDeposit()">Deposita</button>
                </div>
            </div>
            
            <div class="wallet-action-modal" id="withdraw-form">
                <div class="wallet-action-header">Preleva Fondi</div>
                <div class="wallet-action-form">
                    <div class="form-group">
                        <label class="form-label">Importo (€)</label>
                        <input type="number" class="form-input" id="withdraw-amount" placeholder="Es. 500" min="10" max="2345">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Metodo di prelievo</label>
                        <select class="form-select" id="withdraw-method">
                            <option value="bank">Bonifico bancario</option>
                            <option value="paypal">PayPal</option>
                        </select>
                    </div>
                    <div id="withdraw-bank-fields">
                        <div class="form-group">
                            <label class="form-label">IBAN</label>
                            <input type="text" class="form-input" placeholder="IT...">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Intestatario</label>
                            <input type="text" class="form-input" placeholder="Nome Cognome">
                        </div>
                    </div>
                    <div id="withdraw-paypal-fields" style="display: none;">
                        <div class="form-group">
                            <label class="form-label">Email PayPal</label>
                            <input type="email" class="form-input" placeholder="email@esempio.com">
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="processWithdraw()">Preleva</button>
                </div>
            </div>
            
            <div class="wallet-tabs">
                <div class="wallet-tab active" onclick="showWalletTab('transactions', this)">Transazioni</div>
                <div class="wallet-tab" onclick="showWalletTab('investments', this)">Investimenti</div>
                <div class="wallet-tab" onclick="showWalletTab('opportunities', this)">Le Mie Opportunità</div>
            </div>
            
            <div class="wallet-content active" id="transactions-tab">
                <ul class="transaction-list" id="transaction-list">
                    <li class="transaction-item" onclick="showTransactionDetail('omega-speedmaster-investment')">
                        <div class="transaction-info">
                            <div class="transaction-name">Investimento Omega Speedmaster</div>
                            <div class="transaction-date">2 Maggio 2025</div>
                        </div>
                        <div class="transaction-amount negative">-€200.00</div>
                    </li>
                    <li class="transaction-item" onclick="showTransactionDetail('rolex-gmt-return')">
                        <div class="transaction-info">
                            <div class="transaction-name">Ritorno Investimento Rolex GMT</div>
                            <div class="transaction-date">30 Aprile 2025</div>
                        </div>
                        <div class="transaction-amount positive">+€275.50</div>
                    </li>
                    <li class="transaction-item" onclick="showTransactionDetail('deposit')">
                        <div class="transaction-info">
                            <div class="transaction-name">Deposito</div>
                            <div class="transaction-date">28 Aprile 2025</div>
                        </div>
                        <div class="transaction-amount positive">+€1,000.00</div>
                    </li>
                    <li class="transaction-item" onclick="showTransactionDetail('hermes-investment')">
                        <div class="transaction-info">
                            <div class="transaction-name">Investimento Borsa Hermès</div>
                            <div class="transaction-date">25 Aprile 2025</div>
                        </div>
                        <div class="transaction-amount negative">-€500.00</div>
                    </li>
                </ul>
            </div>
            
            <div class="wallet-content" id="investments-tab">
                <div class="investment-card" onclick="openProductDetail('omega-speedmaster', null, true)">
                    <div class="investment-header">
                        <div class="investment-title">Omega Speedmaster</div>
                        <div class="investment-status">Attivo</div>
                    </div>
                    <div class="investment-body">
                        <div class="investment-details">
                            <div class="investment-detail">
                                <div class="detail-label">INVESTITO</div>
                                <div class="detail-value">€200.00</div>
                            </div>
                            <div class="investment-detail">
                                <div class="detail-label">QUOTA</div>
                                <div class="detail-value">2.5%</div>
                            </div>
                            <div class="investment-detail">
                                <div class="detail-label">RENDIMENTO</div>
                                <div class="detail-value">16.67%</div>
                            </div>
                        </div>
                        <div class="investment-progress">
                            <div class="progress-bar" style="width: 58.75%;"></div>
                        </div>
                        <div class="investment-status">Data prevista di conclusione: 12 Maggio 2025</div>
                    </div>
                </div>
                
                <div class="investment-card" onclick="openProductDetail('hermes-kelly', null, true)">
                    <div class="investment-header">
                        <div class="investment-title">Hermès Kelly</div>
                        <div class="investment-status">Attivo</div>
                    </div>
                    <div class="investment-body">
                        <div class="investment-details">
                            <div class="investment-detail">
                                <div class="detail-label">INVESTITO</div>
                                <div class="detail-value">€500.00</div>
                            </div>
                            <div class="investment-detail">
                                <div class="detail-label">QUOTA</div>
                                <div class="detail-value">8.33%</div>
                            </div>
                            <div class="investment-detail">
                                <div class="detail-label">RENDIMENTO</div>
                                <div class="detail-value">18%</div>
                            </div>
                        </div>
                        <div class="investment-progress">
                            <div class="progress-bar" style="width: 79.17%;"></div>
                        </div>
                        <div class="investment-status">Data prevista di conclusione: 20 Maggio 2025</div>
                    </div>
                </div>
                
                <div class="investment-card" onclick="openProductDetail('rolex-daytona', null, true)">
                    <div class="investment-header">
                        <div class="investment-title">Rolex Daytona</div>
                        <div class="investment-status" style="background-color: #43A047;">Completata</div>
                    </div>
                    <div class="investment-body">
                        <div class="investment-details">
                            <div class="investment-detail">
                                <div class="detail-label">INVESTITO</div>
                                <div class="detail-value">€250.00</div>
                            </div>
                            <div class="investment-detail">
                                <div class="detail-label">GUADAGNO</div>
                                <div class="detail-value">€275.50</div>
                            </div>
                            <div class="investment-detail">
                                <div class="detail-label">ROI</div>
                                <div class="detail-value">+10.2%</div>
                            </div>
                        </div>
                        <div class="investment-progress">
                            <div class="progress-bar" style="width: 100%;"></div>
                        </div>
                        <div class="investment-status">Completata il 30 Aprile 2025</div>
                    </div>
                </div>
            </div>
<div class="wallet-content" id="opportunities-tab">
                <div class="investment-card" onclick="openProductDetail('rolex-daytona', null, true)">
                    <div class="investment-header">
                        <div class="investment-title">Rolex Daytona</div>
                        <div class="investment-status" style="background-color: #43A047;">Completata</div>
                    </div>
                    <div class="investment-body">
                        <div class="investment-details">
                            <div class="investment-detail">
                                <div class="detail-label">CREATA</div>
                                <div class="detail-value">15 Aprile</div>
                            </div>
                            <div class="investment-detail">
                                <div class="detail-label">INVESTIMENTI</div>
                                <div class="detail-value">€10.000</div>
                            </div>
                            <div class="investment-detail">
                                <div class="detail-label">PROFITTO</div>
                                <div class="detail-value">€1.800</div>
                            </div>
                        </div>
                        <div class="investment-progress">
                            <div class="progress-bar" style="width: 100%;"></div>
                        </div>
                        <div class="investment-status">Completata il 28 Aprile 2025</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Profile Modal -->
    <div class="modal" id="profile-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Profilo</h2>
                <button class="close-modal" onclick="closeModal('profile-modal')">&times;</button>
            </div>
            
            <div id="profile-main">
                <div class="profile-header">
                    <div class="profile-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="profile-name">Marco Rossi</div>
                    <div class="profile-email">marco.rossi@example.com</div>
                </div>
                <div class="profile-stats">
                    <div class="stat-item" onclick="showProfileSection('investments')">
                        <div class="stat-value">3</div>
                        <div class="stat-label">Investimenti</div>
                    </div>
                    <div class="stat-item" onclick="showProfileSection('opportunities')">
                        <div class="stat-value">1</div>
                        <div class="stat-label">Opportunità</div>
                    </div>
                    <div class="stat-item" onclick="showProfileSection('earnings')">
                        <div class="stat-value">€3.5k</div>
                        <div class="stat-label">Guadagni</div>
                    </div>
                </div>
                <ul class="profile-menu">
                    <li class="menu-item-profile" onclick="showProfileSection('settings')">
                        <div class="menu-icon"><i class="fas fa-cog"></i></div>
                        <div>Impostazioni Account</div>
                    </li>
                    <li class="menu-item-profile" onclick="showProfileSection('payment')">
                        <div class="menu-icon"><i class="fas fa-wallet"></i></div>
                        <div>Metodi di Pagamento</div>
                    </li>
                    <li class="menu-item-profile" onclick="showProfileSection('notifications')">
                        <div class="menu-icon"><i class="fas fa-bell"></i></div>
                        <div>Notifiche</div>
                    </li>
                    <li class="menu-item-profile" onclick="showProfileSection('security')">
                        <div class="menu-icon"><i class="fas fa-shield-alt"></i></div>
                        <div>Privacy e Sicurezza</div>
                    </li>
                    <li class="menu-item-profile" onclick="showProfileSection('help')">
                        <div class="menu-icon"><i class="fas fa-question-circle"></i></div>
                        <div>Aiuto e Supporto</div>
                    </li>
                    <li class="menu-item-profile" onclick="logout()">
                        <div class="menu-icon"><i class="fas fa-sign-out-alt"></i></div>
                        <div>Logout</div>
                    </li>
                </ul>
            </div>
            
            <!-- Profile Sections -->
            <div class="profile-section" id="profile-investments">
                <div class="profile-section-header">
                    <button class="back-to-profile" onclick="backToProfile()"><i class="fas fa-arrow-left"></i></button>
                    <h3 class="profile-section-title">I Miei Investimenti</h3>
                </div>
                <div class="investment-card" onclick="openProductDetail('omega-speedmaster', null, true)">
                    <div class="investment-header">
                        <div class="investment-title">Omega Speedmaster</div>
                        <div class="investment-status">Attivo</div>
                    </div>
                    <div class="investment-body">
                        <div class="investment-details">
                            <div class="investment-detail">
                                <div class="detail-label">INVESTITO</div>
                                <div class="detail-value">€200.00</div>
                            </div>
                            <div class="investment-detail">
                                <div class="detail-label">QUOTA</div>
                                <div class="detail-value">2.5%</div>
                            </div>
                            <div class="investment-detail">
                                <div class="detail-label">RENDIMENTO</div>
                                <div class="detail-value">16.67%</div>
                            </div>
                        </div>
                        <div class="investment-progress">
                            <div class="progress-bar" style="width: 58.75%;"></div>
                        </div>
                        <div class="investment-status">Data prevista di conclusione: 12 Maggio 2025</div>
                    </div>
                </div>
                
                <div class="investment-card" onclick="openProductDetail('hermes-kelly', null, true)">
                    <div class="investment-header">
                        <div class="investment-title">Hermès Kelly</div>
                        <div class="investment-status">Attivo</div>
                    </div>
                    <div class="investment-body">
                        <div class="investment-details">
                            <div class="investment-detail">
                                <div class="detail-label">INVESTITO</div>
                                <div class="detail-value">€500.00</div>
                            </div>
                            <div class="investment-detail">
                                <div class="detail-label">QUOTA</div>
                                <div class="detail-value">8.33%</div>
                            </div>
                            <div class="investment-detail">
                                <div class="detail-label">RENDIMENTO</div>
                                <div class="detail-value">18%</div>
                            </div>
                        </div>
                        <div class="investment-progress">
                            <div class="progress-bar" style="width: 79.17%;"></div>
                        </div>
                        <div class="investment-status">Data prevista di conclusione: 20 Maggio 2025</div>
                    </div>
                </div>
                
                <div class="investment-card">
                    <div class="investment-header">
                        <div class="investment-title">Rolex GMT Master II</div>
                        <div class="investment-status" style="background-color: #43A047;">Completato</div>
                    </div>
                    <div class="investment-body">
                        <div class="investment-details">
                            <div class="investment-detail">
                                <div class="detail-label">INVESTITO</div>
                                <div class="detail-value">€250.00</div>
                            </div>
                            <div class="investment-detail">
                                <div class="detail-label">QUOTA</div>
                                <div class="detail-value">2.1%</div>
                            </div>
                            <div class="investment-detail">
                                <div class="detail-label">RENDIMENTO</div>
                                <div class="detail-value">19.2%</div>
                            </div>
                        </div>
                        <div class="investment-progress">
                            <div class="progress-bar" style="width: 100%;"></div>
                        </div>
                        <div class="investment-status">Completato il 30 Aprile 2025</div>
                    </div>
                </div>
            </div>
            
            <div class="profile-section" id="profile-opportunities">
                <div class="profile-section-header">
                    <button class="back-to-profile" onclick="backToProfile()"><i class="fas fa-arrow-left"></i></button>
                    <h3 class="profile-section-title">Le Mie Opportunità</h3>
                </div>
                <div class="investment-card" onclick="openProductDetail('rolex-daytona', null, true)">
                    <div class="investment-header">
                        <div class="investment-title">Rolex Daytona</div>
                        <div class="investment-status" style="background-color: #43A047;">Completata</div>
                    </div>
                    <div class="investment-body">
                        <div class="investment-details">
                            <div class="investment-detail">
                                <div class="detail-label">CREATA</div>
                                <div class="detail-value">15 Aprile</div>
                            </div>
                            <div class="investment-detail">
                                <div class="detail-label">INVESTIMENTI</div>
                                <div class="detail-value">€10.000</div>
                            </div>
                            <div class="investment-detail">
                                <div class="detail-label">PROFITTO</div>
                                <div class="detail-value">€1.800</div>
                            </div>
                        </div>
                        <div class="investment-progress">
                            <div class="progress-bar" style="width: 100%;"></div>
                        </div>
                        <div class="investment-status">Completata il 28 Aprile 2025</div>
                    </div>
                </div>
            </div>
            
            <div class="profile-section" id="profile-earnings">
                <div class="profile-section-header">
                    <button class="back-to-profile" onclick="backToProfile()"><i class="fas fa-arrow-left"></i></button>
                    <h3 class="profile-section-title">I Miei Guadagni</h3>
                </div>
                <div class="detail-grid" style="margin-top: 20px;">
                    <div class="detail-item">
                        <div class="detail-label">GUADAGNI TOTALI</div>
                        <div class="detail-value">€3,500.00</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">QUESTO MESE</div>
                        <div class="detail-value">€475.50</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">RENDIMENTO MEDIO</div>
                        <div class="detail-value">18.2%</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">INVESTI. ATTIVI</div>
                        <div class="detail-value">€700.00</div>
                    </div>
                </div>
                <h3 class="section-title" style="margin-top: 20px;">Guadagni Recenti</h3>
                <ul class="transaction-list">
                    <li class="transaction-item">
                        <div class="transaction-info">
                            <div class="transaction-name">Ritorno Investimento Rolex GMT</div>
                            <div class="transaction-date">30 Aprile 2025</div>
                        </div>
                        <div class="transaction-amount positive">+€275.50</div>
                    </li>
                    <li class="transaction-item">
                        <div class="transaction-info">
                            <div class="transaction-name">Ritorno Investimento Patek Philippe</div>
                            <div class="transaction-date">15 Aprile 2025</div>
                        </div>
                        <div class="transaction-amount positive">+€450.00</div>
                    </li>
                    <li class="transaction-item">
                        <div class="transaction-info">
                            <div class="transaction-name">Ritorno Investimento Chanel</div>
                            <div class="transaction-date">2 Aprile 2025</div>
                        </div>
                        <div class="transaction-amount positive">+€320.00</div>
                    </li>
                </ul>
            </div>
            
            <div class="profile-section" id="profile-settings">
                <div class="profile-section-header">
                    <button class="back-to-profile" onclick="backToProfile()"><i class="fas fa-arrow-left"></i></button>
                    <h3 class="profile-section-title">Impostazioni Account</h3>
                </div>
                <div class="form-group">
                    <label class="form-label">Nome</label>
                    <input type="text" class="form-input" value="Marco" placeholder="Nome">
                </div>
                <div class="form-group">
                    <label class="form-label">Cognome</label>
                    <input type="text" class="form-input" value="Rossi" placeholder="Cognome">
                </div>
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" value="marco.rossi@example.com" placeholder="Email">
                </div>
                <div class="form-group">
                    <label class="form-label">Telefono</label>
                    <input type="tel" class="form-input" value="+39 123 456 7890" placeholder="Telefono">
                </div>
                <button class="btn btn-primary">Salva Modifiche</button>
            </div>
            
            <div class="profile-section" id="profile-payment">
                <div class="profile-section-header">
                    <button class="back-to-profile" onclick="backToProfile()"><i class="fas fa-arrow-left"></i></button>
                    <h3 class="profile-section-title">Metodi di Pagamento</h3>
                </div>
                <div class="card-list">
                    <div class="payment-card">
                        <div class="card-type">
                            <i class="fab fa-cc-visa"></i>
                            <span>VISA ••••1234</span>
                        </div>
                        <div class="card-actions">
                            <button class="card-action-btn"><i class="fas fa-pencil-alt"></i></button>
                            <button class="card-action-btn"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>
                    <div class="payment-card">
                        <div class="card-type">
                            <i class="fab fa-cc-mastercard"></i>
                            <span>MASTERCARD ••••5678</span>
                        </div>
                        <div class="card-actions">
                            <button class="card-action-btn"><i class="fas fa-pencil-alt"></i></button>
                            <button class="card-action-btn"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>
                </div>
                <button class="btn btn-primary" style="margin-top: 20px;">Aggiungi Nuovo Metodo</button>
            </div>
            
            <div class="profile-section" id="profile-notifications">
                <div class="profile-section-header">
                    <button class="back-to-profile" onclick="backToProfile()"><i class="fas fa-arrow-left"></i></button>
                    <h3 class="profile-section-title">Notifiche</h3>
                </div>
                <div class="notification-settings">
                    <div class="notification-option">
                        <div class="notification-info">
                            <div class="notification-title">Email</div>
                            <div class="notification-description">Ricevi notifiche via email</div>
                        </div>
                        <div class="notification-toggle">
                            <input type="checkbox" id="email-toggle" checked>
                            <label for="email-toggle"></label>
                        </div>
                    </div>
                    <div class="notification-option">
                        <div class="notification-info">
                            <div class="notification-title">Push</div>
                            <div class="notification-description">Ricevi notifiche push sul dispositivo</div>
                        </div>
                        <div class="notification-toggle">
                            <input type="checkbox" id="push-toggle" checked>
                            <label for="push-toggle"></label>
                        </div>
                    </div>
                    <div class="notification-option">
                        <div class="notification-info">
                            <div class="notification-title">SMS</div>
                            <div class="notification-description">Ricevi notifiche via SMS</div>
                        </div>
                        <div class="notification-toggle">
                            <input type="checkbox" id="sms-toggle">
                            <label for="sms-toggle"></label>
                        </div>
                    </div>
                </div>
                <div class="notification-categories">
                    <h4 class="section-title">Categorie di notifiche</h4>
                    <div class="notification-option">
                        <div class="notification-info">
                            <div class="notification-title">Nuove opportunità</div>
                        </div>
                        <div class="notification-toggle">
                            <input type="checkbox" id="opportunities-toggle" checked>
                            <label for="opportunities-toggle"></label>
                        </div>
                    </div>
                    <div class="notification-option">
                        <div class="notification-info">
                            <div class="notification-title">Aggiornamenti investimenti</div>
                        </div>
                        <div class="notification-toggle">
                            <input type="checkbox" id="investments-toggle" checked>
                            <label for="investments-toggle"></label>
                        </div>
                    </div>
                    <div class="notification-option">
                        <div class="notification-info">
                            <div class="notification-title">Messaggi</div>
                        </div>
                        <div class="notification-toggle">
                            <input type="checkbox" id="messages-toggle" checked>
                            <label for="messages-toggle"></label>
                        </div>
                    </div>
                    <div class="notification-option">
                        <div class="notification-info">
                            <div class="notification-title">News di mercato</div>
                        </div>
                        <div class="notification-toggle">
                            <input type="checkbox" id="news-toggle">
                            <label for="news-toggle"></label>
                        </div>
                    </div>
                </div>
                <button class="btn btn-primary" style="margin-top: 20px;">Salva Preferenze</button>
            </div>
            
            <div class="profile-section" id="profile-security">
                <div class="profile-section-header">
                    <button class="back-to-profile" onclick="backToProfile()"><i class="fas fa-arrow-left"></i></button>
                    <h3 class="profile-section-title">Privacy e Sicurezza</h3>
                </div>
                <div class="form-group">
                    <label class="form-label">Cambia Password</label>
                    <input type="password" class="form-input" placeholder="Password attuale">
                </div>
                <div class="form-group">
                    <input type="password" class="form-input" placeholder="Nuova password">
                </div>
                <div class="form-group">
                    <input type="password" class="form-input" placeholder="Conferma nuova password">
                </div>
                <button class="btn btn-primary" style="margin-bottom: 20px;">Aggiorna Password</button>
                
                <div class="security-options">
                    <div class="security-option">
                        <div class="security-info">
                            <div class="security-title">Autenticazione a due fattori</div>
                            <div class="security-description">Aggiungi un ulteriore livello di sicurezza</div>
                        </div>
                        <div class="security-toggle">
                            <input type="checkbox" id="2fa-toggle">
                            <label for="2fa-toggle"></label>
                        </div>
                    </div>
                    <div class="security-option">
                        <div class="security-info">
                            <div class="security-title">Notifiche di accesso</div>
                            <div class="security-description">Ricevi notifiche quando il tuo account viene utilizzato</div>
                        </div>
                        <div class="security-toggle">
                            <input type="checkbox" id="login-toggle" checked>
                            <label for="login-toggle"></label>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="profile-section" id="profile-help">
                <div class="profile-section-header">
                    <button class="back-to-profile" onclick="backToProfile()"><i class="fas fa-arrow-left"></i></button>
                    <h3 class="profile-section-title">Aiuto e Supporto</h3>
                </div>
                <div class="help-sections">
                    <div class="help-section">
                        <h4 class="help-title">FAQ</h4>
                        <ul class="help-list">
                            <li class="help-item">Come funziona Society?</li>
                            <li class="help-item">Come vengono selezionate le opportunità?</li>
                            <li class="help-item">Quanto sono sicuri gli investimenti?</li>
                            <li class="help-item">Come posso diventare un dealer?</li>
                            <li class="help-item">Come vengono calcolati i rendimenti?</li>
                        </ul>
                    </div>
                    <div class="help-section">
                        <h4 class="help-title">Contatta il supporto</h4>
                        <div class="form-group">
                            <label class="form-label">Oggetto</label>
                            <input type="text" class="form-input" placeholder="Es. Problemi con il deposito">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Messaggio</label>
                            <textarea class="form-textarea" placeholder="Descrivi il tuo problema..."></textarea>
                        </div>
                        <button class="btn btn-primary">Invia Richiesta</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Search Modal -->
    <div class="modal" id="search-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Cerca</h2>
                <button class="close-modal" onclick="closeModal('search-modal')">&times;</button>
            </div>
            <div class="search-container">
                <input type="text" class="search-input" id="search-input" placeholder="Cerca opportunità, dealer, categorie..." onkeyup="searchItems()">
                <button class="clear-search" onclick="clearSearch()"><i class="fas fa-times"></i></button>
            </div>
            <div class="filter-pills">
                <div class="filter-pill active" onclick="filterSearch('all', this)">Tutti</div>
                <div class="filter-pill" onclick="filterSearch('watches', this)">Orologi</div>
                <div class="filter-pill" onclick="filterSearch('bags', this)">Borse</div>
                <div class="filter-pill" onclick="filterSearch('jewels', this)">Gioielli</div>
                <div class="filter-pill" onclick="filterSearch('wine', this)">Vini</div>
                <div class="filter-pill" onclick="filterSearch('whiskey', this)">Whiskey</div>
                <div class="filter-pill" onclick="filterSearch('cars', this)">Automobili</div>
                <div class="filter-pill" onclick="filterSearch('art', this)">Arte</div>
                <div class="filter-pill" onclick="filterSearch('realestate', this)">Real Estate</div>
                <div class="filter-pill" onclick="filterSearch('dealers', this)">Dealers</div>
            </div>
            <div class="recent-searches" id="recent-searches">
                <h3 class="section-title">Ricerche Recenti</h3>
                <ul class="search-history" id="search-history">
                    <li class="search-item" onclick="setSearch('Rolex Daytona')">
                        <div class="search-icon"><i class="fas fa-history"></i></div>
                        <div class="search-text">Rolex Daytona</div>
                        <button class="remove-search" onclick="removeSearch(this, event)"><i class="fas fa-times"></i></button>
                    </li>
                    <li class="search-item" onclick="setSearch('Hermès Kelly')">
                        <div class="search-icon"><i class="fas fa-history"></i></div>
                        <div class="search-text">Hermès Kelly</div>
                        <button class="remove-search" onclick="removeSearch(this, event)"><i class="fas fa-times"></i></button>
                    </li>
                    <li class="search-item" onclick="setSearch('Premium Reseller')">
                        <div class="search-icon"><i class="fas fa-history"></i></div>
                        <div class="search-text">Premium Reseller</div>
                        <button class="remove-search" onclick="removeSearch(this, event)"><i class="fas fa-times"></i></button>
                    </li>
                </ul>
            </div>
            <div id="search-results"></div>
        </div>
    </div>
    
    <!-- Notifications Modal -->
    <div class="modal" id="notifications-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Notifiche</h2>
                <button class="close-modal" onclick="closeModal('notifications-modal')">&times;</button>
            </div>
            <ul class="notification-list">
                <li class="notification-item unread" onclick="handleNotification('investment-complete')">
                    <div class="notification-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="notification-content">
                        <div class="notification-text">Il tuo investimento in Rolex Daytona è stato completato con successo!</div>
                        <div class="notification-time">10 minuti fa</div>
                    </div>
                </li>
                <li class="notification-item unread" onclick="handleNotification('community-invite')">
                    <div class="notification-icon">
                        <i class="fas fa-user-plus"></i>
                    </div>
                    <div class="notification-content">
                        <div class="notification-text">Luxury Brand ti ha invitato a unirti alla loro community esclusiva</div>
                        <div class="notification-time">2 ore fa</div>
                    </div>
                </li>
                <li class="notification-item unread" onclick="handleNotification('new-opportunity')">
                    <div class="notification-icon">
                        <i class="fas fa-percentage"></i>
                    </div>
                    <div class="notification-content">
                        <div class="notification-text">Nuova opportunità di investimento: Patek Philippe con rendimento previsto del 15%</div>
                        <div class="notification-time">5 ore fa</div>
                    </div>
                </li>
                <li class="notification-item" onclick="handleNotification('profit-received')">
                    <div class="notification-icon">
                        <i class="fas fa-money-bill-wave"></i>
                    </div>
                    <div class="notification-content">
                        <div class="notification-text">Hai ricevuto un guadagno di €275.50 dal tuo investimento in Rolex GMT</div>
                        <div class="notification-time">Ieri</div>
                    </div>
                </li>
                <li class="notification-item" onclick="handleNotification('status-update')">
                    <div class="notification-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="notification-content">
                        <div class="notification-text">Hai raggiunto lo status di investitore Silver! Sblocca nuovi vantaggi</div>
                        <div class="notification-time">2 giorni fa</div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    
    <!-- Favorites Modal -->
    <div class="modal" id="favorites-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Preferiti</h2>
                <button class="close-modal" onclick="closeModal('favorites-modal')">&times;</button>
            </div>
            <div class="products-grid" id="favorites-grid">
                <!-- I preferiti saranno aggiunti dinamicamente qui -->
            </div>
            <div id="favorites-empty" class="favorites-empty" style="display: none;">
                <div class="empty-icon">
                    <i class="far fa-heart"></i>
                </div>
                <div class="empty-text">Non hai ancora aggiunto preferiti</div>
                <div class="browse-btn" onclick="goToHome(); closeModal('favorites-modal');">Esplora Opportunità</div>
            </div>
        </div>
    </div>
<!-- Add Opportunity Modal -->
    <div class="modal" id="add-opportunity-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Inserisci Opportunità</h2>
                <button class="close-modal" onclick="closeModal('add-opportunity-modal')">&times;</button>
            </div>
            <form id="opportunity-form">
                <div class="photo-upload">
                    <div class="upload-icon">
                        <i class="fas fa-camera"></i>
                    </div>
                    <div class="upload-text">Carica foto del prodotto<br>(max 5 immagini)</div>
                    <input type="file" accept="image/*" onchange="previewImage(this)">
                    <div class="upload-preview" id="image-preview"></div>
                </div>
                <div class="form-group">
                    <label class="form-label">Categoria</label>
                    <select class="form-select" id="category-select" required>
                        <option value="">Seleziona categoria</option>
                        <option value="orologi">Orologi</option>
                        <option value="borse">Borse</option>
                        <option value="gioielli">Gioielli</option>
                        <option value="vini">Vini</option>
                        <option value="whiskey">Whiskey</option>
                        <option value="auto">Automobili</option>
                        <option value="arte">Arte</option>
                        <option value="realestate">Real Estate</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Nome Prodotto</label>
                    <input type="text" class="form-input" id="product-name" placeholder="Es. Rolex Daytona Ref. 116500LN" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Descrizione</label>
                    <textarea class="form-textarea" id="product-description" placeholder="Descrivi l'opportunità di investimento..." required></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Prezzo di Acquisto (€)</label>
                    <input type="number" class="form-input" id="purchase-price" placeholder="Es. 25000" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Range ROI (%)</label>
                    <div class="range-inputs">
                        <div class="range-input">
                            <input type="number" class="form-input" id="roi-min" placeholder="Min (es. 15)" min="1" required>
                        </div>
                        <div class="range-input">
                            <input type="number" class="form-input" id="roi-max" placeholder="Max (es. 20)" min="1" required>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Range PT (giorni)</label>
                    <div class="range-inputs">
                        <div class="range-input">
                            <input type="number" class="form-input" id="pt-min" placeholder="Min (es. 30)" min="1" required>
                        </div>
                        <div class="range-input">
                            <input type="number" class="form-input" id="pt-max" placeholder="Max (es. 45)" min="1" required>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Il tuo Investimento (€)</label>
                    <input type="number" class="form-input" id="your-investment" placeholder="Es. 5000" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Quota Richiesta (€)</label>
                    <input type="number" class="form-input" id="requested-investment" placeholder="Es. 20000" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Quota Minima (€)</label>
                    <input type="number" class="form-input" id="minimum-investment" placeholder="Es. 100" required>
                </div>
                <button type="button" class="btn btn-primary" onclick="submitOpportunity()">Pubblica Opportunità</button>
            </form>
        </div>
    </div>
    
    <!-- Investment Success Modal -->
    <div class="modal" id="investment-success-modal">
        <div class="modal-content">
            <div class="success-modal">
                <div class="success-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="success-title">Investimento Completato!</div>
                <div class="success-message">Il tuo investimento è stato registrato con successo. Riceverai aggiornamenti sull'andamento dell'opportunità.</div>
                <div class="success-details">
                    <div class="success-detail">
                        <div class="detail-name">Prodotto:</div>
                        <div class="detail-info" id="success-product-name">Omega Speedmaster Moonwatch</div>
                    </div>
                    <div class="success-detail">
                        <div class="detail-name">Importo Investito:</div>
                        <div class="detail-info" id="success-amount">€100.00</div>
                    </div>
                    <div class="success-detail">
                        <div class="detail-name">Data Investimento:</div>
                        <div class="detail-info" id="success-date">06/05/2025</div>
                    </div>
                    <div class="success-detail">
                        <div class="detail-name">ROI Stimato:</div>
                        <div class="detail-info" id="success-roi">16.67%</div>
                    </div>
                    <div class="success-detail">
                        <div class="detail-name">Tempo Stimato:</div>
                        <div class="detail-info" id="success-time">7-10 giorni</div>
                    </div>
                </div>
                <div class="success-actions">
                    <div class="action-btn btn-outline" onclick="closeModal('investment-success-modal')">Chiudi</div>
                    <div class="action-btn btn-dark" onclick="viewInvestmentInWallet()">Visualizza nel Wallet</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Opportunity Success Modal -->
    <div class="modal" id="opportunity-success-modal">
        <div class="modal-content">
            <div class="success-modal">
                <div class="success-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="success-title">Opportunità Pubblicata!</div>
                <div class="success-message">La tua opportunità di investimento è stata pubblicata con successo. Gli utenti possono ora investire nel tuo progetto.</div>
                <div class="success-details">
                    <div class="success-detail">
                        <div class="detail-name">Prodotto:</div>
                        <div class="detail-info" id="opp-success-product-name"></div>
                    </div>
                    <div class="success-detail">
                        <div class="detail-name">Prezzo di Acquisto:</div>
                        <div class="detail-info" id="opp-success-purchase-price"></div>
                    </div>
                    <div class="success-detail">
                        <div class="detail-name">ROI Stimato:</div>
                        <div class="detail-info" id="opp-success-roi"></div>
                    </div>
                    <div class="success-detail">
                        <div class="detail-name">Tempo Stimato:</div>
                        <div class="detail-info" id="opp-success-time"></div>
                    </div>
                </div>
                <div class="success-actions">
                    <div class="action-btn btn-outline" onclick="closeModal('opportunity-success-modal')">Chiudi</div>
                    <div class="action-btn btn-dark" onclick="viewOpportunityInWallet()">Visualizza nel Wallet</div>
</div>
            </div>
        </div>
    </div>

    <script>
        // Variabili globali per lo stato dell'applicazione
        let currentPage = 'home-page';
        let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
        let userInvestments = JSON.parse(localStorage.getItem('userInvestments')) || [];
        let userOpportunities = JSON.parse(localStorage.getItem('userOpportunities')) || [];
        let userTransactions = JSON.parse(localStorage.getItem('userTransactions')) || [];
        let userWalletBalance = parseFloat(localStorage.getItem('userWalletBalance')) || 2345.00;
        let currentChat = 'dealer-premium';
        let searchHistory = JSON.parse(localStorage.getItem('searchHistory')) || ['Rolex Daytona', 'Hermès Kelly', 'Premium Reseller'];
        let chatMessages = JSON.parse(localStorage.getItem('chatMessages')) || {
            'dealer-premium': [
                { sender: 'other', text: 'Ciao! Sono interessato all\'opportunità dell\'Omega Speedmaster. Potresti darmi più informazioni?' },
                { sender: 'user', text: 'Ciao! Certo, è un\'ottima opportunità. L\'orologio ha un valore di mercato di circa 9.500€ ma abbiamo un\'offerta speciale. Prevediamo un ROI del 16.67% in circa 7-10 giorni.' },
                { sender: 'other', text: 'Qual è il rendimento previsto per gli investitori?' },
                { sender: 'user', text: 'Il rendimento previsto è del 16.67% in 7-10 giorni, con un payback time medio di 9.2 giorni per i nostri investimenti. La quota minima è di soli 50€.' }
            ],
            'dealer-luxury': [
                { sender: 'other', text: 'Buongiorno! Abbiamo appena inserito una nuova opportunità di investimento: Rolex Daytona a un prezzo speciale. Sei interessato?' }
            ],
            'gruppo-orologi': [
                { sender: 'other', text: 'Marco: Qualcuno ha esperienza con gli investimenti in Rolex?' }
            ],
            'gruppo-borse': [
                { sender: 'other', text: 'Laura: Conviene investire in Hermès o Chanel?' }
            ]
        };
        
        // Dettagli dei prodotti
        const products = {
            'omega-speedmaster': {
                title: 'OMEGA SPEEDMASTER MOONWATCH 3861 SAPPHIRE SANDWICH',
                category: 'OROLOGI',
                dealer: 'PREMIUM RESELLER',
                description: 'L\'Omega Speedmaster Moonwatch Professional è un orologio iconico con una ricca eredità. Questo modello in particolare presenta il movimento calibre 3861 con certificazione Master Chronometer, cassa in acciaio inossidabile da 42mm e quadrante nero protetto da cristallo zaffiro. Il valore di questo modello continua a crescere nel tempo, rendendolo un ottimo investimento con potenziale di rivalutazione.',
                purchasePrice: 7200,
                roi: '16.67%',
                estimatedTime: '7-10 giorni',
                dealerPT: '9.2 giorni',
                collectionStatus: '€4,700 / €8,000',
                collectionPercentage: '58.75%',
                timeRemaining: '5 giorni',
                minAmount: 50,
                maxAmount: 3300
            },
            'rolex-daytona': {
                title: 'ROLEX DAYTONA REF.116528 C',
                category: 'OROLOGI',
                dealer: 'LUXURY BRAND',
                description: 'Il Rolex Cosmograph Daytona è un orologio leggendario nel mondo delle corse automobilistiche. Questo modello in oro giallo 18k con quadrante champagne è particolarmente ricercato dai collezionisti. Dotato del movimento cronografo automatico di Rolex, è un orologio che combina prestazioni eccezionali e un design senza tempo, caratteristiche che lo rendono un investimento sicuro.',
                purchasePrice: 32000,
                roi: '18.75%',
                estimatedTime: '3-5 giorni',
                dealerPT: '4.2 giorni',
                collectionStatus: '€8,500 / €10,000',
                collectionPercentage: '85%',
                timeRemaining: '3 giorni',
                minAmount: 100,
                maxAmount: 1500
            },
            'hermes-kelly': {
                title: 'BORSA KELLY 25 IN PELLE TOGO HERMÈS COLORE BORDEAUX',
                category: 'BORSE',
                dealer: 'FASHION BAGS RESELLER',
                description: 'La Kelly di Hermès è una delle borse più iconiche e desiderate al mondo. Questo modello in pelle Togo bordeaux, dimensione 25 cm, è particolarmente ricercato per la sua versatilità e il suo colore senza tempo. Con hardware in palladio, questa borsa rappresenta un ottimo investimento grazie alla sua elevata domanda e alla limitata disponibilità.',
                purchasePrice: 18000,
                roi: '16.67%',
                estimatedTime: '20-25 giorni',
                dealerPT: '22.5 giorni',
                collectionStatus: '€4,750 / €6,000',
                collectionPercentage: '79.17%',
                timeRemaining: '20 giorni',
                minAmount: 100,
                maxAmount: 1250
            },
            'chanel-bag': {
                title: 'BORSA CHANEL IN PELLE NERA A TRACOLLA TIMELESS',
                category: 'BORSE',
                dealer: 'LUXURY BRAND',
                description: 'La Timeless di Chanel, conosciuta anche come Classic Flap, è una borsa iconica del brand francese. Questo modello in pelle di agnello nera con hardware in oro è un classico intramontabile che mantiene il suo valore nel tempo. La sua eleganza senza tempo e la crescente domanda la rendono un investimento sicuro con ottimo potenziale di rivalutazione.',
                purchasePrice: 8000,
                roi: '12.5%',
                estimatedTime: '25-30 giorni',
                dealerPT: '28.3 giorni',
                collectionStatus: '€3,000 / €3,500',
                collectionPercentage: '85.71%',
                timeRemaining: '25 giorni',
                minAmount: 50,
                maxAmount: 500
            }
        };
        
        // Inizializzazione dell'app
        document.addEventListener('DOMContentLoaded', function() {
            // Inizializza il saldo del wallet
            updateWalletBalance();
            
            // Inizializza la lista dei preferiti
            updateFavoritesList();
            
            // Collega slider a input nell'investimento
            const slider = document.getElementById('investment-slider');
            const input = document.getElementById('investment-amount');
            
            slider.addEventListener('input', function(e) {
                input.value = slider.value;
                e.stopPropagation(); // Previene la chiusura del modale
            });
            
            input.addEventListener('input', function(e) {
                if (input.value <= 3300 && input.value >= 50) {
                    slider.value = input.value;
                }
                e.stopPropagation(); // Previene la chiusura del modale
            });
            
            // Aggiorna il conteggio delle notifiche
            updateNotificationBadge();
            
            // Aggiungi event listener per Enter nella chat
            document.getElementById('chat-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage(e);
                }
            });
            
            // Nascondi i form di deposito e prelievo all'inizio
            document.getElementById('deposit-form').style.display = 'none';
            document.getElementById('withdraw-form').style.display = 'none';
            
            // Aggiorna le sezioni del wallet
            updateTransactionsList();
        });
        
        // Funzioni di navigazione
        function goToHome() {
            hideAllPages();
            document.getElementById('home-page').style.display = 'block';
            currentPage = 'home-page';
            
            // Aggiorna la navigazione inferiore
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));
            navItems[0].classList.add('active');
        }
        
        function hideAllPages() {
            document.getElementById('home-page').style.display = 'none';
            document.getElementById('news-page').style.display = 'none';
            document.getElementById('categories-page').style.display = 'none';
            document.getElementById('dealers-page').style.display = 'none';
            document.getElementById('opportunities-page').style.display = 'none';
            document.getElementById('marketplace-page').style.display = 'none';
            
            const categoryPages = document.querySelectorAll('.category-page');
            categoryPages.forEach(page => {
                page.style.display = 'none';
            });
        }
        
        function showPage(pageId) {
            hideAllPages();
            document.getElementById(pageId).style.display = 'block';
            currentPage = pageId;
            
            // Aggiorna il menu principale
            const menuItems = document.querySelectorAll('.menu-item');
            menuItems.forEach(item => item.classList.remove('active'));
            
            switch(pageId) {
                case 'news-page':
                    menuItems[0].classList.add('active');
                    break;
                case 'categories-page':
                    menuItems[1].classList.add('active');
                    break;
                case 'dealers-page':
                    menuItems[2].classList.add('active');
                    break;
                case 'opportunities-page':
                    menuItems[3].classList.add('active');
                    break;
                case 'marketplace-page':
                    menuItems[4].classList.add('active');
                    break;
            }
        }
        
        function showCategoryDetail(category) {
            hideAllPages();
            document.getElementById('category-' + category).style.display = 'block';
            currentPage = 'category-' + category;
        }
        
        function goBackToCategories() {
            hideAllPages();
            document.getElementById('categories-page').style.display = 'block';
            currentPage = 'categories-page';
        }
        
        // Funzioni per modali
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.style.display = 'flex';
            
            // Se è il modal del wallet, aggiorna il saldo
            if (modalId === 'wallet-modal') {
                updateWalletBalance();
            }
            
            // Se è il modal della community, nascondi i dettagli della community
            if (modalId === 'community-modal') {
                document.getElementById('community-list-container').style.display = 'block';
                document.querySelectorAll('.community-detail').forEach(detail => {
                    detail.style.display = 'none';
                });
            }
            
            // Se è il modal dei preferiti, aggiorna la lista
            if (modalId === 'favorites-modal') {
                updateFavoritesList();
            }
        }
        
        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.style.display = 'none';
            
            // Se è il modal del wallet, nascondi i form di deposito e prelievo
            if (modalId === 'wallet-modal') {
                document.getElementById('deposit-form').style.display = 'none';
                document.getElementById('withdraw-form').style.display = 'none';
            }
        }
        
        // Funzioni per il dettaglio del prodotto
        function openProductDetail(productId, event, fromWallet = false) {
            if (event) event.stopPropagation();
            
            const modal = document.getElementById('product-detail');
            const product = products[productId];
            
            if (product) {
                // Popola i dettagli del prodotto
                document.getElementById('product-title').textContent = product.title;
                document.getElementById('product-category').textContent = product.category;
                document.getElementById('time-remaining').textContent = product.timeRemaining + ' rimanenti';
                document.getElementById('dealer-name').textContent = product.dealer;
                document.getElementById('product-description').textContent = product.description;
                document.getElementById('purchase-price').textContent = '€' + product.purchasePrice.toFixed(2);
                document.getElementById('estimated-roi').textContent = product.roi;
                document.getElementById('estimated-time').textContent = product.estimatedTime;
                document.getElementById('dealer-pt').textContent = product.dealerPT;
                document.getElementById('collection-status').textContent = product.collectionStatus;
                document.getElementById('collection-percentage').textContent = product.collectionPercentage;
                document.getElementById('progress-bar').style.width = product.collectionPercentage;
                document.getElementById('investment-info').textContent = 'Quota minima: €' + product.minAmount + ' | Quota disponibile: €' + product.maxAmount;
                
                // Aggiorna i valori del form di investimento
                document.getElementById('investment-amount').value = product.minAmount;
                document.getElementById('investment-amount').min = product.minAmount;
                document.getElementById('investment-amount').max = product.maxAmount;
                document.getElementById('investment-slider').value = product.minAmount;
                document.getElementById('investment-slider').min = product.minAmount;
                document.getElementById('investment-slider').max = product.maxAmount;
                
                // Imposta l'icona del cuore correttamente
                const heartIcon = document.querySelector('.detail-favorite-btn i');
                if (favorites.includes(productId)) {
                    heartIcon.className = 'fas fa-heart';
                } else {
                    heartIcon.className = 'far fa-heart';
                }
                
                // Aggiorna lo stato di avanzamento
                document.getElementById('progress-bar').style.width = product.collectionPercentage;
                
                // Mostra il modal
                modal.style.display = 'block';
                
                // Assicurati che la tab delle statistiche sia attiva
                showTab('statistics', document.querySelector('.product-detail-tab'));
            }
        }
        
        function closeProductDetail() {
            const modal = document.getElementById('product-detail');
            modal.style.display = 'none';
        }
        
        // Funzioni per le tab
        function showTab(tabId, element, event) {
            if (event) event.stopPropagation();
            
            // Nascondi tutte le tab
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Mostra la tab selezionata
            document.getElementById(tabId + '-tab').classList.add('active');
            
            // Aggiorna lo stato attivo delle tab
            const tabButtons = document.querySelectorAll('.product-detail-tab');
            tabButtons.forEach(btn => {
                btn.classList.remove('active');
            });
            
            element.classList.add('active');
        }
        
        function showWalletTab(tabId, element) {
            // Nascondi tutte le tab
            const tabs = document.querySelectorAll('.wallet-content');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Mostra la tab selezionata
            document.getElementById(tabId + '-tab').classList.add('active');
            
            // Aggiorna lo stato attivo delle tab
            const tabButtons = document.querySelectorAll('.wallet-tab');
            tabButtons.forEach(btn => {
                btn.classList.remove('active');
            });
            
            element.classList.add('active');
        }
        
        function showCommunityTab(tabId, element, event) {
            if (event) event.stopPropagation();
            
            const communityId = tabId.split('-')[0]; // 'posts', 'members', 'events'
            const communityType = tabId.includes('-') ? tabId.split('-')[1] : 'orologi'; // 'orologi', 'borse', etc.
            
            // Nascondi tutte le tab
            document.getElementById('community-posts' + (communityType !== 'orologi' ? '-' + communityType : '')).style.display = 'none';
            document.getElementById('community-members' + (communityType !== 'orologi' ? '-' + communityType : '')).style.display = 'none';
            document.getElementById('community-events' + (communityType !== 'orologi' ? '-' + communityType : '')).style.display = 'none';
            
            // Mostra la tab selezionata
            if (communityId === 'posts') {
                document.getElementById('community-posts' + (communityType !== 'orologi' ? '-' + communityType : '')).style.display = 'block';
            } else if (communityId === 'members') {
                document.getElementById('community-members' + (communityType !== 'orologi' ? '-' + communityType : '')).style.display = 'block';
            } else if (communityId === 'events') {
                document.getElementById('community-events' + (communityType !== 'orologi' ? '-' + communityType : '')).style.display = 'block';
            }
            
            // Aggiorna lo stato attivo delle tab
            const tabButtons = document.querySelectorAll('.community-tab');
            tabButtons.forEach(btn => {
                btn.classList.remove('active');
            });
            
            element.classList.add('active');
        }
        
        // Funzioni per i dealer
        function showDealerTab(tabId, element) {
            // Nascondi tutte le tab
            const tabs = document.querySelectorAll('.dealer-content');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Mostra la tab selezionata
            document.getElementById('dealer-' + tabId + '-tab').classList.add('active');
            
            // Aggiorna lo stato attivo delle tab
            const tabButtons = document.querySelectorAll('.dealer-tabs .wallet-tab');
            tabButtons.forEach(btn => {
                btn.classList.remove('active');
            });
            
            element.classList.add('active');
        }
        
        function filterDealers(filter) {
            // Aggiorna gli elementi attivi nel menu
            const menuItems = document.querySelectorAll('#dealers-page .submenu-item');
            menuItems.forEach(item => item.classList.remove('active'));
            event.target.classList.add('active');
            
            // Ordina i dealer in base al filtro selezionato
            const dealers = document.querySelectorAll('#dealers-container .dealer-card');
            const dealersArray = Array.from(dealers);
            
            if (filter === 'roi') {
                dealersArray.sort((a, b) => {
                    const roiA = parseFloat(a.querySelector('.dealer-stat:nth-child(1) .stat-number').textContent);
                    const roiB = parseFloat(b.querySelector('.dealer-stat:nth-child(1) .stat-number').textContent);
                    return roiB - roiA; // Ordine decrescente per ROI
                });
            } else if (filter === 'pt') {
                dealersArray.sort((a, b) => {
                    const ptA = parseInt(a.querySelector('.dealer-stat:nth-child(2) .stat-number').textContent);
                    const ptB = parseInt(b.querySelector('.dealer-stat:nth-child(2) .stat-number').textContent);
                    return ptA - ptB; // Ordine crescente per PT (Payback Time)
                });
            } else if (filter === 'deal') {
                dealersArray.sort((a, b) => {
                    const dealsA = parseInt(a.querySelector('.dealer-stat:nth-child(3) .stat-number').textContent);
                    const dealsB = parseInt(b.querySelector('.dealer-stat:nth-child(3) .stat-number').textContent);
                    return dealsB - dealsA; // Ordine decrescente per numero di deals
                });
            }
            
            // Rimuovi e riappendi i dealer nell'ordine corretto
            const container = document.getElementById('dealers-container');
            container.innerHTML = '';
            dealersArray.forEach(dealer => {
                dealer.querySelector('.dealer-rank').textContent = (dealersArray.indexOf(dealer) + 1).toString();
                container.appendChild(dealer);
            });
        }
        
        function openDealerProfile(dealerId) {
            // Popola il modal con i dati del dealer
            let dealerName, dealerRating, dealerRoi, dealerPt, dealerDeals;
            
            switch(dealerId) {
                case 'elon-musk':
                    dealerName = 'ELON MUSK | TESLA WATCHES';
                    dealerRating = '5.0 (230+ recensioni)';
                    dealerRoi = '21%';
                    dealerPt = '64 giorni';
                    dealerDeals = '134';
                    break;
                case 'jeff-bezos':
                    dealerName = 'JEFF BEZOS | AMAZON CLOCK';
                    dealerRating = '4.8 (199 recensioni)';
                    dealerRoi = '19%';
                    dealerPt = '84 giorni';
                    dealerDeals = '113';
                    break;
                case 'mark-zuckerberg':
                    dealerName = 'M.ZUCKERBERG | META JILE';
                    dealerRating = '4.7 (187 recensioni)';
                    dealerRoi = '17%';
                    dealerPt = '91 giorni';
                    dealerDeals = '95';
                    break;
                default:
                    dealerName = 'PREMIUM RESELLER';
                    dealerRating = '4.8 (120 recensioni)';
                    dealerRoi = '17.3%';
                    dealerPt = '9.2 giorni';
                    dealerDeals = '86';
            }
            
            document.getElementById('dealer-profile-name').textContent = dealerName;
            
            // Apri il modal
            openModal('dealer-profile-modal');
            
            // Assicurati che la tab delle opportunità sia attiva
            showDealerTab('opportunities', document.querySelector('.dealer-tabs .wallet-tab'));
        }
        
        function viewDealerProfile(event) {
            if (event) event.stopPropagation();
            
            // Ottieni il nome del dealer dal dettaglio prodotto
            const dealerName = document.getElementById('dealer-name').textContent;
            document.getElementById('dealer-profile-name').textContent = dealerName;
            
            // Chiudi il dettaglio prodotto e apri il profilo dealer
            closeProductDetail();
            openModal('dealer-profile-modal');
            
            // Mostra la tab delle opportunità
            showDealerTab('opportunities', document.querySelector('.dealer-tabs .wallet-tab'));
        }
        
        function viewDealerReviews(event) {
            if (event) event.stopPropagation();
            
            // Ottieni il nome del dealer dal dettaglio prodotto
            const dealerName = document.getElementById('dealer-name').textContent;
            document.getElementById('dealer-profile-name').textContent = dealerName;
            
            // Chiudi il dettaglio prodotto e apri il profilo dealer
            closeProductDetail();
            openModal('dealer-profile-modal');
            
            // Mostra la tab delle recensioni
            showDealerTab('reviews', document.querySelectorAll('.dealer-tabs .wallet-tab')[1]);
        }
        
        function addDealerReview(event) {
            if (event) event.stopPropagation();
            
            const reviewText = document.getElementById('dealer-review-input').value.trim();
            
            if (reviewText) {
                const reviewsList = document.getElementById('dealer-reviews-list');
                const newReview = document.createElement('li');
                newReview.className = 'comment-item';
                
                newReview.innerHTML = `
                    <div class="comment-header">
                        <div class="comment-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div>
                            <div class="comment-user">Marco Rossi</div>
                            <div class="comment-time">Adesso</div>
                        </div>
                        <div class="dealer-stars" style="margin-left: auto;">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                    </div>
                    <div class="comment-text">
                        ${reviewText}
                    </div>
                `;
                
                reviewsList.insertBefore(newReview, reviewsList.firstChild);
                document.getElementById('dealer-review-input').value = '';
            }
        }
        
        // Funzioni per le opportunità
        function filterOpportunities(category) {
            // Aggiorna gli elementi attivi nel menu delle categorie
            const menuItems = document.querySelectorAll('#opportunity-categories .submenu-item');
            menuItems.forEach(item => item.classList.remove('active'));
            event.target.classList.add('active');
            
            // Filtra le opportunità in base alla categoria
            const opportunities = document.querySelectorAll('#opportunities-container .opportunity-card');
            opportunities.forEach(opportunity => {
                if (category === 'all' || opportunity.dataset.category === category) {
                    opportunity.style.display = 'block';
                } else {
                    opportunity.style.display = 'none';
                }
            });
        }
        
        function filterOpportunitiesByStatus(status) {
            // Aggiorna gli elementi attivi nel menu degli stati
            const menuItems = document.querySelectorAll('#opportunity-status .submenu-item');
            menuItems.forEach(item => item.classList.remove('active'));
            event.target.classList.add('active');
            
            // Filtra le opportunità in base allo stato
            const opportunities = document.querySelectorAll('#opportunities-container .opportunity-card');
            opportunities.forEach(opportunity => {
                if (status === 'disponibili' && !opportunity.dataset.status) {
                    opportunity.style.display = 'block';
                } else if (status === 'concluse' && opportunity.dataset.status === 'concluse') {
                    opportunity.style.display = 'block';
                } else {
                    opportunity.style.display = 'none';
                }
            });
        }
        
        function sortOpportunities(sort) {
            // Aggiorna gli elementi attivi nel menu di ordinamento
            const menuItems = document.querySelectorAll('#opportunity-filters .submenu-item');
            menuItems.forEach(item => item.classList.remove('active'));
            event.target.classList.add('active');
            
            // Ordina le opportunità in base al criterio selezionato
            const opportunities = document.querySelectorAll('#opportunities-container .opportunity-card');
            const opportunitiesArray = Array.from(opportunities).filter(opp => opp.style.display !== 'none');
            
            if (sort === 'roi') {
                opportunitiesArray.sort((a, b) => {
                    const roiA = parseFloat(a.querySelector('.opp-stat-value').textContent);
                    const roiB = parseFloat(b.querySelector('.opp-stat-value').textContent);
                    return roiB - roiA; // Ordine decrescente per ROI
                });
            } else if (sort === 'pt') {
                opportunitiesArray.sort((a, b) => {
                    const ptA = parseInt(a.querySelector('.opportunity-stat:nth-child(2) .opp-stat-value').textContent);
                    const ptB = parseInt(b.querySelector('.opportunity-stat:nth-child(2) .opp-stat-value').textContent);
                    return ptA - ptB; // Ordine crescente per PT
                });
            } else if (sort === 'price') {
                opportunitiesArray.sort((a, b) => {
                    const priceA = parseFloat(a.querySelector('.opportunity-stat:nth-child(3) .opp-stat-value').textContent.replace('€', '').replace(',', ''));
                    const priceB = parseFloat(b.querySelector('.opportunity-stat:nth-child(3) .opp-stat-value').textContent.replace('€', '').replace(',', ''));
                    return priceA - priceB; // Ordine crescente per prezzo
                });
            } else if (sort === 'time') {
                opportunitiesArray.sort((a, b) => {
                    const timeA = parseInt(a.querySelector('.countdown-badge span').textContent);
                    const timeB = parseInt(b.querySelector('.countdown-badge span').textContent);
                    return timeA - timeB; // Ordine crescente per tempo rimanente
                });
            }
            
            // Rimuovi e riappendi le opportunità nell'ordine corretto
            const container = document.getElementById('opportunities-container');
            container.innerHTML = '';
            opportunitiesArray.forEach(opportunity => {
                container.appendChild(opportunity);
            });
        }
        
        // Funzioni per il marketplace
        function filterMarketplace(category) {
            // Aggiorna gli elementi attivi nel menu delle categorie
            const menuItems = document.querySelectorAll('#marketplace-categories .submenu-item');
            menuItems.forEach(item => item.classList.remove('active'));
            event.target.classList.add('active');
            
            // Filtra gli elementi del marketplace in base alla categoria
            const items = document.querySelectorAll('#marketplace-items .marketplace-card');
            items.forEach(item => {
                if (category === 'tutti' || item.dataset.category === category) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }
        
        function filterMarketplaceByType(type, element) {
            // Aggiorna gli elementi attivi nel filtro
            const filterBtns = document.querySelectorAll('.marketplace-filter');
            filterBtns.forEach(btn => btn.classList.remove('active'));
            element. classList.add('active');
            
            // Filtra gli elementi del marketplace in base al tipo
            const items = document.querySelectorAll('#marketplace-items .marketplace-card');
            items.forEach(item => {
                if (type === 'tutti') {
                    item.style.display = 'block';
                } else if (type === 'beni' && item.dataset.type === 'beni') {
                    item.style.display = 'block';
                } else if (type === 'quote' && item.dataset.type === 'quote') {
                    item.style.display = 'block';
                } else if (type === 'nuovi' && item.dataset.condition === 'nuovo') {
                    item.style.display = 'block';
                } else if (type === 'usati' && item.dataset.condition === 'usato') {
                    item.style.display = 'block';
                } else if (type === 'prezzo-basso') {
                    // Ordina per prezzo crescente
                    const container = document.getElementById('marketplace-items');
                    const itemsArray = Array.from(items);
                    itemsArray.sort((a, b) => {
                        const priceA = parseFloat(a.querySelector('.marketplace-price').textContent.replace('€', '').replace(',', ''));
                        const priceB = parseFloat(b.querySelector('.marketplace-price').textContent.replace('€', '').replace(',', ''));
                        return priceA - priceB;
                    });
                    container.innerHTML = '';
                    itemsArray.forEach(item => {
                        item.style.display = 'block';
                        container.appendChild(item);
                    });
                    return; // Interrompi l'esecuzione qui per evitare il filtro successivo
                } else if (type === 'prezzo-alto') {
                    // Ordina per prezzo decrescente
                    const container = document.getElementById('marketplace-items');
                    const itemsArray = Array.from(items);
                    itemsArray.sort((a, b) => {
                        const priceA = parseFloat(a.querySelector('.marketplace-price').textContent.replace('€', '').replace(',', ''));
                        const priceB = parseFloat(b.querySelector('.marketplace-price').textContent.replace('€', '').replace(',', ''));
                        return priceB - priceA;
                    });
                    container.innerHTML = '';
                    itemsArray.forEach(item => {
                        item.style.display = 'block';
                        container.appendChild(item);
                    });
                    return; // Interrompi l'esecuzione qui per evitare il filtro successivo
                } else {
                    item.style.display = 'none';
                }
            });
        }
        
        function openMarketplaceItem(itemId, event) {
            if (event) event.stopPropagation();
            
            // Popola i dati del modal in base all'ID dell'elemento
            let itemName, itemCategory, itemPrice, itemDescription, sellerName, sellerRating, itemDetails;
            
            switch(itemId) {
                case 'rolex-submariner':
                    itemName = 'Rolex Submariner Date 41mm';
                    itemCategory = 'OROLOGI | NUOVO';
                    itemPrice = '€14,500';
                    itemDescription = 'Rolex Submariner Date 41mm, referenza 126610LN. Orologio nuovo con scatola e garanzia, completo di tutti gli accessori. Movimento automatico, cassa in acciaio inossidabile, lunetta girevole in ceramica nera, quadrante nero con indici luminescenti, datario a ore 3 con lente di ingrandimento Cyclops.';
                    sellerName = 'Luxury Watch Store';
                    sellerRating = '4.9 (86 recensioni)';
                    itemDetails = [
                        { label: 'MARCA', value: 'Rolex' },
                        { label: 'MODELLO', value: 'Submariner Date' },
                        { label: 'REFERENZA', value: '126610LN' },
                        { label: 'ANNO', value: '2025' },
                        { label: 'CONDIZIONI', value: 'Nuovo' },
                        { label: 'GARANZIA', value: '5 anni' }
                    ];
                    break;
                case 'hermes-birkin':
                    itemName = 'Hermès Birkin 35 Togo Nero';
                    itemCategory = 'BORSE | USATO';
                    itemPrice = '€22,900';
                    itemDescription = 'Hermès Birkin 35 in pelle Togo nera con hardware in palladio. Perfette condizioni, utilizzata solo poche volte. Completa di box, dustbag e carte. Acquistata nel 2022 presso la boutique Hermès di Parigi.';
                    sellerName = 'Luxury Bags';
                    sellerRating = '4.8 (52 recensioni)';
                    itemDetails = [
                        { label: 'MARCA', value: 'Hermès' },
                        { label: 'MODELLO', value: 'Birkin' },
                        { label: 'DIMENSIONE', value: '35 cm' },
                        { label: 'MATERIALE', value: 'Pelle Togo' },
                        { label: 'COLORE', value: 'Nero' },
                        { label: 'HARDWARE', value: 'Palladio' }
                    ];
                    break;
                case 'ferrari-quota':
                    itemName = 'Ferrari 458 Italia - 2013 - Quota 30%';
                    itemCategory = 'AUTOMOBILI | QUOTA';
                    itemPrice = '€90,000 (30% di €300,000)';
                    itemDescription = 'Vendita del 30% di una Ferrari 458 Italia del 2013 con soli 20.000 km. L\'auto è in perfette condizioni, sempre tenuta in garage climatizzato. Colore Rosso Corsa con interni in pelle nera. Full optional, tutti i tagliandi effettuati presso concessionario ufficiale. Valore di mercato in costante ascesa.';
                    sellerName = 'ClassicCar Investor';
                    sellerRating = '4.6 (38 recensioni)';
                    itemDetails = [
                        { label: 'MARCA', value: 'Ferrari' },
                        { label: 'MODELLO', value: '458 Italia' },
                        { label: 'ANNO', value: '2013' },
                        { label: 'KM', value: '20.000' },
                        { label: 'QUOTA', value: '30%' },
                        { label: 'VALORE TOTALE', value: '€300,000' }
                    ];
                    break;
                case 'appartamento-milano':
                    itemName = 'Appartamento Milano Centro - 150mq - Quota 25%';
                    itemCategory = 'REAL ESTATE | QUOTA';
                    itemPrice = '€250,000 (25% di €1,000,000)';
                    itemDescription = 'Vendita del 25% di un prestigioso appartamento di 150mq situato nel centro di Milano, a pochi passi dal Duomo. L\'immobile è stato completamente ristrutturato nel 2023 con finiture di pregio. Composto da 3 camere, 2 bagni, ampio soggiorno, cucina abitabile e terrazzo di 20mq. Attualmente affittato a €3,000 mensili con contratto 4+4. Ottimo investimento con rendita garantita.';
                    sellerName = 'Real Estate Partners';
                    sellerRating = '4.9 (43 recensioni)';
                    itemDetails = [
                        { label: 'TIPOLOGIA', value: 'Appartamento' },
                        { label: 'DIMENSIONE', value: '150mq' },
                        { label: 'LOCALI', value: '5' },
                        { label: 'QUOTA', value: '25%' },
                        { label: 'VALORE TOTALE', value: '€1,000,000' },
                        { label: 'RENDITA ANNUA', value: '€36,000' }
                    ];
                    break;
                case 'opera-arte':
                    itemName = 'Banksy - \'Girl with Balloon\' - Quota 15%';
                    itemCategory = 'ARTE | QUOTA';
                    itemPrice = '€120,000 (15% di €800,000)';
                    itemDescription = 'Vendita del 15% dell\'opera "Girl with Balloon" di Banksy, serigrafia numerata e autenticata. Dimensioni 70x50cm. Opera completa di certificato di autenticità rilasciato da Pest Control. Attualmente esposta in una galleria privata di Milano, conservata in condizioni ottimali. Valore in costante crescita negli ultimi anni.';
                    sellerName = 'ArtInvest Gallery';
                    sellerRating = '4.8 (29 recensioni)';
                    itemDetails = [
                        { label: 'ARTISTA', value: 'Banksy' },
                        { label: 'OPERA', value: 'Girl with Balloon' },
                        { label: 'TECNICA', value: 'Serigrafia' },
                        { label: 'DIMENSIONI', value: '70x50cm' },
                        { label: 'QUOTA', value: '15%' },
                        { label: 'VALORE TOTALE', value: '€800,000' }
                    ];
                    break;
                case 'rolex-daytona-quote':
                    itemName = 'Rolex Daytona in Oro Giallo 18k - Quota 50%';
                    itemCategory = 'OROLOGI | QUOTA';
                    itemPrice = '€20,000 (50% di €40,000)';
                    itemDescription = 'Vendita del 50% di un Rolex Daytona in oro giallo 18k, referenza 116528. Orologio del 2020 in condizioni pari al nuovo, completo di scatola e garanzia. Quadrante champagne con indici applicati in oro. Valore in costante aumento negli ultimi anni, ottima opportunità di investimento.';
                    sellerName = 'Watch Partners';
                    sellerRating = '4.8 (57 recensioni)';
                    itemDetails = [
                        { label: 'MARCA', value: 'Rolex' },
                        { label: 'MODELLO', value: 'Daytona' },
                        { label: 'REFERENZA', value: '116528' },
                        { label: 'MATERIALE', value: 'Oro giallo 18k' },
                        { label: 'QUOTA', value: '50%' },
                        { label: 'VALORE TOTALE', value: '€40,000' }
                    ];
                    break;
                default:
                    itemName = 'Rolex Submariner Date 41mm';
                    itemCategory = 'OROLOGI | NUOVO';
                    itemPrice = '€14,500';
                    itemDescription = 'Rolex Submariner Date 41mm, referenza 126610LN. Orologio nuovo con scatola e garanzia, completo di tutti gli accessori. Movimento automatico, cassa in acciaio inossidabile, lunetta girevole in ceramica nera, quadrante nero con indici luminescenti, datario a ore 3 con lente di ingrandimento Cyclops.';
                    sellerName = 'Luxury Watch Store';
                    sellerRating = '4.9 (86 recensioni)';
                    itemDetails = [
                        { label: 'MARCA', value: 'Rolex' },
                        { label: 'MODELLO', value: 'Submariner Date' },
                        { label: 'REFERENZA', value: '126610LN' },
                        { label: 'ANNO', value: '2025' },
                        { label: 'CONDIZIONI', value: 'Nuovo' },
                        { label: 'GARANZIA', value: '5 anni' }
                    ];
            }
            
            // Aggiorna il modal con i dati dell'elemento
            document.getElementById('marketplace-item-name').textContent = itemName;
            document.getElementById('marketplace-item-category').textContent = itemCategory;
            document.getElementById('marketplace-item-price').textContent = itemPrice;
            document.getElementById('marketplace-item-description').textContent = itemDescription;
            document.getElementById('marketplace-seller-name').textContent = sellerName;
            document.getElementById('marketplace-seller-rating').textContent = sellerRating;
            
            // Aggiorna i dettagli dell'elemento
            const detailsGrid = document.getElementById('marketplace-item-details-grid');
            detailsGrid.innerHTML = '';
            itemDetails.forEach(detail => {
                const detailItem = document.createElement('div');
                detailItem.className = 'detail-item';
                detailItem.innerHTML = `
                    <div class="detail-label">${detail.label}</div>
                    <div class="detail-value">${detail.value}</div>
                `;
                detailsGrid.appendChild(detailItem);
            });
            
            // Mostra il modal
            openModal('marketplace-item-modal');
        }
        
        function changeMarketplaceImage(thumbnail) {
            // Rimuovi la classe active da tutte le miniature
            document.querySelectorAll('.marketplace-thumbnail').forEach(thumb => {
                thumb.classList.remove('active');
            });
            
            // Aggiungi la classe active alla miniatura cliccata
            thumbnail.classList.add('active');
            
            // Cambia l'immagine principale
            document.querySelector('.marketplace-main-image').style.backgroundImage = thumbnail.style.backgroundImage;
        }
        
        function buyMarketplaceItem() {
            alert('Funzionalità di acquisto non ancora implementata.');
        }
        
        function contactSeller() {
            alert('Funzionalità di contatto venditore non ancora implementata.');
        }
        
        // Funzioni per preferiti
        function toggleFavorite(btn, event, productId) {
            if (event) event.stopPropagation();
            
            const icon = btn.querySelector('i');
            if (icon.classList.contains('far')) {
                icon.classList.remove('far');
                icon.classList.add('fas');
                // Aggiungi ai preferiti
                if (!favorites.includes(productId)) {
                    favorites.push(productId);
                    localStorage.setItem('favorites', JSON.stringify(favorites));
                }
            } else {
                icon.classList.remove('fas');
                icon.classList.add('far');
                // Rimuovi dai preferiti
                const index = favorites.indexOf(productId);
                if (index > -1) {
                    favorites.splice(index, 1);
                    localStorage.setItem('favorites', JSON.stringify(favorites));
                }
            }
            
            // Aggiorna la lista dei preferiti
            updateFavoritesList();
        }
        
        function toggleDetailFavorite(btn, event) {
            if (event) event.stopPropagation();
            
            const productId = getCurrentProductFromTitle();
            const icon = btn.querySelector('i');
            
            if (icon.classList.contains('far')) {
                icon.classList.remove('far');
                icon.classList.add('fas');
                // Aggiungi ai preferiti
                if (!favorites.includes(productId)) {
                    favorites.push(productId);
                    localStorage.setItem('favorites', JSON.stringify(favorites));
                }
            } else {
                icon.classList.remove('fas');
                icon.classList.add('far');
                // Rimuovi dai preferiti
                const index = favorites.indexOf(productId);
                if (index > -1) {
                    favorites.splice(index, 1);
                    localStorage.setItem('favorites', JSON.stringify(favorites));
                }
            }
            
            // Aggiorna la lista dei preferiti
            updateFavoritesList();
        }
        
        function getCurrentProductFromTitle() {
            const title = document.getElementById('product-title').textContent;
            // Trova il prodotto corrispondente al titolo
            for (const [id, product] of Object.entries(products)) {
                if (product.title === title) {
                    return id;
                }
            }
            return null;
        }
        
        function updateFavoritesList() {
            const grid = document.getElementById('favorites-grid');
            const empty = document.getElementById('favorites-empty');
            
            // Svuota la griglia
            grid.innerHTML = '';
            
            if (favorites.length === 0) {
                grid.style.display = 'none';
                empty.style.display = 'block';
            } else {
                grid.style.display = 'grid';
                empty.style.display = 'none';
                
                // Popola la griglia con i preferiti
                favorites.forEach(productId => {
                    if (products[productId]) {
                        const product = products[productId];
                        
                        const card = document.createElement('div');
                        card.className = 'product-card';
                        card.onclick = () => openProductDetail(productId);
                        
                        card.innerHTML = `
                            <div class="product-image" style="background-image: url('/api/placeholder/300/300')">
                                <button class="favorite-btn" onclick="toggleFavorite(this, event, '${productId}')">
                                    <i class="fas fa-heart"></i>
                                </button>
                                <div class="countdown-badge">
                                    <i class="far fa-clock"></i>
                                    <span>${product.timeRemaining}</span>
                                </div>
                            </div>
                            <div class="product-info">
                                <div class="product-category">${product.category}</div>
                                <div class="product-name">${product.title}</div>
                                <div class="product-dealer">${product.dealer}</div>
                                <div class="product-price">
                                    <div>
                                        <div class="price-label">QUOTA RICHIESTA</div>
                                        <div class="price-value">${product.purchasePrice.toLocaleString('it-IT', { style: 'currency', currency: 'EUR' }).replace('.', '')}</div>
                                    </div>
                                    <div>
                                        <div class="price-label">QUOTA MINIMA</div>
                                        <div class="price-value">${product.minAmount.toLocaleString('it-IT', { style: 'currency', currency: 'EUR' }).replace('.', '')}</div>
                                    </div>
                                </div>
                                <div class="product-status">
                                    <div class="status-collected">STATO RACCOLTA: ${product.collectionStatus}</div>
                                    <div class="status-time">
                                        <i class="far fa-clock"></i>
                                        <span>PT: ${product.estimatedTime}</span>
                                    </div>
                                </div>
                            </div>
                        `;
                        
                        grid.appendChild(card);
                    }
                });
            }
        }
        
        // Funzioni per la community
        function toggleJoin(btn, event) {
            if (event) event.stopPropagation();
            
            if (btn.classList.contains('joined')) {
                btn.classList.remove('joined');
                btn.textContent = 'Unisciti';
            } else {
                btn.classList.add('joined');
                btn.textContent = 'Iscritto';
            }
        }
        
        function openCommunityDetail(communityId, event) {
            if (event) event.stopPropagation();
            
            document.getElementById('community-list-container').style.display = 'none';
            document.querySelectorAll('.community-detail').forEach(detail => {
                detail.style.display = 'none';
            });
            document.getElementById('community-detail-' + communityId).style.display = 'block';
            
            // Aggiorna lo stato del pulsante "Unisciti"
            const communityItem = document.querySelector(`.community-item[onclick*="${communityId}"]`);
            const joinBtn = communityItem.querySelector('.join-btn');
            const communityJoinBtn = document.getElementById('community-join-btn-' + communityId);
            
            if (joinBtn.classList.contains('joined')) {
                communityJoinBtn.textContent = 'Iscritto';
                communityJoinBtn.classList.add('joined');
            } else {
                communityJoinBtn.textContent = 'Unisciti';
                communityJoinBtn.classList.remove('joined');
            }
            
            // Mostra la tab dei post
            const tabButton = document.querySelector(`#community-detail-${communityId} .community-tab`);
            showCommunityTab('posts' + (communityId !== 'orologi' ? '-' + communityId : ''), tabButton);
        }
        
        function closeCommunitytDetail() {
            document.getElementById('community-list-container').style.display = 'block';
            document.querySelectorAll('.community-detail').forEach(detail => {
                detail.style.display = 'none';
            });
        }
        
        function toggleCommunityJoin(communityId, event) {
            if (event) event.stopPropagation();
            
            const btn = document.getElementById(`community-join-btn-${communityId}`);
            const communityItem = document.querySelector(`.community-item[onclick*="${communityId}"]`);
            const joinBtn = communityItem.querySelector('.join-btn');
            
            if (btn.textContent === 'Unisciti') {
                btn.textContent = 'Iscritto';
                btn.classList.add('joined');
                joinBtn.textContent = 'Iscritto';
                joinBtn.classList.add('joined');
            } else {
                btn.textContent = 'Unisciti';
                btn.classList.remove('joined');
                joinBtn.textContent = 'Unisciti';
                joinBtn.classList.remove('joined');
            }
        }
        
        function likePost(element, event) {
            if (event) event.stopPropagation();
            
            const icon = element.querySelector('i');
            const count = element.querySelector('span');
            
            if (icon.classList.contains('far')) {
                icon.classList.remove('far');
                icon.classList.add('fas');
                count.textContent = (parseInt(count.textContent) + 1).toString();
            } else {
                icon.classList.remove('fas');
                icon.classList.add('far');
                count.textContent = (parseInt(count.textContent) - 1).toString();
            }
        }
        
        // Funzioni per commenti e risposte
        function toggleReplyForm(element, event) {
            if (event) event.stopPropagation();
            
            const commentItem = element.closest('.comment-item');
            const replyForm = commentItem.querySelector('.reply-form');
            
            if (replyForm.classList.contains('active')) {
                replyForm.classList.remove('active');
            } else {
                // Chiudi tutte le altre form di risposta
                document.querySelectorAll('.reply-form.active').forEach(form => {
                    form.classList.remove('active');
                });
                
                replyForm.classList.add('active');
                replyForm.querySelector('input').focus();
            }
        }
        
        function submitReply(button, event) {
            if (event) event.stopPropagation();
            
            const replyForm = button.closest('.reply-form');
            const input = replyForm.querySelector('input');
            const text = input.value.trim();
            
            if (text) {
                const commentItem = replyForm.closest('.comment-item');
                const repliesContainer = commentItem.querySelector('.comment-replies');
                
                // Se non esiste un container per le risposte, crealo
                if (!repliesContainer) {
                    const newRepliesContainer = document.createElement('div');
                    newRepliesContainer.className = 'comment-replies';
                    commentItem.appendChild(newRepliesContainer);
                    
                    addReply(newRepliesContainer, text);
                } else {
                    addReply(repliesContainer, text);
                }
                
                // Pulisci l'input e chiudi il form
                input.value = '';
                replyForm.classList.remove('active');
            }
        }
        
        function addReply(container, text) {
            const reply = document.createElement('div');
            reply.className = 'comment-reply';
            
            reply.innerHTML = `
                <div class="comment-header">
                    <div class="comment-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div>
                        <div class="comment-user">Marco Rossi</div>
                        <div class="comment-time">Adesso</div>
                    </div>
                </div>
                <div class="comment-text">
                    ${text}
                </div>
                <div class="comment-actions">
                    <div class="comment-action" onclick="likeComment(this, event)">
                        <i class="far fa-thumbs-up"></i>
                        <span>0</span>
                    </div>
                    <div class="comment-action" onclick="toggleReplyForm(this, event)">
                        <i class="far fa-comment"></i>
                        <span>Rispondi</span>
                    </div>
                </div>
                <div class="reply-form">
                    <input type="text" class="reply-input" placeholder="Scrivi una risposta...">
                    <button class="reply-btn" onclick="submitReply(this, event)">Invia</button>
                </div>
            `;
            
            container.appendChild(reply);
        }
        
        function addComment(event) {
            if (event) event.stopPropagation();
            
            const input = document.getElementById('new-comment-input');
            const text = input.value.trim();
            
            if (text) {
                const commentsList = document.getElementById('product-comments');
                const comment = document.createElement('li');
                comment.className = 'comment-item';
                
                comment.innerHTML = `
                    <div class="comment-header">
                        <div class="comment-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div>
                            <div class="comment-user">Marco Rossi</div>
                            <div class="comment-time">Adesso</div>
                        </div>
                    </div>
                    <div class="comment-text">
                        ${text}
                    </div>
                    <div class="comment-actions">
                        <div class="comment-action" onclick="likeComment(this, event)">
                            <i class="far fa-thumbs-up"></i>
                            <span>0</span>
                        </div>
                        <div class="comment-action" onclick="toggleReplyForm(this, event)">
                            <i class="far fa-comment"></i>
                            <span>Rispondi</span>
                        </div>
                    </div>
                    <div class="reply-form">
                        <input type="text" class="reply-input" placeholder="Scrivi una risposta...">
                        <button class="reply-btn" onclick="submitReply(this, event)">Invia</button>
                    </div>
                `;
                
                commentsList.insertBefore(comment, commentsList.firstChild);
                input.value = '';
            }
        }
        
        function likeComment(element, event) {
            if (event) event.stopPropagation();
            
            const icon = element.querySelector('i');
            const count = element.querySelector('span');
            
            if (icon.classList.contains('far')) {
                icon.classList.remove('far');
                icon.classList.add('fas');
                count.textContent = (parseInt(count.textContent) + 1).toString();
            } else {
                icon.classList.remove('fas');
                icon.classList.add('far');
                count.textContent = (parseInt(count.textContent) - 1).toString();
            }
        }
        
        // Funzioni per la chat
        function openChat(chatId, event) {
            if (event) event.stopPropagation();
            
            currentChat = chatId;
            
            // Aggiorna la UI della chat
            const chatUsers = document.querySelectorAll('.chat-user');
            chatUsers.forEach(user => {
                user.classList.remove('active');
            });
            
            const selectedChat = Array.from(chatUsers).find(user => user.getAttribute('onclick').includes(chatId));
            if (selectedChat) {
                selectedChat.classList.add('active');
            }
            
            // Aggiorna l'intestazione della chat
            const chatTitle = document.querySelector('.chat-title');
            const chatUserName = selectedChat ? selectedChat.querySelector('.chat-user-name').textContent : 'Chat';
            chatTitle.textContent = chatUserName;
            
            // Carica i messaggi della chat
            const chatContainer = document.getElementById('chat-messages');
            chatContainer.innerHTML = '';
            
            if (chatMessages[chatId]) {
                chatMessages[chatId].forEach(message => {
                    const messageEl = document.createElement('div');
                    messageEl.className = 'chat-message ' + (message.sender === 'user' ? 'message-sent' : 'message-received');
                    messageEl.textContent = message.text;
                    chatContainer.appendChild(messageEl);
                });
                
                // Scorri alla fine della chat
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }
        }
        
        function sendMessage(event) {
            if (event) event.stopPropagation();
            
            const input = document.getElementById('chat-input');
            const text = input.value.trim();
            
            if (text) {
                // Aggiungi il messaggio alla chat corrente
                if (!chatMessages[currentChat]) {
                    chatMessages[currentChat] = [];
                }
                
                chatMessages[currentChat].push({
                    sender: 'user',
                    text: text
                });
                
                // Salva i messaggi nel localStorage
                localStorage.setItem('chatMessages', JSON.stringify(chatMessages));
                
                // Aggiorna la UI
                const chatContainer = document.getElementById('chat-messages');
                const messageEl = document.createElement('div');
                messageEl.className = 'chat-message message-sent';
                messageEl.textContent = text;
                chatContainer.appendChild(messageEl);
                
                // Scorri alla fine della chat
                chatContainer.scrollTop = chatContainer.scrollHeight;
                
                // Pulisci l'input
                input.value = '';
                
                // Simula una risposta dopo un breve ritardo
                setTimeout(() => {
                    const responseText = "Grazie per il tuo messaggio! Ti risponderò al più presto.";
                    
                    chatMessages[currentChat].push({
                        sender: 'other',
                        text: responseText
                    });
                    
                    localStorage.setItem('chatMessages', JSON.stringify(chatMessages));
                    
                    const responseEl = document.createElement('div');
                    responseEl.className = 'chat-message message-received';
                    responseEl.textContent = responseText;
                    chatContainer.appendChild(responseEl);
                    
                    // Aggiorna l'ultimo messaggio nella lista delle chat
                    const chatUser = document.querySelector(`.chat-user[onclick*="${currentChat}"]`);
                    if (chatUser) {
                        chatUser.querySelector('.chat-user-last-msg').textContent = responseText;
                    }
                    
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                }, 1000);
            }
        }
        
        // Funzioni per il modulo di caricamento immagini
        function previewImage(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    const preview = document.getElementById('image-preview');
                    preview.style.backgroundImage = 'url(' + e.target.result + ')';
                    preview.style.display = 'block';
                }
                
                reader.readAsDataURL(input.files[0]);
            }
        }
        
        // Funzioni per la ricerca
        function searchItems() {
            const query = document.getElementById('search-input').value.trim().toLowerCase();
            const resultsContainer = document.getElementById('search-results');
            
            // Svuota i risultati
            resultsContainer.innerHTML = '';
            
            if (query.length < 2) {
                document.getElementById('recent-searches').style.display = 'block';
                return;
            }
            
            // Nascondi le ricerche recenti
            document.getElementById('recent-searches').style.display = 'none';
            
            // Aggiungi la query alla cronologia di ricerca
            if (query.length > 2 && !searchHistory.includes(query)) {
                searchHistory.unshift(query);
                if (searchHistory.length > 5) {
                    searchHistory.pop();
                }
                localStorage.setItem('searchHistory', JSON.stringify(searchHistory));
                updateSearchHistory();
            }
            
            // Cerca nei prodotti, categorie e dealer
            let results = [];
            
            // Cerca nei prodotti
            for (const [id, product] of Object.entries(products)) {
                if (product.title.toLowerCase().includes(query) || 
                    product.category.toLowerCase().includes(query) || 
                    product.dealer.toLowerCase().includes(query) || 
                    product.description.toLowerCase().includes(query)) {
                    results.push({
                        id: id,
                        type: 'product',
                        data: product
                    });
                }
            }
            
            // Cerca nelle categorie
            const categories = [
                { id: 'orologi', name: 'OROLOGI', description: 'Investimenti in orologi di lusso' },
                { id: 'borse', name: 'BORSE', description: 'Investimenti in borse di alta moda' },
                { id: 'gioielli', name: 'GIOIELLI', description: 'Investimenti in gioielli e pietre preziose' },
                { id: 'arte', name: 'ARTE', description: 'Investimenti in opere d\'arte' },
                { id: 'vino', name: 'VINO', description: 'Investimenti in vini pregiati' },
                { id: 'whiskey', name: 'WHISKEY', description: 'Investimenti in whiskey rari' },
                { id: 'automobili', name: 'AUTOMOBILI', description: 'Investimenti in automobili d\'epoca e da collezione' },
                { id: 'realestate', name: 'REAL ESTATE', description: 'Investimenti immobiliari' }
            ];
            
            categories.forEach(category => {
                if (category.name.toLowerCase().includes(query) || 
                    category.description.toLowerCase().includes(query)) {
                    results.push({
                        id: category.id,
                        type: 'category',
                        data: category
                    });
                }
            });
            
            // Cerca nei dealer
            const dealers = [
                { id: 'premium-reseller', name: 'PREMIUM RESELLER', description: 'Dealer specializzato in orologi di lusso' },
                { id: 'luxury-brand', name: 'LUXURY BRAND', description: 'Dealer di marchi di lusso' },
                { id: 'fashion-bags-reseller', name: 'FASHION BAGS RESELLER', description: 'Dealer specializzato in borse di alta moda' },
                { id: 'elon-musk', name: 'ELON MUSK | TESLA WATCHES', description: 'Top dealer di orologi di lusso' },
                { id: 'jeff-bezos', name: 'JEFF BEZOS | AMAZON CLOCK', description: 'Dealer premium di orologi' },
                { id: 'mark-zuckerberg', name: 'M.ZUCKERBERG | META JILE', description: 'Dealer di oggetti di lusso' }
            ];
            
            dealers.forEach(dealer => {
                if (dealer.name.toLowerCase().includes(query) || 
                    dealer.description.toLowerCase().includes(query)) {
                    results.push({
                        id: dealer.id,
                        type: 'dealer',
                        data: dealer
                    });
                }
            });
            
            // Mostra i risultati
            if (results.length > 0) {
                results.forEach(result => {
                    const resultItem = document.createElement('div');
                    resultItem.className = 'search-result-item';
                    
                    if (result.type === 'product') {
                        resultItem.onclick = () => {
                            closeModal('search-modal');
                            openProductDetail(result.id);
                        };
                        
                        resultItem.innerHTML = `
                            <div class="result-image" style="background-image: url('/api/placeholder/200/200')"></div>
                            <div class="result-info">
                                <div class="result-category">${result.data.category}</div>
                                <div class="result-title">${result.data.title}</div>
                                <div class="result-snippet">${result.data.description.substring(0, 100)}...</div>
                                <div class="result-meta">
                                    <span>${result.data.dealer}</span>
                                    <span>ROI: ${result.data.roi}</span>
                                </div>
                            </div>
                        `;
                    } else if (result.type === 'category') {
                        resultItem.onclick = () => {
                            closeModal('search-modal');
                            showCategoryDetail(result.id);
                        };
                        
                        resultItem.innerHTML = `
                            <div class="result-image" style="background-image: url('/api/placeholder/200/200')"></div>
                            <div class="result-info">
                                <div class="result-category">CATEGORIA</div>
                                <div class="result-title">${result.data.name}</div>
                                <div class="result-snippet">${result.data.description}</div>
                            </div>
                        `;
                    } else if (result.type === 'dealer') {
                        resultItem.onclick = () => {
                            closeModal('search-modal');
                            openDealerProfile(result.id);
                        };
                        
                        resultItem.innerHTML = `
                            <div class="result-image" style="background-image: url('/api/placeholder/200/200')"></div>
                            <div class="result-info">
                                <div class="result-category">DEALER</div>
                                <div class="result-title">${result.data.name}</div>
                                <div class="result-snippet">${result.data.description}</div>
                            </div>
                        `;
                    }
                    
                    resultsContainer.appendChild(resultItem);
                });
            } else {
                const noResults = document.createElement('div');
                noResults.className = 'section-title';
                noResults.style.textAlign = 'center';
                noResults.style.padding = '20px 0';
                noResults.textContent = 'Nessun risultato trovato per "' + query + '"';
                resultsContainer.appendChild(noResults);
            }
        }
        
        function clearSearch() {
            document.getElementById('search-input').value = '';
            document.getElementById('search-results').innerHTML = '';
            document.getElementById('recent-searches').style.display = 'block';
        }
        
        function setSearch(query) {
            document.getElementById('search-input').value = query;
            searchItems();
        }
        
        function filterSearch(filter, element) {
            const pills = document.querySelectorAll('.filter-pill');
            pills.forEach(pill => {
                pill.classList.remove('active');
            });
            
            element.classList.add('active');
            
            // Esegui la ricerca filtrata
            searchItems();
        }
        
        function removeSearch(btn, event) {
            if (event) event.stopPropagation();
            
            const searchItem = btn.closest('.search-item');
            const searchText = searchItem.querySelector('.search-text').textContent;
            
            // Rimuovi dalla cronologia
            const index = searchHistory.indexOf(searchText);
            if (index > -1) {
                searchHistory.splice(index, 1);
                localStorage.setItem('searchHistory', JSON.stringify(searchHistory));
            }
            
            // Rimuovi dalla UI
            searchItem.remove();
        }
        
        function updateSearchHistory() {
            const container = document.getElementById('search-history');
            container.innerHTML = '';
            
            searchHistory.forEach(query => {
                const item = document.createElement('li');
                item.className = 'search-item';
                item.onclick = () => setSearch(query);
                
                item.innerHTML = `
                    <div class="search-icon"><i class="fas fa-history"></i></div>
                    <div class="search-text">${query}</div>
                    <button class="remove-search" onclick="removeSearch(this, event)"><i class="fas fa-times"></i></button>
                `;
                
                container.appendChild(item);
            });
        }
        
        // Funzioni per le notifiche
        function handleNotification(notificationId, event) {
            if (event) event.stopPropagation();
            
            // Rimuovi la classe unread
            const notificationItems = document.querySelectorAll('.notification-item');
            notificationItems.forEach(item => {
                if (item.getAttribute('onclick').includes(notificationId)) {
                    item.classList.remove('unread');
                }
            });
            
            // Aggiorna il conteggio delle notifiche
            updateNotificationBadge();
            
            // Gestisci l'azione in base al tipo di notifica
            switch (notificationId) {
                case 'investment-complete':
                    closeModal('notifications-modal');
                    openModal('wallet-modal');
                    showWalletTab('investments', document.querySelectorAll('.wallet-tab')[1]);
                    break;
                case 'community-invite':
                    closeModal('notifications-modal');
                    openModal('community-modal');
                    break;
                case 'new-opportunity':
                    closeModal('notifications-modal');
                    openProductDetail('patek-philippe');
                    break;
                case 'profit-received':
                    closeModal('notifications-modal');
                    openModal('wallet-modal');
                    showWalletTab('transactions', document.querySelectorAll('.wallet-tab')[0]);
                    break;
                case 'status-update':
                    closeModal('notifications-modal');
                    openModal('profile-modal');
                    break;
            }
        }
        
        function updateNotificationBadge() {
            const unreadCount = document.querySelectorAll('.notification-item.unread').length;
            const badge = document.querySelector('.notification-badge');
            
            if (unreadCount > 0) {
                badge.textContent = unreadCount;
                badge.style.display = 'flex';
            } else {
                badge.style.display = 'none';
            }
        }
        
        // Funzioni per gli investimenti
        function confirmInvestment(event) {
            if (event) event.stopPropagation();
            
            const productId = getCurrentProductFromTitle();
            const amount = parseFloat(document.getElementById('investment-amount').value);
            const product = products[productId];
            
            // Verifica che l'importo sia valido
            if (isNaN(amount) || amount < product.minAmount || amount > product.maxAmount) {
                alert('Inserisci un importo valido (min €' + product.minAmount + ', max €' + product.maxAmount + ')');
                return;
            }
            
            // Verifica che l'utente abbia abbastanza saldo
            if (amount > userWalletBalance) {
                alert('Saldo insufficiente. Deposita fondi nel tuo wallet.');
                return;
            }
            
            // Aggiorna il saldo del wallet
            userWalletBalance -= amount;
            localStorage.setItem('userWalletBalance', userWalletBalance);
            
            // Aggiungi l'investimento alla lista
            const newInvestment = {
                id: productId,
                amount: amount,
                date: new Date().toISOString(),
                name: product.title,
                roi: product.roi,
                time: product.estimatedTime,
                status: 'Attivo'
            };
            
            userInvestments.push(newInvestment);
            localStorage.setItem('userInvestments', JSON.stringify(userInvestments));
            
            // Aggiungi la transazione
            const newTransaction = {
                id: 'investment-' + Date.now(),
                name: 'Investimento ' + newInvestment.name,
                amount: -amount,
                date: new Date().toLocaleDateString('it-IT'),
                type: 'investment'
            };
            
            userTransactions.push(newTransaction);
            localStorage.setItem('userTransactions', JSON.stringify(userTransactions));
            
            // Aggiorna la UI del wallet
            updateWalletBalance();
            updateTransactionsList();
            
            // Chiudi il dettaglio del prodotto
            closeProductDetail();
            
            // Mostra il modal di successo
            document.getElementById('success-product-name').textContent = newInvestment.name;
            document.getElementById('success-amount').textContent = '€' + amount.toFixed(2);
            document.getElementById('success-date').textContent = new Date().toLocaleDateString('it-IT');
            document.getElementById('success-roi').textContent = newInvestment.roi;
            document.getElementById('success-time').textContent = newInvestment.time;
            
            openModal('investment-success-modal');
        }
        
        function cancelInvestment(event) {
            if (event) event.stopPropagation();
            closeProductDetail();
        }
        
        function viewInvestmentInWallet() {
            closeModal('investment-success-modal');
            openModal('wallet-modal');
            showWalletTab('investments', document.querySelectorAll('.wallet-tab')[1]);
        }
        
        function submitOpportunity() {
            const form = document.getElementById('opportunity-form');
            
            // Verifica che tutti i campi siano compilati
            const requiredInputs = form.querySelectorAll('[required]');
            let isValid = true;
            
            requiredInputs.forEach(input => {
                if (!input.value) {
                    isValid = false;
                    input.classList.add('error');
                } else {
                    input.classList.remove('error');
                }
            });
            
            if (!isValid) {
                alert('Compila tutti i campi obbligatori');
                return;
            }
            
            // Ottieni i valori dal form
            const category = document.getElementById('category-select').value;
            const name = document.getElementById('product-name').value;
            const description = document.getElementById('product-description').value;
            const purchasePrice = parseFloat(document.getElementById('purchase-price').value);
            const roiMin = parseFloat(document.getElementById('roi-min').value);
            const roiMax = parseFloat(document.getElementById('roi-max').value);
            const ptMin = parseInt(document.getElementById('pt-min').value);
            const ptMax = parseInt(document.getElementById('pt-max').value);
            const yourInvestment = parseFloat(document.getElementById('your-investment').value);
            const requestedInvestment = parseFloat(document.getElementById('requested-investment').value);
            const minimumInvestment = parseFloat(document.getElementById('minimum-investment').value);
            
            // Verifica che i valori numerici siano validi
            if (isNaN(purchasePrice) || isNaN(roiMin) || isNaN(roiMax) || isNaN(ptMin) || isNaN(ptMax) || 
                isNaN(yourInvestment) || isNaN(requestedInvestment) || isNaN(minimumInvestment)) {
                alert('Inserisci valori numerici validi');
                return;
            }
            
            // Verifica che i valori abbiano senso
            if (purchasePrice <= 0 || roiMin <= 0 || roiMax <= 0 || ptMin <= 0 || ptMax <= 0 || 
                yourInvestment <= 0 || requestedInvestment <= 0 || minimumInvestment <= 0) {
                alert('I valori devono essere maggiori di zero');
                return;
            }
            
            if (roiMin > roiMax) {
                alert('Il ROI minimo non può essere maggiore del ROI massimo');
                return;
            }
            
            if (ptMin > ptMax) {
                alert('Il PT minimo non può essere maggiore del PT massimo');
                return;
            }
            
            if (yourInvestment + requestedInvestment !== purchasePrice) {
                alert('La somma del tuo investimento e della quota richiesta deve essere uguale al prezzo di acquisto');
                return;
            }
            
            if (minimumInvestment > requestedInvestment) {
                alert('La quota minima non può essere maggiore della quota richiesta');
                return;
            }
            
            // Verifica che l'utente abbia abbastanza saldo
            if (yourInvestment > userWalletBalance) {
                alert('Saldo insufficiente per il tuo investimento. Deposita fondi nel tuo wallet.');
                return;
            }
            
            // Aggiorna il saldo del wallet
            userWalletBalance -= yourInvestment;
            localStorage.setItem('userWalletBalance', userWalletBalance);
            
            // Calcola il ROI
            const roi = roiMin + '-' + roiMax + '%';
            
            // Crea la nuova opportunità
            const opportunityId = 'opportunity-' + Date.now();
            const newOpportunity = {
                id: opportunityId,
                category: category,
                name: name,
                description: description,
                purchasePrice: purchasePrice,
                roi: roi,
                pt: ptMin + '-' + ptMax + ' giorni',
                yourInvestment: yourInvestment,
                requestedInvestment: requestedInvestment,
                minimumInvestment: minimumInvestment,
                date: new Date().toISOString(),
                status: 'Attivo',
                progress: 0
            };
            
            userOpportunities.push(newOpportunity);
            localStorage.setItem('userOpportunities', JSON.stringify(userOpportunities));
            
            // Aggiungi la transazione
            const newTransaction = {
                id: 'opportunity-investment-' + Date.now(),
                name: 'Investimento nella tua opportunità: ' + name,
                amount: -yourInvestment,
                date: new Date().toLocaleDateString('it-IT'),
                type: 'opportunity'
            };
            
            userTransactions.push(newTransaction);
            localStorage.setItem('userTransactions', JSON.stringify(userTransactions));
            
            // Aggiorna la UI
            updateWalletBalance();
            updateTransactionsList();
            
            // Aggiungi il prodotto alla lista dei prodotti
            products[opportunityId] = {
                title: name,
                category: category.toUpperCase(),
                dealer: 'MARCO ROSSI',
                description: description,
                purchasePrice: purchasePrice,
                roi: roi,
                estimatedTime: ptMin + '-' + ptMax + ' giorni',
                dealerPT: 'N/A',
                collectionStatus: '€0 / €' + requestedInvestment,
                collectionPercentage: '0%',
                timeRemaining: ptMax + ' giorni',
                minAmount: minimumInvestment,
                maxAmount: requestedInvestment
            };
            
            // Aggiungi il prodotto alla home
            addProductToHome(opportunityId);
            
            // Chiudi il modal di aggiunta opportunità
            closeModal('add-opportunity-modal');
            
            // Mostra il modal di successo
            document.getElementById('opp-success-product-name').textContent = name;
            document.getElementById('opp-success-purchase-price').textContent = '€' + purchasePrice.toFixed(2);
            document.getElementById('opp-success-roi').textContent = roi;
            document.getElementById('opp-success-time').textContent = ptMin + '-' + ptMax + ' giorni';
            
            openModal('opportunity-success-modal');
            
            // Resetta il form
            form.reset();
            document.getElementById('image-preview').style.display = 'none';
        }
        
        function addProductToHome(productId) {
            const product = products[productId];
            const grid = document.getElementById('home-products');
            
            const card = document.createElement('div');
            card.className = 'product-card';
            card.onclick = () => openProductDetail(productId);
            
            card.innerHTML = `
                <div class="product-image" style="background-image: url('/api/placeholder/300/300')">
                    <button class="favorite-btn" onclick="toggleFavorite(this, event, '${productId}')">
                        <i class="far fa-heart"></i>
                    </button>
                    <div class="countdown-badge">
                        <i class="far fa-clock"></i>
                        <span>${product.timeRemaining}</span>
                    </div>
                </div>
                <div class="product-info">
                    <div class="product-category">${product.category}</div>
                    <div class="product-name">${product.title}</div>
                    <div class="product-dealer">${product.dealer}</div>
                    <div class="product-price">
                        <div>
                            <div class="price-label">QUOTA RICHIESTA</div>
                            <div class="price-value">${product.purchasePrice.toLocaleString('it-IT', { style: 'currency', currency: 'EUR' }).replace('.', '')}</div>
                        </div>
                        <div>
                            <div class="price-label">QUOTA MINIMA</div>
                            <div class="price-value">${product.minAmount.toLocaleString('it-IT', { style: 'currency', currency: 'EUR' }).replace('.', '')}</div>
                        </div>
                    </div>
                    <div class="product-status">
                        <div class="status-collected">STATO RACCOLTA: ${product.collectionStatus}</div>
                        <div class="status-time">
                            <i class="far fa-clock"></i>
                            <span>PT: ${product.estimatedTime}</span>
                        </div>
                    </div>
                </div>
            `;
            
            // Inserisci all'inizio della griglia
            grid.insertBefore(card, grid.firstChild);
        }
        
        function viewOpportunityInWallet() {
            closeModal('opportunity-success-modal');
            openModal('wallet-modal');
            showWalletTab('opportunities', document.querySelectorAll('.wallet-tab')[2]);
        }
        
        // Funzioni per il wallet
        function showWalletAction(action, event) {
            if (event) event.stopPropagation();
            
            // Nascondi tutti i form
            document.getElementById('deposit-form').style.display = 'none';
            document.getElementById('withdraw-form').style.display = 'none';
            
            // Mostra il form selezionato
            if (action === 'deposit') {
                document.getElementById('deposit-form').style.display = 'block';
            } else if (action === 'withdraw') {
                document.getElementById('withdraw-form').style.display = 'block';
                document.getElementById('withdraw-amount').max = userWalletBalance;
            }
        }
        
        function selectPaymentMethod(method, element) {
            // Aggiorna lo stile del metodo selezionato
            document.querySelectorAll('.wallet-method').forEach(btn => {
                btn.classList.remove('active');
            });
            element.classList.add('active');
            
            // Mostra i campi corretti in base al metodo
            document.getElementById('card-method-fields').style.display = 'none';
            document.getElementById('bank-method-fields').style.display = 'none';
            document.getElementById('paypal-method-fields').style.display = 'none';
            
            if (method === 'card') {
                document.getElementById('card-method-fields').style.display = 'block';
            } else if (method === 'bank') {
                document.getElementById('bank-method-fields').style.display = 'block';
            } else if (method === 'paypal') {
                document.getElementById('paypal-method-fields').style.display = 'block';
            }
        }
        
        function processDeposit() {
            const amount = parseFloat(document.getElementById('deposit-amount').value);
            
            if (isNaN(amount) || amount <= 0) {
                alert('Inserisci un importo valido');
                return;
            }
            
            // Aggiorna il saldo del wallet
            userWalletBalance += amount;
            localStorage.setItem('userWalletBalance', userWalletBalance);
            
            // Aggiungi la transazione
            const newTransaction = {
                id: 'deposit-' + Date.now(),
                name: 'Deposito',
                amount: amount,
                date: new Date().toLocaleDateString('it-IT'),
                type: 'deposit'
            };
            
            userTransactions.push(newTransaction);
            localStorage.setItem('userTransactions', JSON.stringify(userTransactions));
            
            // Aggiorna la UI
            updateWalletBalance();
            updateTransactionsList();
            
            // Nascondi il form di deposito
            document.getElementById('deposit-form').style.display = 'none';
            
            alert('Deposito di €' + amount.toFixed(2) + ' effettuato con successo!');
        }
        
        function processWithdraw() {
            const amount = parseFloat(document.getElementById('withdraw-amount').value);
            
            if (isNaN(amount) || amount <= 0 || amount > userWalletBalance) {
                alert('Inserisci un importo valido (max €' + userWalletBalance.toFixed(2) + ')');
                return;
            }
            
            // Aggiorna il saldo del wallet
            userWalletBalance -= amount;
            localStorage.setItem('userWalletBalance', userWalletBalance);
            
            // Aggiungi la transazione
            const newTransaction = {
                id: 'withdraw-' + Date.now(),
                name: 'Prelievo',
                amount: -amount,
                date: new Date().toLocaleDateString('it-IT'),
                type: 'withdraw'
            };
            
            userTransactions.push(newTransaction);
            localStorage.setItem('userTransactions', JSON.stringify(userTransactions));
            
            // Aggiorna la UI
            updateWalletBalance();
            updateTransactionsList();
            
            // Nascondi il form di prelievo
            document.getElementById('withdraw-form').style.display = 'none';
            
            alert('Prelievo di €' + amount.toFixed(2) + ' effettuato con successo!');
        }
        
        function updateWalletBalance() {
            document.getElementById('wallet-balance').textContent = '€' + userWalletBalance.toFixed(2);
        }
        
        function updateTransactionsList() {
            const container = document.getElementById('transaction-list');
            container.innerHTML = '';
            
            // Ordina le transazioni per data (dalla più recente)
            const sortedTransactions = [...userTransactions].sort((a, b) => {
                return new Date(b.date) - new Date(a.date);
            });
            
            sortedTransactions.forEach(transaction => {
                const item = document.createElement('li');
                item.className = 'transaction-item';
                item.onclick = () => showTransactionDetail(transaction.id);
                
                item.innerHTML = `
                    <div class="transaction-info">
                        <div class="transaction-name">${transaction.name}</div>
                        <div class="transaction-date">${transaction.date}</div>
                    </div>
                    <div class="transaction-amount ${transaction.amount >= 0 ? 'positive' : 'negative'}">
                        ${transaction.amount >= 0 ? '+' : ''}€${Math.abs(transaction.amount).toFixed(2)}
                    </div>
                `;
                
                container.appendChild(item);
            });
        }
        
        function showTransactionDetail(transactionId) {
            // Trova la transazione nel localStorage
            const transaction = userTransactions.find(t => t.id === transactionId);
            
            if (transaction) {
                // Popola i dettagli della transazione
                document.getElementById('transaction-detail-title').textContent = transaction.name;
                document.getElementById('transaction-detail-amount').textContent = transaction.amount >= 0 ? '+€' + transaction.amount.toFixed(2) : '-€' + Math.abs(transaction.amount).toFixed(2);
                document.getElementById('transaction-detail-amount').className = transaction.amount >= 0 ? 'transaction-detail-amount positive' : 'transaction-detail-amount negative';
                document.getElementById('transaction-detail-date').textContent = transaction.date;
                document.getElementById('transaction-detail-status').textContent = 'Completata';
                document.getElementById('transaction-detail-id').textContent = 'TRX-' + Math.floor(Math.random() * 100000000).toString().padStart(8, '0');
                document.getElementById('transaction-detail-type').textContent = transaction.type.charAt(0).toUpperCase() + transaction.type.slice(1);
                
                // Descrizione personalizzata in base al tipo
                let description = '';
                if (transaction.type === 'investment') {
                    description = 'Investimento nell\'opportunità ' + transaction.name.replace('Investimento ', '') + '. L\'importo è stato detratto dal tuo saldo wallet e aggiunto all\'opportunità di investimento.';
                } else if (transaction.type === 'opportunity') {
                    description = 'Creazione dell\'opportunità ' + transaction.name.replace('Investimento nella tua opportunità: ', '') + '. L\'importo è stato detratto dal tuo saldo wallet e investito nell\'opportunità.';
                } else if (transaction.amount > 0) {
                    description = 'Ritorno dell\'investimento ' + transaction.name.replace('Ritorno Investimento ', '') + '. L\'importo è stato accreditato sul tuo saldo wallet.';
                } else {
                    description = transaction.name + '. L\'importo è stato detratto dal tuo saldo wallet.';
                }
                document.getElementById('transaction-detail-description').textContent = description;
                
                // Mostra il modale
                openModal('transaction-detail-modal');
            }
        }
        
        // Funzioni per il profilo
        function showProfileSection(section) {
            document.getElementById('profile-main').style.display = 'none';
            
            // Nascondi tutte le sezioni
            const sections = document.querySelectorAll('.profile-section');
            sections.forEach(s => {
                s.style.display = 'none';
            });
            
            // Mostra la sezione selezionata
            document.getElementById('profile-' + section).style.display = 'block';
        }
        
        function backToProfile() {
            // Nascondi tutte le sezioni
            const sections = document.querySelectorAll('.profile-section');
            sections.forEach(s => {
                s.style.display = 'none';
            });
            
            // Mostra il profilo principale
            document.getElementById('profile-main').style.display = 'block';
        }
        
        function logout() {
            alert('Logout effettuato con successo');
            closeModal('profile-modal');
        }
        
        // Funzioni per le categorie e i filtri
        function showCategoryFilters() {
            alert('Funzionalità filtri categoria in fase di implementazione');
        }
        
        function showCategorySorting() {
            alert('Funzionalità ordinamento categoria in fase di implementazione');
        }
        
        // Gestione degli eventi window
        window.addEventListener('click', function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(function(modal) {
                if (event.target == modal) {
                    const modalId = modal.getAttribute('id');
                    closeModal(modalId);
                }
            });
        });
        
        // Funzione per lo swipe back nelle pagine di dettaglio
        document.addEventListener('touchstart', handleTouchStart, false);
        document.addEventListener('touchmove', handleTouchMove, false);
        
        let xDown = null;
        let yDown = null;
        
        function handleTouchStart(evt) {
            xDown = evt.touches[0].clientX;
            yDown = evt.touches[0].clientY;
        }
        
        function handleTouchMove(evt) {
            if (!xDown || !yDown) {
                return;
            }
            
            const xUp = evt.touches[0].clientX;
            const yUp = evt.touches[0].clientY;
            
            const xDiff = xDown - xUp;
            const yDiff = yDown - yUp;
            
            if (Math.abs(xDiff) > Math.abs(yDiff)) {
                if (xDiff < 0) { // Swipe right
                    // Check if we're in a detail page
                    if (currentPage.startsWith('category-')) {
                        goBackToCategories();
                    } else if (document.getElementById('product-detail').style.display === 'block') {
                        closeProductDetail();
                    }
                }
            }
            
            xDown = null;
            yDown = null;
        }
    </script>
</body>
</html>
